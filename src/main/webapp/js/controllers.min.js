!function(e){e.baseCtrl=function(){},e.baseCtrl.prototype.getContext=function(){}}(gxb.controllers),function(e){e.registerNamespace("gxb.controllers.portal"),e.registerNamespace("gxb.controllers.admin"),e.registerNamespace("gxb.controllers.super"),e.registerNamespace("gxb.controllers.portal.courses"),e.registerNamespace("gxb.controllers.portal.profiles")}(gxb.components),function(e,t){e.portal.courses.aboutUsCtrl=function(e){var t="jingcaishiting";e.$endPageSrv.getAboutUs(gxb.settings.identifier.getTenantID()).then(function(t){e.$scope.newsDetail=t||{},e.$scope.$newsDetailHtml=e.$sce.trustAsHtml(t.body),e.$scope.$apply(),$("#content").find("span").each(function(){var e=parseInt($(this).css("font-size"))+10+"px";$(this).css("line-height",e)})}),e.$scope.coursesList=[],e.$classesSrv.loadCourses("","",t).then(function(t){e.$scope.coursesList=t.dataList||[],e.$scope.$apply()})},e.inheritFromCtrl(e.portal.courses.aboutUsCtrl),e.registerDependency("gxb.controllers.portal.courses.aboutUsCtrl",["gxb.services.classes.classesSrv","gxb.services.tenants.endPageSrv"]),e.registerView("gxb.controllers.portal.courses.aboutUsCtrl","business/aboutus/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.courses.activityCtrl=function(e){var s=e.$state.params.activityId||"",o=[{picture_desc:"/image/activity/activity.png",header:{imgUrl:"/image/activity/courseImh.png",title:"移动程序开发专业",des:"一个可以攻略PC端，又可以攻陷移动端的神器，学成之后是不是可以召唤神龙了",explain:"本系列课程结合行业的需求，根据对Android以及JavaWeb开发相关工作岗位群的核心技能的高度提炼，以Java语言、Oracle数据库为技术基础，在此之上讲解Android核心开发技术以及行业通用的JavaWeb开发技术，带领学生按照实际项目的开发流程完成完整的商用APP和服务端项目的开发，力求培养出具有扎实的理论知识、真实的项目实战能力、满足企业实际用人需求的技术型人才。",classHour:130,"class":10},courses:[{title:"商务网站建设",main:[{courseImg:"/image/activity/singleCourseImg.png",classId:6502,name:"静态网页技术"},{courseImg:"/image/activity/single1.png",classId:5200,name:"商务网站建设实践"}]},{title:"编程开发核心技术",main:[{courseImg:"/image/activity/single3.png",classId:6504,name:"Java核心开发技术"},{courseImg:"/image/activity/single2.png",classId:7156,name:"C/S项目设计与开发实践"},{courseImg:"/image/activity/single2.png",classId:7699,name:"面向对象方法精粹"}]},{title:"JavaWeb服务端技术",main:[{courseImg:"/image/activity/single4.png",classId:5109,name:"JavaWeb开发技术"},{courseImg:"/image/activity/single5.png",classId:7151,name:"Oracle数据库技术（初级）"},{courseImg:"/image/activity/gaoji.png",classId:7072,name:"Oracle数据库技术（高级）"}]},{title:"Android开发技术",main:[{courseImg:"/image/activity/single6.png",classId:6512,name:"Android移动开发技术"},{courseImg:"/image/activity/single7.png",classId:"",name:"Android移动开发技术（高级）"},{courseImg:"/image/activity/single8.png",classId:"",name:"Android客户端项目设计与开发实战"}]}],teachers:[{headImg:"/image/activity/liqi.png",name:"李祺",teacherId:1190,position:"系统构架师",des:"系统构架师,慧科集团教学总监,IT行业从业10余年,为中国人寿.HP等多家企业完成企业大型管理系统,具备丰富的企业极开发和项目管理经验,多年教学经验,总授课上完课时."},{headImg:"/image/activity/lixinghua.png",name:"李兴华",teacherId:7306,position:"系统构架师",des:"中国JAVA届领军人物,曾任中科软痛系统架构师,火车票网技术总监,伟仕嘉禾系统构架师,赛迪职业培训特约讲师,51CTO.com知名专家,并为39多家大中型企业提供企业技术内训."},{headImg:"/image/activity/wangpeng.png",name:"王鹏",teacherId:"",position:"产品研发运营",des:"产品研发负责人,高级Android开发工程师拥有丰富的开发与架构的经验,作为技术负责人解决诸多实际开发中的技术难题和瓶颈问题,所开发的应用得到了用户的一致好评."}]},{picture_desc:"/image/activity/datadesc.png",header:{imgUrl:"/image/activity/bigData.png",title:"大数据技术与应用专业",des:"",explain:"本专业根据当下企业对于大数据的应用需求，了解大数据领域的典型企业案例和商业模式，了解以大数据为核心的包括分布式文件系统、Hadoop、数据分析、数据挖掘等大数据相关领域的技术，学习Linux平台的安装与配置、Linux常用命令、Shell脚本编程、GCC编程等知识进行深入的学习，并掌握Spark大数据平台的架构和设计。",classHour:206,"class":6},courses:[{title:"大数据平台基础架构",main:[{courseImg:"/image/activity/bachuan.png",classId:6480,name:"大数据概论"},{courseImg:"/image/activity/linux.png",classId:7735,name:"Linux操作系统应用"},{courseImg:"/image/activity/spark.png",classId:6472,name:"Spark集群环境部署与应用实践"}]},{title:"大数据挖掘",main:[{courseImg:"/image/activity/data.png",classId:6498,name:"数理统计"},{courseImg:"/image/activity/lanuge.png",classId:"6496",name:"R语言编程技术"},{courseImg:"/image/activity/datamini.png",classId:"6468",name:"数据挖掘技术"}]}],teachers:[{headImg:"/image/activity/bachuan1.png",name:"巴川",teacherId:1026,position:"资深数据挖掘工程师",des:"资深数据挖掘工程师，曾在新东方担任数学教师、教研组长，中国搜索担任数据挖掘工程师，乐视网担任资深数据挖掘工程师至今。"},{headImg:"/image/activity/zhangran.png",name:"张然",teacherId:1095,position:"原安博教育集团教育总监",des:"安博教育集团教学经理、高级讲师 从事大数据分析和统计方向 在Android开发、JavaEE等方向有多年的授课经验"},{headImg:"/image/activity/menglishi.png",name:"孟立诗",teacherId:1078,position:"Spark工程师",des:"多年独立或带团队使用JAVA(SSH)，PHP等技术综合开发中小型商业软件项目，掌握并应用行业最新相关技术，对核心技术有深入的了解及使用经验。"},{headImg:"/image/activity/xiangyu.png",name:"向宇",teacherId:2618,position:"Linux系统高级研发工程师",des:"北京工业大学计算机硕士，就职于爱奇艺，任分布式系统工程师，Linux C语言高级工程师."}]},{picture_desc:"/image/activity/interdesc.png",header:{imgUrl:"/image/activity/internet.png",title:"互联网营销专业",des:"掌握互联网营销绝密武器，成为在互联网+时代的至尊",explain:"互联网营销专业共建课程体系设置由浅入深，让学生循序渐进的了解整个营销过程。课程采取逆向课程设计思路，以企业实际用人需求为出发点，注重互联网营销的实战案例解读以及实际操作，提升学生的动手能力。全方位的技能知识讲解，培养符合企业需求的复合型应用人才。",classHour:720,"class":9},courses:[{title:"SEO搜索引擎优化技术",main:[{courseImg:"/image/activity/singleCourseImg.png",classId:6502,name:"静态网页技术"},{courseImg:"/image/activity/seo.png",classId:6488,name:"SEO搜索引擎优化技术"},{courseImg:"/image/activity/yingxiao.png",classId:7153,name:"营销型网站的策划与实现"}]},{title:"SEM搜索引擎营销技术",main:[{courseImg:"/image/activity/search.png",classId:6494,name:"搜索引擎营销"},{courseImg:"/image/activity/datamini.png",classId:"6492",name:"百度凤巢沙盒系统营销实践"},{courseImg:"/image/activity/pac.png",classId:"6478",name:"百度凤巢沙盒系统实习"}]},{title:"新媒体营销技术",main:[{courseImg:"/image/activity/mobile.png",classId:6399,name:"移动互联网思维"},{courseImg:"/image/activity/wangluo.png",classId:"7049",name:"网络整合营销"},{courseImg:"/image/activity/qiye.png",classId:"7137",name:"企业级营销方案策划、分析与推广"}]}],teachers:[{headImg:"/image/activity/jiangxuping.png",name:"姜旭平",teacherId:788,position:"清华大学经济管理教授",des:"2002年至今任清华大学经济管理学员市场营销系教授,清华大学管理科学理论研究中心研究员,清华大学经管学院企业管理研究中心研究员."},{headImg:"/image/activity/liqi.png",name:"李祺",teacherId:1190,position:"系统构架师",des:"系统构架师,慧科集团教学总监,IT行业从业10余年,为中国人寿.HP等多家企业完成企业大型管理系统,具备丰富的企业极开发和项目管理经验,多年教学经验,总授课上完课时."},{headImg:"/image/activity/zuoxiao.png",name:"左肖",teacherId:728,position:"百度营销研究院资深讲师",des:'百度营销研究院资深讲师,参与百度和宝洁,Intel等品牌类广告主的联合研发项目.负责撰写百度认证初级课件"营销基础与搜索营销"部分.'},{headImg:"/image/activity/gaoyubo.png",name:"高玉波",teacherId:8573,position:"云图合创天使投资合伙人",des:"拥有18年企业营销实战经验,包括渠道分销,大项目直销,电子商务营销,互联网营销等"}]},{picture_desc:"/image/activity/phpdesc.png",header:{imgUrl:"/image/activity/php.png",title:"PHP开发专业",des:"",explain:"本专业从企业人才需求出发，全面介绍PHP+MySQL网站开发模式，掌握关系型数据的基本原理，掌握MySQL的应用方法，全面深入的学习PHP的相关语法以及动态网站开发的常用模式和方法，掌握PHP+MySQL的开发模式；掌握PHP企业开发框架ThinkPHP技术，掌握MVC架构下的网站开发方法，全面提升学生技能层次和开发经验，使学生真正具备从事动态网站开发的能力。并通过3门软件工程领域最核心最经典的基础课程设置，给学生打下牢固的软件开发基础。",classHour:248,"class":6},courses:[{title:"PHP动态网页开发技术",main:[{courseImg:"/image/activity/mysql.png",classId:6506,name:"MySQL数据库基础"},{courseImg:"/image/activity/php1.png",classId:6476,name:"PHP语言核心设计"},{courseImg:"/image/activity/php1.png",classId:6462,name:"ThinkPHP框架技术"}]},{title:"软件工程核心基础",main:[{courseImg:"/image/activity/structure.png",classId:6482,name:"数理结构"},{courseImg:"/image/activity/alg.png",classId:"6470",name:"编程算法"},{courseImg:"/image/activity/function.png",classId:"7699",name:"面向对象方法精粹"}]}],teachers:[{headImg:"/image/activity/king.png",name:"Mr.King",teacherId:846,position:"PHP高级开发工程师",des:"具有多年Web开发经验，曾经参与并策划多个大型项目，研究过大量开源的框架，擅长高性能网站架构与优化，熟练掌握模版引擎技术、快速建站、二次开发技术、NoSQL、Web前端开源框架、Node.js等技术。"},{headImg:"/image/activity/liushilong.png",name:"刘士龙",teacherId:1048,position:"计算机专业专职教师",des:"从事过北京合众人寿保险电子投保单项目、数字北戴河旅游网项目、爱就推门B2C电子商城升级项目、河北师范大学数字校园项目、石家庄水产局养殖病害汇报系统建设项目、河北全通吉林移动通讯录助手Android客户端项目等。"},{headImg:"/image/activity/gengyuang.png",name:"耿宇航",teacherId:999,position:"中科院计算所培训中心 讲师",des:"中科院计算所培训中心培训讲师；工信部人才交流中心常务技术顾问；神州泰岳股份有限公司项目顾问。在江苏联通、浙江富阳电信等多个事业单位担任项目经理。"},{headImg:"/image/activity/wuxiaojun.png",name:"吴晓军",teacherId:2620,position:"西安交通大学副教授",des:"西安交通大学工学博士，清华大学博士后，美国南加州大学访问教授。主持完成中国博士后科学基金项目。发表学术论文52篇，分别被SCI、EI、ISTP收录。主要研究领域包括普适计算与泛网络、服务科学与万维科学等。"}]}];s<1||s>4?window.location.href=t.urlUtils.resolveUrl(""):e.$scope.headerData=o[s-1],e.$scope.goStudy=function(e){e&&(window.location.href=t.urlUtils.resolveUrl("/#/courses/detail/"+e))},e.$scope.teacherDesc=function(e){e&&(window.location.href=t.urlUtils.resolveUrl("/#/teacherlist/"+e))}},e.inheritFromCtrl(e.portal.courses.activityCtrl),e.registerDependency("gxb.controllers.portal.courses.activityCtrl",[]),e.registerView("gxb.controllers.portal.courses.activityCtrl","business/activities/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.courses.announceDetailCtrl=function(e){var t=e.$state.params.announceId,s="jingcaishiting";e.$announceDetailSrv.loadAnnounceDetail(t).then(function(t){e.$scope.announceDetail=t.data||[],e.$scope.$announceDetailHtml=e.$sce.trustAsHtml(t.data.desc),e.$scope.$apply()}),e.$scope.coursesList=[],e.$classesSrv.loadCourses("","",s).then(function(t){e.$scope.coursesList=t.dataList||[],e.$scope.$apply()})},e.inheritFromCtrl(e.portal.courses.announceDetailCtrl),e.registerDependency("gxb.controllers.portal.courses.announceDetailCtrl",["gxb.services.classes.classesSrv","gxb.services.tenants.announceDetailSrv"]),e.registerView("gxb.controllers.portal.courses.announceDetailCtrl","business/announcedetail/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.courses.courseDetailCtrl=function(e){$(".navigation").hide();var s=gxb.settings.identifier.getTenantID();e.$scope.$courseDetailHTML="";var o=e.$state.params.classId;e.$userSrv.tenantTemplate().then(function(n){var a=n.data.body;a=JSON.parse(a);var i=t.encryptUtils.html.htmlDecode(a.coursedetail);e.$scope.$courseDetailHTML=e.$sce.trustAsHtml(i),e.$scope.$apply(),$(document.body).find("[isPart='true']").each(function(){var n=$(this),a=n.attr("part-data");if(a&&(a=t.encryptUtils.base64.decode(a)))try{var i=t.jsonUtils.toObject(a);i.dataMapperString=t.encryptUtils.base64.encode(t.jsonUtils.toString(i.dataMapper||{})),i.identityKey="webpart_"+t.generateID();var c="<<%= webPartId %> data-key='<%= identityKey %>' data-api='<%= apiUrl %>' data-mapper='<%= dataMapperString %>'  ></ <%= webPartId %>>";n.empty();var r=e.$scope.$new();r.parameter={tenantId:s,classId:o,url:e.$location.host()},n.append(e.$compile(t.stringUtils.format(c,i))(r)[0])}catch(l){}})})},e.inheritFromCtrl(e.portal.courses.courseDetailCtrl),e.registerDependency("gxb.controllers.portal.courses.courseDetailCtrl",["gxb.services.portal.homeSrv","gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.courses.courseDetailCtrl","business/details/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.courses.coursesCtrl=function(e){$(".navigation").hide();var s=gxb.settings.identifier.getTenantID();e.$scope.$courseHTML="",e.$userSrv.tenantTemplate().then(function(o){var n=o.data.body;n=JSON.parse(n);var a=t.encryptUtils.html.htmlDecode(n.coursesquare);e.$scope.$courseHTML=e.$sce.trustAsHtml(a),e.$scope.$apply(),$(document.body).find("[isPart='true']").each(function(){var o=$(this),n=o.attr("part-data");if(n&&(n=t.encryptUtils.base64.decode(n)))try{var a=t.jsonUtils.toObject(n);a.dataMapperString=t.encryptUtils.base64.encode(t.jsonUtils.toString(a.dataMapper||{})),a.identityKey="webpart_"+t.generateID();var i="<<%= webPartId %> data-key='<%= identityKey %>' data-api='<%= apiUrl %>' data-mapper='<%= dataMapperString %>'  ></ <%= webPartId %>>";o.empty();var c=e.$scope.$new();c.parameter={tenantId:s,url:e.$location.host()},o.append(e.$compile(t.stringUtils.format(i,a))(c)[0])}catch(r){}})})},e.inheritFromCtrl(e.portal.courses.coursesCtrl),e.registerDependency("gxb.controllers.portal.courses.coursesCtrl",["gxb.services.portal.homeSrv","gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.courses.coursesCtrl","business/courses/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.foocCtrl=function(e){e.$scope.foocData={news:[{newsId:1,day:"30",date:"2016.08",title:"2016年福建省精品在线开放课程拟立项建设课程公示",content:"根据《福建省教育厅关于推进高校在线开放课程建设与应用的通知》（闽教高[2016]5号）和《福建省教育厅办公室关于申报2016年省级精品在线开放课程的通知..."},{newsId:2,day:"22",date:"2016.09",title:"关于做好2016-2017学年第一学期高校在线开放课程互选学分互认工作...",content:" 为丰富高校教育教学资源，推进优质教育资源共享，促进教育公平，推动高校教学方式、方法和管理制度等的改革与创新，经研究，我盟决定在前期工作基础上..."},{newsId:3,day:"13",date:"2016.07",title:"关于公开征集推荐联盟成员高校使用的在线教育平台的公告",content:"根据《福建省教育厅关于推进高校在线开放课程建设与应用的意见》（闽教高[2016]5号）、《福建省教育厅办公室关于申报2016年省级精品在线开放课程的通知..."}],college:[{collegeId:1,tenant_id:"188",collegeIcon:"",collegeName:"厦门理工学院",collegeLogin:"",collegeShortName:"xiamen"},{collegeId:2,tenant_id:"317",collegeIcon:"",collegeName:"集美大学",collegeLogin:"",collegeShortName:"jimei"}],perfectCourse:[{courseId:1,courseIcon:"",courseName:"创业基础",courseFrom:"厦门理工学院",courseLink:"//xmut.gaoxiaobang.com/#/courses/detail/12254"},{courseId:2,courseIcon:"",courseName:"大学物理实验",courseFrom:"厦门理工学院",courseLink:"//xmut.gaoxiaobang.com/#/courses/detail/12186"},{courseId:3,courseIcon:"",courseName:"供应链管理",courseFrom:"厦门理工学院",courseLink:"//xmut.gaoxiaobang.com/#/courses/detail/12218"},{courseId:4,courseIcon:"",courseName:"环境工程微生物学",courseFrom:"厦门理工学院",courseLink:"//xmut.gaoxiaobang.com/#/courses/detail/12262"},{courseId:5,courseIcon:"",courseName:"机械三维CAD",courseFrom:"厦门理工学院",courseLink:"//xmut.gaoxiaobang.com/#/courses/detail/12253"},{courseId:6,courseIcon:"",courseName:"生产与运作管理",courseFrom:"厦门理工学院",courseLink:"//xmut.gaoxiaobang.com/#/courses/detail/12560"},{courseId:7,courseIcon:"",courseName:"数学模型",courseFrom:"厦门理工学院",courseLink:"//xmut.gaoxiaobang.com/#/courses/detail/12558"},{courseId:8,courseIcon:"",courseName:"物流成本",courseFrom:"厦门理工学院",courseLink:"//xmut.gaoxiaobang.com/#/courses/detail/12524"},{courseId:9,courseIcon:"",courseName:"现代控制理论",courseFrom:"厦门理工学院",courseLink:"//xmut.gaoxiaobang.com/#/courses/detail/12263"},{courseId:10,courseIcon:"",courseName:"修身养心之形体训练",courseFrom:"福州外语外贸学院",courseLink:"//fzfu.gaoxiaobang.com/#/courses/detail/11960"},{courseId:11,courseIcon:"",courseName:"跨国经营与管理",courseFrom:"厦门理工学院",courseLink:"//xmut.gaoxiaobang.com/#/courses/detail/12568"}],introduce:"在福建省教育厅的领导和支持下，由在闽高校和相关企事业单位共同发起成立福建省高校在线教育联盟（以下简称“联盟”）。联盟将整合校际优质教学资源，形成优质课程共享机制，丰富教与学模式，促进高等教育均衡化发展，提升地方高校人才培养水平和服务社会能力。",purpose:"本着共建共享原则，通过联盟机制，汇集成员优势，遴选优秀教师，促进优质在线资源共享，促进信息技术与教育教学深度融合，推进教育教学改革和创新教育，提高教育教学质量，为高校学生及社会学员提供课程学习的选择和服务。"},e.$scope.goNewsList=function(){window.location.href=t.urlUtils.resolveUrl("/#/news")},e.$scope.goNewsInfo=function(e){window.location.href=t.urlUtils.resolveUrl("/#/news/item/"+e)},e.$scope.current1=!0,e.$scope.current2=!1,e.$scope.current3=!1,e.$scope.current4=!1,e.$scope.pageToThis=function(t){clearInterval(o),"current1"==t&&(e.$scope.current1=!0,e.$scope.current2=!1,e.$scope.current3=!1,e.$scope.current4=!1),"current2"==t&&(e.$scope.current2=!0,e.$scope.current1=!1,e.$scope.current3=!1,e.$scope.current4=!1),"current3"==t&&(e.$scope.current3=!0,e.$scope.current2=!1,e.$scope.current1=!1,e.$scope.current4=!1),"current4"==t&&(e.$scope.current4=!0,e.$scope.current2=!1,e.$scope.current3=!1,e.$scope.current1=!1),e.$scope.$apply()};var s=0,o=setInterval(function(){4==s&&(s=0),0==s&&(e.$scope.current1=!0,e.$scope.current2=!1,e.$scope.current3=!1,e.$scope.current4=!1),1==s&&(e.$scope.current2=!0,e.$scope.current1=!1,e.$scope.current3=!1,e.$scope.current4=!1),2==s&&(e.$scope.current3=!0,e.$scope.current2=!1,e.$scope.current1=!1,e.$scope.current4=!1),3==s&&(e.$scope.current4=!0,e.$scope.current2=!1,e.$scope.current3=!1,e.$scope.current1=!1),s++,e.$scope.$apply()},4e3)},e.inheritFromCtrl(e.portal.foocCtrl),e.registerDependency("gxb.controllers.portal.foocCtrl",[]),e.registerView("gxb.controllers.portal.foocCtrl","business/foochome/fooc")}(gxb.controllers,gxb.utils),function(e,t){e.portal.foocItemCtrl=function(e){$(".content_body_bottom_height").css("backgroundColor","#fff");console.log(e.$stateParams.newsId),e.$scope.newsId=e.$stateParams.newsId,e.$scope.goNewsList=function(){window.location.href=t.urlUtils.resolveUrl("/#/news")},e.$scope.goIndex=function(){window.location.href=t.urlUtils.resolveUrl()}},e.inheritFromCtrl(e.portal.foocItemCtrl),e.registerDependency("gxb.controllers.portal.foocItemCtrl",[]),e.registerView("gxb.controllers.portal.foocItemCtrl","business/foochome/item")}(gxb.controllers,gxb.utils),function(e,t){e.portal.foocListCtrl=function(e){$(".content_body_bottom_height").css("backgroundColor","#fff");e.$scope.goNewsInfo=function(e){window.location.href=t.urlUtils.resolveUrl("/#/news/item/"+e)},e.$scope.goIndex=function(){window.location.href=t.urlUtils.resolveUrl()}},e.inheritFromCtrl(e.portal.foocListCtrl),e.registerDependency("gxb.controllers.portal.foocListCtrl",[]),e.registerView("gxb.controllers.portal.foocListCtrl","business/foochome/list")}(gxb.controllers,gxb.utils),function(e,t){e.portal.courses.helper_homeCtrl=function(e){function t(s){e.$helperSrv.getByTenantId(s).then(function(o){o.data&&o.data.length>0?e.$scope.data=o.data||[]:(e.$scope.judgment=!0,1==c&&(s="1",t(s),c=!1)),e.$scope.$apply()})}e.$scope.gxbHelpCenter=e.$location.$$path;var s=1,o=5,n="";e.$scope.helpshow=!1,e.$scope.twoshow=!1,e.$scope.numshow=!1,e.$scope.bodyshow=!1,e.$scope.homeShow=!0,e.$scope.showNormal=!0,e.$scope.navigationName="",e.$scope.helpCenterId="",e.$scope.searchOne=0,e.$scope.keywords="";var a="";e.$scope.tab=0,e.$scope.helps=0,e.$scope.menuStatesContent="",e.$scope.menuStatesContent2="",e.$scope.showNav=!0,e.$scope.curPage=1,e.$scope.pageSize=5,e.$scope.menuStates=function(t){t==e.$scope.tab?(e.$scope.tab=0,console.log(e.$scope.tab)):e.$scope.tab=t};var i="";"/helper/gxb"==e.$scope.gxbHelpCenter&&(i="1"),t(i);var c=!0;e.$scope.judgment=!1;var r=function(t,s,o,n,a,c){1==e.$scope.searchOne?(e.$scope.numshow=!0,e.$scope.twoshow=!0,e.$scope.showNormal=!1):(e.$scope.numshow=!1,e.$scope.twoshow=!1,e.$scope.showNormal=!1,$(".valclass").val(""),a="",c=""),1==e.$scope.judgment&&(i="1"),e.$helperSrv.getBodyByTenantId(i,t,s,o,a,c).then(function(t){if(e.$scope.keywords=a,e.$scope.bodyList=t.data.dataList||[],0==e.$scope.bodyList.length?(e.$scope.helpshow=!0,e.$scope.showNormal=!1,e.$scope.navigationName=n):(e.$scope.helpshow=!1,e.$scope.bodyshow=!0,e.$scope.showNormal=!1),e.$scope.ngPaginationConfig.pageCount=t.data.paging.totalPage,e.$scope.curPage=t.data.paging.curPage,e.$scope.pageSize=t.data.paging.pageSize,e.$scope.ngPaginationConfig.visiblePageCount=t.data.paging.totalPage>5?5:t.data.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})};e.$scope.deliveryContent=function(t,s){e.$scope.menuStatesContent=t,e.$scope.menuStatesContent2=s};var l={datalist:[{question:"第一次来到高校邦学习，如何开始学习？?",answer:"如果是第一次来到高校邦平台学习，请先点击注册，用手机号或邮箱注册成功后，登录高校邦平台，然后输入自己的学号学校等信息进行认证，认证成功即可。"},{question:"认证不成功怎么办？",answer:"a. 提示“尚未导入信息”：如果已经选过课程，但学校老师还没有正式通知开课时间，请耐心等待老师通知。如果没有选课，建议先去选课哦~</br>b. 提示“认证失败”：如果认证失败，您可以先取消认证，登录后在“我的”-“资料设置”-“认证信息”中查看认证状态并继续认证。如果是在老师没有通知开课的时候选课，建议同学耐心等待老师通知开课时间，因为只有认证通过的学生才能学习本校认证课并获得学分哦~</br>c. 提示“已被认证”：使用学号和密码登录即可学习，如果还是登录不了，可以找平台老师帮忙重置密码哦~"},{question:"我能自己选课退课吗？",answer:"每个学校的规定是不一样的，有的学校会开放部分课程让学生自由选课退课，有的学校直接规定了学生必须学完哪几门课程并且不可退选。</br>具体情况如有需要，可以联系下本校的教务老师进行咨询，因为学校教务系统选课问题是学校老师自己决定的呢。"},{question:"忘记密码怎么办？",answer:"a. 如果忘记密码无法登录，在登录界面点击忘记密码，填写手机号，获取验证码，一步步就可以重置密码了！</br>b. 如果已经成功登录了，想要修改密码：手机App端：进入“我的”，点击顶部头像栏，点击修改密码，输入该学号的密码，修改新密码哦。PC电脑端：点击右上角头像栏，再点击左侧导航栏的“个人设置”，点击“修改密码”，即可修改新密码。"},{question:"怎么看这门课是不是完成了所有学习？",answer:"课程章节列表上的绿圈即表示每个章节的学习进度，章节完成绿圈会满，半绿或者空圈都不算完成本章节的学习。可以检查一下章节的绿圈。</br>在学习过程中，课程详情页有成绩分析一栏，能每天查阅自己的完成情况。</br>此外，还需要注意一点，如果哪个课程还含有考试，记得及时完成学习并参加考试哦~找课程是不是有考试很简单，有两个地方都会有展示，一个是章节列表底部会有考试一栏，一个是课程列表处课程名字前面有个“考试”的小图标。"},{question:"怎么查看成绩？",answer:"结课后才会显示成绩，学习进行中是不会显示成绩的，结课后可以进入我的学习-我的课程-找到相应的课程，就会显示分数了，何时公布成绩要看学校安排哦！认真学习分数肯定低不了！如果课程含有考试并且考试里有主观题的话，需要老师给你评阅打分完毕，你才能收到最终成绩哦！"}]};e.$scope.normalQuestionAll=l.datalist,e.$scope.normalQuestion="",e.$scope.normalFun=function(t){e.$scope.homeShow=!1,e.$scope.twoshow=!1,e.$scope.bodyshow=!1,e.$scope.showNormal=!0,e.$scope.normalQuestion=l.datalist[t].question,e.$scope.normalAnswer=l.datalist[t].answer},e.$scope.helperClick=function(){e.$scope.helpshow=!1,e.$scope.twoshow=!1,e.$scope.numshow=!1,e.$scope.bodyshow=!1,e.$scope.homeShow=!0,e.$scope.showNormal=!0,e.$scope.showNav=!0},e.$scope.helpList=function(t,i,c,l,g){l.stopPropagation(),e.$scope.helps=t,e.$scope.tab=g,e.$scope.homeShow=!1,e.$scope.twoshow=!1,e.$scope.showNormal=!1,e.$scope.helpCenterId=t,e.$scope.navigationName=i,e.$scope.ngPaginationConfig.pagenums=[],p(),e.$scope.searchOne=0,s=1,r(s,o,e.$scope.helpCenterId,e.$scope.navigationName,n,a)},e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var p=function(){e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",s=e.$scope.$new();$("#pagination").empty(),$("#pagination").append(e.$compile(t)(s)[0])};p(),e.$scope.onPageChange=function(){s=this.currentPage,a="result",r(s,o,e.$scope.helpCenterId||0,e.$scope.navigationName,n,a)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.search()},e.$scope.search=function(){var t=$(".valclass").val();null==t||""==t?alert("搜索内容不能为空"):(n=t,e.$scope.navigationName=t,a="",e.$scope.helpCenterId=0,1==e.$scope.judgment&&(i="1"),e.$helperSrv.getBodyByTenantId(i,s,9999,e.$scope.helpCenterId,n,a).then(function(t){if((t.data.dataList||[]).length>0){e.$scope.helpshow=!1,e.$scope.twoshow=!1,e.$scope.showNormal=!1,e.$scope.numshow=!0,e.$scope.bodyshow=!0,e.$scope.searchList=t.data.dataList,e.$scope.helptotal=0,e.$scope.homeShow=!1;for(var a=0;a<e.$scope.searchList.length;a++)e.$scope.helptotal+=e.$scope.searchList[a].num;e.$scope.ngPaginationConfig.pagenums=[],p(),e.$scope.searchOne=1,s=1,r(s,o,e.$scope.helpCenterId,e.$scope.navigationName,n,"result")}else e.$scope.helpshow=!0,e.$scope.twoshow=!0,e.$scope.numshow=!1,e.$scope.showNormal=!1,e.$scope.bodyshow=!1,e.$scope.homeShow=!1;e.$scope.$apply()}))},e.$scope.searchRes=function(t){e.$scope.helpCenterId=t,e.$scope.ngPaginationConfig.pagenums=[],p(),e.$scope.searchOne=1,a="result",s=1,r(s,o,e.$scope.helpCenterId,e.$scope.navigationName,n,a)},e.$scope.photoWidth=function(){setTimeout(function(){var e=$(".helperDiv_right_2_3 > p > img").width();parseInt(e)>835&&$(".helperDiv_right_2_3 img").width("835px")},1500)},e.$scope.isToday="482"==gxb.settings.identifier.getTenantID()},e.inheritFromCtrl(e.portal.courses.helper_homeCtrl),e.registerDependency("gxb.controllers.portal.courses.helper_homeCtrl",["gxb.services.tenants.helperSrv"]),e.registerView("gxb.controllers.portal.courses.helper_homeCtrl","business/helper/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.homeCtrl=function(e){$(".navigation").hide();var s=gxb.settings.identifier.getTenantID();e.$scope.$generatedHTML="",e.$userSrv.tenantTemplate().then(function(o){var n=o.data.body;n=JSON.parse(n);var a=t.encryptUtils.html.htmlDecode(n.home);e.$scope.$generatedHTML=e.$sce.trustAsHtml(a),e.$scope.$apply(),$(document.body).find("[isPart='true']").each(function(){var o=$(this),n=o.attr("part-data");if(n&&(n=t.encryptUtils.base64.decode(n)))try{var a=t.jsonUtils.toObject(n);a.dataMapperString=t.encryptUtils.base64.encode(t.jsonUtils.toString(a.dataMapper||{})),a.identityKey="webpart_"+t.generateID();var i="<<%= webPartId %> data-key='<%= identityKey %>' data-api='<%= apiUrl %>' data-mapper='<%= dataMapperString %>'  ></ <%= webPartId %>>";o.empty();var c=e.$scope.$new();c.parameter={tenantId:s},o.append(e.$compile(t.stringUtils.format(i,a))(c)[0])}catch(r){}})})},e.inheritFromCtrl(e.portal.homeCtrl),e.registerDependency("gxb.controllers.portal.homeCtrl",["gxb.services.portal.homeSrv","gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.homeCtrl","business/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.courses.mgrentryCtrl=function(e){e.$scope.show_noAllow_0=!1,e.$scope.show_noAllow_1=!1,e.$scope.show_noAllow_2=!1,e.$scope.show_noAllow_3=!1,gxb.settings.identifier.hasAministrationRole()||gxb.settings.identifier.goPage401(),e.$scope.toLink=function(s){switch(s){case 0:gxb.settings.identifier.hasTenantAdminRole()?window.location.href=t.urlUtils.resolveUrl("/admin"):gxb.settings.identifier.hasXSRole()?window.location.href=t.urlUtils.resolveUrl("/admin/#/pagemain"):(gxb.settings.identifier.hasPlatformAdminRole()||gxb.settings.identifier.hasAnyYYRole())&&(window.location.href=t.urlUtils.resolveUrl("/console"));break;case 1:gxb.settings.identifier.hasJKRole()?window.location.href=gxb.settings.identifier.goLMS()+"/course":gxb.settings.identifier.hasKBRole()&&(window.location.href=gxb.settings.identifier.goLMS()+"/class");break;case 2:gxb.settings.identifier.hasDXRole()||gxb.settings.identifier.hasAnyYYRole()?window.location.href=gxb.settings.identifier.goLMS()+"/teaching":e.$scope.show_noAllow_2=!0;break;case 3:gxb.settings.identifier.hasDXRole()?window.location.href=gxb.settings.identifier.goBI()+"/#/teacher/student":gxb.settings.identifier.hasSchoolBIRole()?window.location.href=gxb.settings.identifier.goBI()+"/#/school/schoolview":(gxb.settings.identifier.hasBIRole()||gxb.settings.identifier.hasSuperAdminRole())&&(window.location.href=gxb.settings.identifier.goBI()+"/#/operation/tenant")}},e.$scope.init_toLink=function(){gxb.settings.identifier.hasTenantAdminRole()?e.$scope.show_noAllow_0=!1:gxb.settings.identifier.hasXSRole()?e.$scope.show_noAllow_0=!1:gxb.settings.identifier.hasPlatformAdminRole()||gxb.settings.identifier.hasAnyYYRole()?e.$scope.show_noAllow_0=!1:e.$scope.show_noAllow_0=!0,gxb.settings.identifier.hasJKRole()?e.$scope.show_noAllow_1=!1:gxb.settings.identifier.hasKBRole()?e.$scope.show_noAllow_1=!1:e.$scope.show_noAllow_1=!0,gxb.settings.identifier.hasDXRole()||gxb.settings.identifier.hasAnyYYRole()?e.$scope.show_noAllow_2=!1:e.$scope.show_noAllow_2=!0,gxb.settings.identifier.hasDXRole()?e.$scope.show_noAllow_3=!1:gxb.settings.identifier.hasSchoolBIRole()?e.$scope.show_noAllow_3=!1:gxb.settings.identifier.hasBIRole()||gxb.settings.identifier.hasSuperAdminRole()?e.$scope.show_noAllow_3=!1:e.$scope.show_noAllow_3=!0},e.$scope.init_toLink()},e.inheritFromCtrl(e.portal.courses.mgrentryCtrl),e.registerDependency("gxb.controllers.portal.courses.entryCtrl",[]),e.registerView("gxb.controllers.portal.courses.mgrentryCtrl","business/mgrentry/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.courses.newsDetailCtrl=function(e){var t=e.$state.params.newsId,s="jingcaishiting";e.$newsDetailSrv.loadNewsDetail(t).then(function(t){e.$scope.newsDetail=t.data||[],e.$scope.$newsDetailHtml=e.$sce.trustAsHtml(t.data.body),e.$scope.$apply()}),e.$scope.coursesList=[],e.$classesSrv.loadCourses("","",s).then(function(t){e.$scope.coursesList=t.dataList||[],e.$scope.$apply()})},e.inheritFromCtrl(e.portal.courses.newsDetailCtrl),e.registerDependency("gxb.controllers.portal.courses.newsDetailCtrl",["gxb.services.classes.classesSrv","gxb.services.tenants.newsDetailSrv"]),e.registerView("gxb.controllers.portal.courses.newsDetailCtrl","business/newsdetail/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.courses.newsListCtrl=function(e){var t=1;e.$scope.totalItems=0,e.$scope.newsList=null;var s=function(t){e.$newsSrv.loadNewses(t,8).then(function(t){if(e.$scope.newsList=t.dataList||[],e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.totalItems=t.paging.total,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>5?5:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})};e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var o="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",n=e.$scope.$new();$("#pagination").append(e.$compile(o)(n)[0]),e.$scope.onPageChange=function(){s(this.currentPage)},s(t),e.$scope.coursesList=[];var a="jingcaishiting";e.$classesSrv.loadCourses("","",a).then(function(t){e.$scope.coursesList=t.dataList||[],e.$scope.$apply()})},e.inheritFromCtrl(e.portal.courses.newsListCtrl),e.registerDependency("gxb.controllers.portal.courses.newsListCtrl",["gxb.services.classes.classesSrv","gxb.services.tenants.newsSrv"]),e.registerView("gxb.controllers.portal.courses.newsListCtrl","business/newslist/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.courses.noticeListCtrl=function(e){var t=1;e.$scope.totalItems=0,e.$scope.noticeArray=null;var s=function(t){e.$noticeSrv.loadNotice(t,5).then(function(t){if(e.$scope.noticeArray=t.dataList||[],e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.totalItems=t.paging.total,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>5?5:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})};e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var o="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",n=e.$scope.$new();$("#pagination").append(e.$compile(o)(n)[0]),e.$scope.onPageChange=function(){s(this.currentPage)},s(t),e.$scope.coursesList=[];var a="jingcaishiting";e.$classesSrv.loadCourses("","",a).then(function(t){e.$scope.coursesList=t.dataList||[],e.$scope.$apply()})},e.inheritFromCtrl(e.portal.courses.noticeListCtrl),e.registerDependency("gxb.controllers.portal.courses.noticeListCtrl",["gxb.services.classes.classesSrv","gxb.services.tenants.noticeSrv"]),e.registerView("gxb.controllers.portal.courses.noticeListCtrl","business/noticelist/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.iProfileCtrl=function(e){},e.inheritFromCtrl(e.portal.profiles.iProfileCtrl),e.registerDependency("gxb.controllers.portal.profiles.iProfileCtrl",[]),e.registerView("gxb.controllers.portal.profiles.iProfileCtrl","business/profile/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.szhvlCtrl=function(e){var s={collegeName:"苏州工业职业技术学院",collegeShortName:"siit"},o={collegeName:"苏州工业园区工业技术学校",collegeShortName:"sipits"};e.$scope.goTenantHome=function(e){gxb.settings.identifier.goTenantHome(e)},e.$scope.foocData={news:[{newsId:1,day:"30",date:"2016.08",title:"2016年福建省精品在线开放课程拟立项建设课程公示",content:"根据《福建省教育厅关于推进高校在线开放课程建设与应用的通知》（闽教高[2016]5号）和《福建省教育厅办公室关于申报2016年省级精品在线开放课程的通知..."},{newsId:2,day:"22",date:"2016.09",title:"关于做好2016-2017学年第一学期高校在线开放课程互选学分互认工作...",content:" 为丰富高校教育教学资源，推进优质教育资源共享，促进教育公平，推动高校教学方式、方法和管理制度等的改革与创新，经研究，我盟决定在前期工作基础上..."},{newsId:3,day:"13",date:"2016.07",title:"关于公开征集推荐联盟成员高校使用的在线教育平台的公告",content:"根据《福建省教育厅关于推进高校在线开放课程建设与应用的意见》（闽教高[2016]5号）、《福建省教育厅办公室关于申报2016年省级精品在线开放课程的通知..."}],gkgx:[o,s],colleges:[[{collegeName:"苏州工艺美术职业技术学院",collegeShortName:"sgmart"},{collegeName:"苏州农业职业技术学院",collegeShortName:"szai"},{collegeName:"沙洲职业工学院",collegeShortName:"szit"},{collegeName:"苏州工业园区服务外包职业学院",collegeShortName:"siso"},{collegeName:"苏州健雄职业技术学院",collegeShortName:"wjxvtc"},{collegeName:"苏州经贸职业技术学院",collegeShortName:"szjm"},{collegeName:"苏州市职业大学",collegeShortName:"jssvc"},{collegeName:"苏州卫生职业技术学院",collegeShortName:"szmtc"},{collegeName:"常熟职业教育中心校",collegeShortName:"cszjzx"},{collegeName:"苏州大学应用技术学院",collegeShortName:"tecsuda"}],[{collegeName:"硅湖职业技术学院",collegeShortName:"usl"},{collegeName:"昆山登云科技职业学院",collegeShortName:"dyc"},{collegeName:"苏州港大思培科技职业学院",collegeShortName:"jseea"},{collegeName:"苏州高博软件技术职业学院",collegeShortName:"gist"},{collegeName:"苏州建设交通高等职业技术学校",collegeShortName:"szjsjt"},{collegeName:"苏州旅游与财经高等职业技术学院",collegeShortName:"lyycj"},{collegeName:"苏州托普信息职业技术学院",collegeShortName:"szetop"
},{collegeName:"苏州信息职业技术学院",collegeShortName:"szitu"},{collegeName:"苏州幼儿师范高等专科学校",collegeShortName:"szys"},{collegeName:"苏州工业园区职业技术学院",collegeShortName:"ivt"}],[{collegeName:"苏州高等职业技术学院",collegeShortName:"szhvs"},{collegeName:"江苏省张家港中等专业学院",collegeShortName:"zigzjzx"}]],perfectCourse:[{courseId:1,courseIcon:"https://gxbfile-gs.gaoxiaobang.com/uploads/course_image/link/41f5e0b3df9942e4aae42ecb7caaef4d.png",courseName:"创业启蒙与案例分享",courseFrom:"慧科通识课",courseLink:"//tsk.gaoxiaobang.com/#/courses/detail/14636"},{courseId:2,courseIcon:"https://gxbfile-gs.gaoxiaobang.com/uploads/course_image/link/ddf8120c452c408788b6b626ec8a2b5f.png",courseName:"创业基本功与精益创业方法论",courseFrom:"慧科通识课",courseLink:"//tsk.gaoxiaobang.com/#/courses/detail/4209"},{courseId:3,courseIcon:"https://gxbfile-gs.gaoxiaobang.com/uploads/course_image/link/a3dc93fae79d49438f0b0df4a8dc0976.jpg",courseName:"打造无敌商业计划书",courseFrom:"慧科通识课",courseLink:"//tsk.gaoxiaobang.com/#/courses/detail/4695"},{courseId:4,courseIcon:"https://gxbfile-gs.gaoxiaobang.com/uploads/course_image/link/aac78fbad4e4493ba1e6dee2c2b729f3.png",courseName:"创新思维开发与落地",courseFrom:"慧科通识课",courseLink:"//tsk.gaoxiaobang.com/#/courses/detail/4767"},{courseId:5,courseIcon:"https://gxbfile-gs.gaoxiaobang.com/uploads/course_image/link/345409/2_____.png",courseName:"计算思维",courseFrom:"慧科通识课",courseLink:"//tsk.gaoxiaobang.com/#/courses/detail/15549"},{courseId:6,courseIcon:"https://gxbfile-gs.gaoxiaobang.com/uploads/course_image/link/ef557d6401be4652b411e1aaba8c0578.png",courseName:"互联网营销全攻略",courseFrom:"慧科通识课",courseLink:"//tsk.gaoxiaobang.com/#/courses/detail/12626"},{courseId:7,courseIcon:"https://gxbfile-gs.gaoxiaobang.com/uploads/course_image/link/b86ba338326240aebc867064eb925444.jpg",courseName:"大学生就业综合技能提升",courseFrom:"慧科通识课",courseLink:"//tsk.gaoxiaobang.com/#/courses/detail/7147"},{courseId:8,courseIcon:"https://gxbfile-gs.gaoxiaobang.com/uploads/course_image/link/473634/123.jpg",courseName:"职业素养",courseFrom:"慧科通识课",courseLink:"//tsk.gaoxiaobang.com/#/courses/detail/4191"},{courseId:9,courseIcon:"https://gxbfile-gs.gaoxiaobang.com/uploads/course_image/link/472327/123.png",courseName:"商务礼仪",courseFrom:"慧科通识课",courseLink:"//tsk.gaoxiaobang.com/#/courses/detail/4206"},{courseId:10,courseIcon:"https://gxbfile-gs.gaoxiaobang.com/uploads/course_image/link/473642/123.png",courseName:"自我发展与创业指导",courseFrom:"慧科通识课",courseLink:"//tsk.gaoxiaobang.com/#/courses/detail/4218"}],introduce:"苏州高职高专数字化资源共享联盟是在教育主管部门的指导下，自愿结成的非营利性、非法人、开放性的高校联盟。联盟为推动我国高校从传统教学 方式向现代化教学方式的转变，而建设优质视频网络课程，建立基于网络视频的混合教学模式，形成优质课程市场化共享机制，从而实现优质教学资源广泛共享，弥补优质课程与师资力量不足。",purpose:"联盟开展各类优质视频网络课程建设；建设互联互通的视频网络课程平台；实现优质视频网络课程教学资源共享；实现优质视频网络课程学分认可；为社会公众免费提供科学、文化素质教育网络视频课程。"},e.$scope.goNewsList=function(){window.location.href=t.urlUtils.resolveUrl("/#/news")},e.$scope.goNewsInfo=function(e){window.location.href=t.urlUtils.resolveUrl("/#/news/item/"+e)},e.$scope.current1=!0,e.$scope.current2=!1,e.$scope.current3=!1,e.$scope.pageToThis=function(t){"current1"==t&&(e.$scope.current1=!0,e.$scope.current2=!1,e.$scope.current3=!1),"current2"==t&&(e.$scope.current2=!0,e.$scope.current1=!1,e.$scope.current3=!1),"current3"==t&&(e.$scope.current3=!0,e.$scope.current2=!1,e.$scope.current1=!1),n=parseInt(t.replace("current",""))};var n=0;setInterval(function(){n>=3&&(n=0),0==n&&(e.$scope.current1=!0,e.$scope.current2=!1,e.$scope.current3=!1),1==n&&(e.$scope.current2=!0,e.$scope.current1=!1,e.$scope.current3=!1),2==n&&(e.$scope.current3=!0,e.$scope.current2=!1,e.$scope.current1=!1),n++,e.$scope.$apply()},4e3)},e.inheritFromCtrl(e.portal.szhvlCtrl),e.registerDependency("gxb.controllers.portal.szhvlCtrl",[]),e.registerView("gxb.controllers.portal.szhvlCtrl","business/szhvl/szhvl")}(gxb.controllers,gxb.utils),function(e,t){e.portal.courses.teacherDetailCtrl=function(e){var t=1;e.$scope.totalItems=0;var s=e.$state.params.instructorId;e.$scope.coursesList=[];var o="jingcaishiting";e.$classesSrv.loadCourses(t,3,o).then(function(t){e.$scope.coursesList=t.dataList||[],e.$scope.$apply()}),e.$classesSrv.instructor(s).then(function(t){e.$scope.instructor=t.data||[],e.$scope.$apply()});var n=function(t){e.$classesSrv.teacherCourseList(t,2,s).then(function(t){if(e.$scope.total=t.paging.total||[],e.$scope.teacherCourseList=t.dataList||[],e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.totalItems=t.paging.total,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>5?5:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})};e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var a="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",i=e.$scope.$new();$("#pagination").append(e.$compile(a)(i)[0]),e.$scope.onPageChange=function(){n(this.currentPage)},n(t)},e.inheritFromCtrl(e.portal.courses.teacherDetailCtrl),e.registerDependency("gxb.controllers.portal.courses.teacherDetailCtrl",["gxb.services.classes.classesSrv"]),e.registerView("gxb.controllers.portal.courses.teacherDetailCtrl","business/teacherdetail/index")}(gxb.controllers,gxb.utils),function(e,t){e.portal.teacherCtrl=function(e){function t(){return $(".silderBtn")}function s(){return $(".teacher_slider_goBox")}e.$scope.gotoLogin=function(){window.location.href=window.location.origin.replace("teacher","teacher.class")+"/teaching"};var o=0,n=0,a=null;t().eq(0).addClass("hover"),$(".teacher_slider_goBox").css("width","3000px"),e.$scope.animate_index=function(t,s){e.$scope.setInterval_ani(t,s)},$(".silderBtn").click(function(){clearInterval(a)});var a=setInterval(function(){o++,n++,o>7?(o=0,n=0,s().css({marginLeft:"0px"})):n>6&&(n=0),e.$scope.setInterval_ani(o,n)},2600);e.$scope.setInterval_ani=function(e,s){$(".teacher_slider_goBox").animate({marginLeft:e*-242+"px"},1700,"ease-in-out"),t().removeClass("hover"),t().eq(s).addClass("hover")},e.$scope.setInterval_ani(0,0)},e.inheritFromCtrl(e.portal.teacherCtrl),e.registerDependency("gxb.controllers.portal.teacherCtrl",[]),e.registerView("gxb.controllers.portal.teacherCtrl","business/teacherhome/teacher")}(gxb.controllers,gxb.utils),function(e,t){e.portal.courses.teacherListCtrl=function(e){var t=1;e.$scope.totalItems=0,e.$scope.teacherList=null;var s=function(t){e.$teacherSrv.loadTeachers(t,5).then(function(t){if(e.$scope.teacherList=t.dataList||[],e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.totalItems=t.paging.total,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>5?5:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})};e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var o="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",n=e.$scope.$new();$("#pagination").append(e.$compile(o)(n)[0]),e.$scope.onPageChange=function(){s(this.currentPage)},s(t),e.$scope.coursesList=[];var a="jingcaishiting";e.$classesSrv.loadCourses("","",a).then(function(t){e.$scope.coursesList=t.dataList||[],e.$scope.$apply()})},e.inheritFromCtrl(e.portal.courses.teacherListCtrl),e.registerDependency("gxb.controllers.portal.courses.teacherListCtrl",["gxb.services.classes.teacherSrv","gxb.services.classes.classesSrv"]),e.registerView("gxb.controllers.portal.courses.teacherListCtrl","business/teacherlist/index")}(gxb.controllers,gxb.utils),function(e,s){e.portal.profiles.userAnalysisClassCtrl=function(e){var s=e.$state.params.classId;e.$scope.classIds=s,$("body").find(".setting ul li").eq(0).addClass("current").siblings().removeClass("current"),e.$userSrv.usersave().then(function(t){e.$scope.userinfo=t.data||[],e.$scope.$apply()}),e.$userSrv.studentprocess(s).then(function(t){e.$scope.process=t.data||[],e.$scope.$apply()}),e.$userSrv.studentranking(s).then(function(t){e.$scope.ranklist=t.data||[],e.$scope.str_time=function(e){var t=e.substr(0,e.lastIndexOf(":"));return e.substr(0,e.indexOf(":"))+"小时"+t.substr(t.indexOf(":")+1)+"分"},e.$scope.$apply()});var o="Video";e.$scope.show_noDate_tab=!1,e.$scope.chapter_learn=function(t){e.$scope.tabinfo="Video"==t?"视频":"Quiz"==t?"测验":"Assignment"==t?"作业":"Topic"==t?"讨论":"",e.$userSrv.stu_chapter_learn_status(s,t).then(function(t){""!=t.data&&t?(e.$scope.learnlist=t.data,e.$scope._w_table_rowspan("#table1",1),e.$scope.show_noDate_tab=!1):e.$scope.show_noDate_tab=!0,e.$scope.$apply()})},e.$scope.show_noDate_tab2=!1,e.$scope.chapter_discuss=function(){e.$userSrv.userCenter_learn_discuss(s).then(function(t){""!=t.data&&t?(e.$scope.learnlist_discuss=t.data,e.$scope._w_table_rowspan("#table2",1),e.$scope.show_noDate_tab2=!1):e.$scope.show_noDate_tab2=!0,e.$scope.$apply()})},e.$scope.show_noDate_tab3=!1,e.$scope.chapter_note=function(){e.$userSrv.userCenter_learn_note(s).then(function(t){""!=t.data&&t?(e.$scope.learnlist_note=t.data,e.$scope._w_table_rowspan("#table3",1),e.$scope.show_noDate_tab3=!1):e.$scope.show_noDate_tab3=!0,e.$scope.$apply()})},e.$scope.show_noDate_tab4=!1,e.$scope.chapter_test=function(){e.$userSrv.userCenter_learn_test(s).then(function(t){""!=t.data&&t?(e.$scope.learnlist_test=t.data,e.$scope._w_table_rowspan("#table4",1),e.$scope.show_noDate_tab4=!1):e.$scope.show_noDate_tab4=!0,e.$scope.$apply()})},e.$scope.show_noDate_tab5=!1,e.$scope.chapter_assignment=function(){e.$userSrv.userCenter_learn_assignment(s).then(function(t){""!=t.data&&t?(e.$scope.learnlist_assignment=t.data,e.$scope._w_table_rowspan("#table5",1),e.$scope.show_noDate_tab5=!1):e.$scope.show_noDate_tab5=!0,e.$scope.$apply()})},e.$scope.chapter_count=function(){e.$userSrv.userCenter_learn_count(s).then(function(t){e.$scope.learn_quiz=t.data.quiz||0,e.$scope.learn_note=t.data.note||0,e.$scope.learn_assignment=t.data.assignment||0,e.$scope.learn_topic=t.data.topic||0,e.$scope.learn_video=t.data.video||0,e.$scope.$apply()})},e.$scope.chapter_count(),e.$scope.chapter_learn(o),e.$scope.add_class=function(){var e=setInterval(function(){$(".interesting_course").size()&&($(".interesting_course").addClass("interesting_course_pos").removeClass("interesting_course_pos1"),$(".interesting_course").css({height:"111657px","border-right":"1px solid #D9D2D2",width:"240px"}),$(".setting,.content_body_bottom_height,.setting_main,.myhomeStudyRight").css({height:"auto"}),$(".setting").css({height:"507px"}),$(".setting_main").css({"min-height":"1200px"}),clearInterval(e))},10)},e.$scope.add_class();var n=function(){return $(".table_1")},a=null,i=function(){return null===a&&(a=n().offset().top),a};$(document,document.body).scroll(function(){var e=document.body.scrollTop||document.documentElement.scrollTop;e>=i()?n().addClass("table_fixed"):n().removeClass("table_fixed")}),e.$scope._w_table_rowspan=function(e,s){t=setInterval(function(){_w_table_firsttd="",_w_table_currenttd="",_w_table_SpanNum=0,_w_table_Obj=$(e+" tr td:nth-child("+s+")"),_w_table_Obj.each(function(e){0==e?(_w_table_firsttd=$(this),_w_table_SpanNum=1,clearInterval(t)):(_w_table_currenttd=$(this),_w_table_firsttd.text()==_w_table_currenttd.text()?(_w_table_SpanNum++,_w_table_currenttd.hide(),_w_table_firsttd.attr("rowSpan",_w_table_SpanNum)):(_w_table_firsttd=$(this),_w_table_SpanNum=1),clearInterval(t))})},10)},e.$scope._w_table_rowspan("#table1",1),e.$scope.newDate_dueAt=function(e){var t=parseInt((new Date).getTime());return t-parseInt(e)},e.$scope.tohide=!0,e.$scope.toShow=function(){e.$scope.tohide=!1;var t=setInterval(function(){$(".tbody_b_td_div3").size()&&($(".tbody_b_td_div3").css({height:"auto","min-height":"43px","-webkit-line-clamp":"inherit"}),clearInterval(t))},10)},e.$scope.toHide=function(){e.$scope.tohide=!0;var t=setInterval(function(){$(".tbody_b_td_div3").size()&&($(".tbody_b_td_div3").css({height:"43px","-webkit-line-clamp":"2"}),clearInterval(t))},10)},e.$scope.goChapter=function(e){var t="/class/"+e.classId+"/unit/"+e.itemId+"/chapter/"+(e.chapterId||e.newChapterId);return t?gxb.settings.identifier.goLMSLearn(t):"javascript:void(0)"}},e.inheritFromCtrl(e.portal.profiles.userAnalysisClassCtrl),e.registerDependency("gxb.controllers.portal.profiles.userAnalysisClassCtrl",["gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.profiles.userAnalysisClassCtrl","business/user/user.analysis.class")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.userCertifiedClassCtrl=function(e){$(".navigation").hide();var t=1,s=4,o=100,n=10,a="",i="";e.$scope.labstatus="progress",e.$scope.tabs=-1,e.$scope.noAuthStatus=!1,e.$scope.hasNoSelectedCourse=!0,e.$scope.list_length=0,e.$scope._progress="即将开始",e.$userSrv.usersave().then(function(s){s.data.studentList&&s.data.studentList.length?(d(t,9999,i,a),e.$scope.noAuthStatus=!1):e.$scope.noAuthStatus=!0}),e.$scope.gostudy=function(e,t){window.location.href=gxb.settings.identifier.goLMS()+"/class/"+t+"/announcement?redirect_to="+e},e.$scope.startstudy=function(e){window.location.href=gxb.settings.identifier.goLMS()+"/class/"+e+"/announcement"},e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var c=function(){e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",s=e.$scope.$new();$("#pagination").empty(),$("#pagination").append(e.$compile(t)(s)[0])};c(),e.$scope.onPageChange=function(){t=this.currentPage,r(t,s,i,a)};var r=function(t,s,o,n){e.$scope.labstatus=o,e.$userSrv.studyList(t,s,o,n).then(function(t){if(null!=t.data.dataList){if(e.$scope.hasNoSelectedCourse=!1,e.$scope.list_length=t.data.paging.total,e.$scope.data=t.data.dataList||[],e.$scope.newDate=t.date,e.$scope.total=t.data.paging.total,e.$scope.ngPaginationConfig.pageCount=t.data.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.data.paging.totalPage>5?5:t.data.paging.totalPage,e.$scope.ngPaginationConfig.pagenums=[],0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1)}else e.$scope.list_length=0,e.$scope.hasNoSelectedCourse=!0;e.$scope.$apply()})},l=[],p=[],g=function(t,s){for(var o=0;o<p.length;o++)e.$scope.time_1(p[o].startAt)<=0&&e.$scope.time_1(p[o].concludeAt)>0&&l.push(p[o]);for(var o=0;o<p.length;o++)e.$scope.time_1(p[o].startAt)>0&&l.push(p[o]);for(var o=0;o<p.length;o++)e.$scope.time_1(p[o].concludeAt)<0&&l.push(p[o]);return l.slice((t-1)*s,(t-1)*s+s)};e.$scope.ngPaginationConfig_auth={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var u=function(){e.$scope.ngPaginationConfig_auth={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig_auth' page-count='ngPaginationConfig_auth.pageCount' current-page='currentPage' on-page-change='onPageChangeAuth()'></gxbtmpagination>",s=e.$scope.$new();$("#pagination").empty(),$("#pagination").append(e.$compile(t)(s)[0])};e.$scope.onPageChangeAuth=function(){l=[],s=4,e.$scope.data=g(this.currentPage,s)};var d=function(t,s,a,i){u(),e.$scope.labstatus=a,e.$userSrv.studyList(t,s,a,i).then(function(a){if(null!=a.data.dataList){if(e.$scope.hasNoSelectedCourse=!1,e.$scope.list_length=a.data.paging.total,s=4,p=a.data.dataList||[],e.$scope.newDate=a.date,e.$scope.data=[],e.$scope.data=g(t,s),o=p.length,n=Math.ceil(o/s),e.$scope.total=a.data.paging.total,e.$scope.ngPaginationConfig_auth.pageCount=n,e.$scope.ngPaginationConfig_auth.visiblePageCount=n>5?5:n,0==e.$scope.ngPaginationConfig_auth.pagenums.length)for(var i=0;i<e.$scope.ngPaginationConfig_auth.visiblePageCount;i++)e.$scope.ngPaginationConfig_auth.pagenums.push(i+1)}else e.$scope.list_length=0,e.$scope.hasNoSelectedCourse=!0;e.$scope.$apply()})};e.$scope.search=function(o){e.$scope.ngPaginationConfig.pagenums=[],c(),i=o,t=1,e.$scope.noAuthStatus||(""==o?d(t,9999,i,a):r(t,s,i,a)),"progress"==i?e.$scope._progress="正在进行":"conclude"==i?e.$scope._progress="已结课":e.$scope._progress="即将开始"},e.$scope.time=function(t,s){var o=e.$scope.newDate,n=(t-o)/1e3,a=parseInt(n/86400);return a+parseInt(s)},e.$scope.time_1=function(t){var s=e.$scope.newDate,o=parseInt(t-s);return o},e.$scope.time_day=function(t){var s=e.$scope.newDate,o=(t-s)/1e3,n=parseInt(o/86400);return n},e.$scope.addData=function(e,t){var s=3600*t*24*1e3;return Number(e)+Number(s)}},e.inheritFromCtrl(e.portal.profiles.userCertifiedClassCtrl),e.registerDependency("gxb.controllers.portal.profiles.userCertifiedClassCtrl",["gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.profiles.userCertifiedClassCtrl","business/user/user.certified.class")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.userCollectionClassCtrl=function(e){$(".navigation").hide();var t=1,s=6,o="";e.$scope.tab=1,e.$scope.usercoll1=!0,e.$scope.usercoll2=!0,e.$scope.usercoll3=!0;var n=function(t,s,o){e.$userSrv.studycollection(t,s,o).then(function(t){if(null!=t.data.dataList){if(e.$scope.usercoll1=!1,e.$scope.usercoll2=!0,e.$scope.usercoll3=!1,e.$scope.data=t.data.dataList||[],e.$scope.total=t.data.paging.total,e.$scope.ngPaginationConfig.pageCount=t.data.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.data.paging.totalPage>5?5:t.data.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1)}else e.$scope.usercoll1=!1,e.$scope.usercoll2=!1,e.$scope.usercoll3=!0;e.$scope.$apply()},function(e){})};n(t,s,o),e.$scope.search=function(a){e.$scope.ngPaginationConfig.pagenums=[],o=a,n(t,s,o)},e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var a="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",i=e.$scope.$new();$("#pagination").append(e.$compile(a)(i)[0]),e.$scope.onPageChange=function(){t=this.currentPage,n(t,s,o)}},e.inheritFromCtrl(e.portal.profiles.userCollectionClassCtrl),e.registerDependency("gxb.controllers.portal.profiles.userCollectionClassCtrl",["gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.profiles.userCollectionClassCtrl","business/user/user.collection.class")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.userExamCtrl=function(e){function t(t,s){e.$userSrv.getExamList(t,s).then(function(t){if(t.dataList){if(e.$scope.examList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>5?5:t.paging.totalPage,e.$scope.ngPaginationConfig.pagenums=[],0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()}})}var s=1,o=4;t(s,o),e.$scope.gotoexam=function(t){e.$userSrv.checkExam(t.classId,t.examId).then(function(e){e.status?window.location.href=gxb.settings.identifier.goLMSLearn("/class/"+t.classId+"/gotoexam/"+t.examId):gxb.tips.error(e.data)})},e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var n="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",a=e.$scope.$new();$("#pagination").empty(),$("#pagination").append(e.$compile(n)(a)[0]),e.$scope.onPageChange=function(){s=this.currentPage,t(s,o)}},e.inheritFromCtrl(e.portal.profiles.userExamCtrl),e.registerDependency("gxb.controllers.portal.profiles.userExamCtrl",["gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.profiles.userExamCtrl","business/user/user.exam")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.userHomeCtrl=function(e){function t(){if(!gxb.utils.localStorageUtils.get("_select_course_")){gxb.utils.localStorageUtils.set("_select_course_",!0),$("#iframe_treesea").remove();var e=document.createElement("iframe");e.id="iframe_treesea",e.src="/iframe/#/selectcourse?_source_="+window.location.origin,e.style.display="block",e.style.height="100%",e.style.width="100%",e.style.zIndex="999",e.style.position="fixed",e.style.top="0",e.style.backgroundColor="transparent",e.frameborder=0,e.scrolling="no",e.allowtransparency="true",document.body.appendChild(e)}}var s=1,o=4,n="",a="";e.$scope.menu=1,e.$scope.tab=1,e.$scope.tabs=-1,e.$scope.noAuthStatus=!1,e.$scope.hasNoSelectedCourse=!0,e.$scope._progress="即将开始",e.$scope.my_course=function(){e.$scope.tabs=-1,e.$scope.ngPaginationConfig.currentPage=1,e.$scope.ngPaginationConfig.pagenums=[],a="",s=1,o=4,i(s,o,a,n),c()},e.$scope.study_rili=function(){e.$scope.ngPaginationConfig.pagenums=[],a="progress",e.$scope.ngPaginationConfig.currentPage=1,s=1,o=2,i(s,o,a,n),c()},e.$userSrv.usersave().then(function(t){t.data.studentList&&t.data.studentList.length?(i(s,o,a,n),e.$scope.noAuthStatus=!1,e.$scope.noAuthStatusTips=!0):(e.$scope.noAuthStatus=!0,e.$scope.noAuthStatusTips=!1),e.$scope.$apply()}),e.$studentListSrv.getSelectiveListAtStudent().then(function(e){e&&e.length>0&&t()}),e.$userSrv.getGxbStuStudyOverviewInfo().then(function(t){e.$scope.overvinfo=t.data||[],e.$scope.studyTimePerDayStr=e.$scope.overvinfo.studyTimePerDayStr;var s,o,n=e.$scope.overvinfo.studyTimePerDayStr;n&&(s=n.substr(0,n.indexOf(":")),o=n.substr(n.indexOf(":")+1,n.length),o=o.substr(0,o.indexOf(":")),n=s+"小时"+o+"分",e.$scope.studyTimePerDayStr=n),e.$scope.$apply()}),e.$userSrv.countLoginDate().then(function(t){e.$scope.countLoginDate=t.data,e.$scope.$apply()});var i=function(t,s,o,n){e.$scope.labstatus=o,e.$userSrv.studyList(t,s,o,n).then(function(t){if(null!=t.data.dataList){if(e.$scope.hasNoSelectedCourse=!1,e.$scope.data=t.data.dataList||[],e.$scope.newDate=t.date,e.$scope.total=t.data.paging.total,e.$scope.ngPaginationConfig.pageCount=t.data.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.data.paging.totalPage>5?5:t.data.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1)}else e.$scope.list_length=0,e.$scope.hasNoSelectedCourse=!0;e.$scope.$apply()})};e.$scope.search=function(t){e.$scope.ngPaginationConfig.pagenums=[],a=t,s=1,i(s,o,a,t),c(),"progress"==t?e.$scope._progress="正在进行":"conclude"==t?e.$scope._progress="已结课":e.$scope._progress="即将开始"},e.$scope.time=function(e,t){var s=Date.parse(new Date),o=(e-s)/1e3,n=parseInt(o/86400);return n+parseInt(t)},e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]},e.$scope.gostudy=function(e,t){window.location.href=gxb.settings.identifier.goLMS()+"/class/"+t+"/announcement?redirect_to="+e},e.$scope.startstudy=function(e){window.location.href=gxb.settings.identifier.goLMS()+"/class/"+e+"/announcement"};var c=function(){var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",s=e.$scope.$new();1!=e.$scope.menu?$("#pagination").empty().append(e.$compile(t)(s)[0]):$("#coursePage").empty().append(e.$compile(t)(s)[0])};c(),e.$scope.onPageChange=function(){s=this.currentPage,i(s,o,a,n)},$(function(){function t(t,n,a){e.$scope.years=t,e.$scope.months=n,s=2==n&&t%4==0&&t%100!==0?28:1==n||3==n||5==n||7==n||8==n||10==n||12==n?31:4==n||6==n||9==n||11==n?30:29;var i,l;l=n<10?t.toString()+"0"+n.toString():t.toString()+n.toString(),i=l+"01",e.$userSrv.listUserLoginTrack(i,l+s).then(function(a){var p=a.data||[],g=n<3?1==n?13:14:n;t=g>12?t-1:t;var u=Number(t.toString().substring(0,2)),d=Number(t.toString().substring(2,4)),f=1,m=d+parseInt(d/4)+parseInt(u/4)-2*u+parseInt(26*(g+1)/10)+f-1;m=m<0?(m%7+7)%7:m%7;for(var h=0;h<42;h++){var C='<li><span></span><div class="date_circle"></div><div class="date_test"></div><div class="date_festival"></div><p style="display:none" ></p></li>';$(".myhomeDateLeft_3").append(C)}for(var v,h=0;h<s;h++){if(h+1==c&&r==t.toString()+n.toString()&&o.find("li").eq(m%7+h).addClass("liActiveNow liActive_hasContent"),o.find("li").hasClass("liActiveNow")&&""!=$(".liActiveNow").text()){var b=$(".liActiveNow").find("span").text(),x="",y="";x=parseInt(b)<10?0+b:b,y=e.$scope.months<10?"0"+e.$scope.months:e.$scope.months.toString(),e.$scope.cur_date_=e.$scope.years+"年"+e.$scope.months+"月"+b+"日",e.$scope.cur_date_start=e.$scope.years.toString()+y+x,e.$scope.userCenter_date(e.$scope.cur_date_start,-99)}v=h+1<10?"0"+(h+1):h+1;var P;if(null!=p)for(var w=0;w<p.length;w++)P=p[w].substr(p[w].length-2,p.length),v==P&&o.find("li").find(".date_circle").eq(m%7+h).addClass("div_circle");o.find("span").eq(m%7+h).text(h+1);var S=o.find("span").eq(m%7+h).text(),I="",L="";I=parseInt(S)<10?0+S:S,L=e.$scope.months<10?"0"+e.$scope.months:e.$scope.months.toString();var _=e.$scope.years.toString()+L+I,k=e.$scope.years.toString()+"-"+L+"-"+I;o.find("span").eq(m%7+h).attr("date-festival",_),o.find("p").eq(m%7+h).text(k);var U=o.find("span").eq(m%7+h),N=U.attr("date-festival");N&&("0701"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("建党节")),"0801"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("建军节")),"0803"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("男人节")),"20160809"!=N&&"20170828"!=N||(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("七夕节")),"0910"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("教师节")),"0912"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("示爱节")),"20160915"!=N&&"20171004"!=N||(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("中秋节")),"1001"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("国庆节")),"20161009"!=N&&"20171028"!=N||(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("重阳节")),"1010"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("卖萌日")),"1111"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("光棍节")),"1212"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("双十二")),"1225"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("圣诞节")),"0101"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("元旦")),"20170127"!=N&&"20160207"!=N||(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("除夕")),"20170128"!=N&&"20160208"!=N||(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("春节")),"20170211"!=N&&"20160222"!=N||(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("元宵节")),"0214"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("情人节")),"0307"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("女生节")),"0308"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("妇女节")),"0312"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("植树节")),"0314"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("白色情人节")),"0401"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("愚人节")),"0404"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("清明节")),"0501"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("劳动节")),"0504"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("青年节")),"20170514"!=N&&"20160508"!=N||(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("母亲节")),"0517"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("吃货节")),"0520"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("网络情人节")),"20170530"!=N&&"20160609"!=N||(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("端午节")),"0601"==N.substring(4)&&(U.parent().find(".date_festival").addClass("div_day li_chuanTong"),U.parent().find(".date_festival").text("儿童节")),"20170618"!=N&&"20160619"!=N||(U.parent().find(".date_festival").addClass("div_day li_yuLe"),U.parent().find(".date_festival").text("父亲节"))),o.find("li").eq(m%7+h).on("click",function(){var t=this,s="",n="";s=parseInt($(t).find("span").text())<10?0+$(t).find("span").text():$(t).find("span").text(),n=e.$scope.months<10?"0"+e.$scope.months:e.$scope.months.toString();var a=e.$scope.years.toString()+n+s;e.$scope.cur_date_=e.$scope.years+"年"+e.$scope.months+"月"+$(t).find("span").text()+"日",e.$scope.$apply(),o.find("li").removeClass("liActive_noContent"),$(this).addClass("liActive_noContent"),e.$scope.userCenter_date(a,-99)})}if(""!=o.find("li").eq(35).text())var T=setInterval(function(){$(".myhome_Course_box").size()&&($(".myhomeDateLeft , .myhomeDateRight").height("493px"),$(".DateRight_2").height("400px"),$(".myhome_Course_box").css({top:"610px"}),clearInterval(T))},10);else if(""==o.find("li").eq(28).text())var T=setInterval(function(){$(".myhome_Course_box").size()&&($(".myhomeDateLeft , .myhomeDateRight").height("359px"),$(".DateRight_2").height("334px"),$(".myhome_Course_box").css({top:"680px"}),clearInterval(T))},10);else var T=setInterval(function(){$(".myhome_Course_box").size()&&($(".myhomeDateLeft , .myhomeDateRight").height("426px"),$(".DateRight_2").height("334px"),$(".myhome_Course_box").css({top:"556px"}),clearInterval(T))},10);e.$scope.userCenter_monthDateAll(i,l+s)})}var s,o=$(".myhomeDateLeft_3"),n=new Date,a=n.getFullYear(),i=n.getMonth()+1,c=n.getDate(),r=a.toString()+i.toString();t(a,i,c),$(document).on("click",".iw-iconfont-bofang",function(){$(".myhomeDateLeft_3").children("li").remove(),$(this).hasClass("left")?1==i?(i=12,a--):i--:12==i?(i=1,a++):i++,t(a,i,c)})}),e.$scope.show_noDate=!1,e.$scope.userCenter_date=function(t,s){e.$userSrv.userCenter_learn_date(t,s).then(function(t){"success"==t.message&&t.data&&t?(e.$scope.learnlist_Date=t.data,
e.$scope.show_noDate_msg=!1,$.each(t.data,function(t,s){0!=parseInt(s.classConcludeDay)&&0!=parseInt(s.classStartday)&&0!=parseInt(s.quizDueDay)&&0!=parseInt(s.assignmentDueDay)&&0!=parseInt(s.examStartDay)&&0!=parseInt(s.webcaseStartDay)&&0!=parseInt(s.practiceStartDay)&&0!=parseInt(s.classScorePublishDay)&&0!=parseInt(s.assignmentUnlockDay)||(e.$scope.show_noDate_msg=!0)}),e.$scope.show_noDate=!1):e.$scope.show_noDate=!0,e.$scope.$apply()})},e.$scope.userCenter_monthDateAll=function(t,s){e.$userSrv.userCenter_learn_date(t,s).then(function(t){if("success"==t.message&&t.data&&t){e.$scope.monthDateAll=t.data;for(var s=$(".myhomeDateLeft_3").find("p"),o=[].slice.call(s),n=0;n<o.length;n++){""==s.eq(n).text()&&s.eq(n).parent().css({background:"rgb(245, 248, 250);",cursor:"default"});for(var a=0;a<e.$scope.monthDateAll.length;a++){var i=e.$scope.monthDateAll[a].examStartAt,c=e.$scope.monthDateAll[a].concludeAt,r=gxb.utils.datetimeUtils.convert(new moment(c));!i&&r&&s.eq(n).text()==r.toString().substring(0,10)?($(".myhomeDateLeft_3").find(".date_test").eq(n).addClass("div_test"),$(".myhomeDateLeft_3").find(".date_test").eq(n).text("结课")):i&&s.eq(n).text()==i.toString().substring(0,10)&&($(".myhomeDateLeft_3").find(".date_test").eq(n).addClass("div_test"),$(".myhomeDateLeft_3").find(".date_test").eq(n).text("考试"))}}}e.$scope.$apply()})},e.$scope.addData=function(e,t){var s=3600*t*24*1e3;return Number(e)+Number(s)},e.$scope.dataAdd=function(t){return Number(e.$scope.newDate)-Number(t)>=0},e.$scope.time_1=function(t){var s=e.$scope.newDate,o=parseInt(t-s);return o},e.$scope.time_day=function(t){var s=e.$scope.newDate,o=(t-s)/1e3,n=parseInt(o/86400);return n},e.$scope.editClass=!0,e.$scope.drawsClass=function(t,s){t.stopPropagation(),e.$scope.editClass=!1,e.$scope.ExitClassId=s},e.$scope.sureReturnClass=function(){e.$userSrv.userTurnClass(e.$scope.ExitClassId).then(function(t){t.status&&"success"==t.message&&t.data&&(a=1==e.$scope.menu?"":"progress",i(s,o,a,n),e.$scope.editClass=!0)},function(t){"error"==t.state&&(alert(t.msg),e.$scope.editClass=!0,e.$scope.$apply())})}},e.inheritFromCtrl(e.portal.profiles.userHomeCtrl),e.registerDependency("gxb.controllers.portal.profiles.userHomeCtrl",["gxb.services.classes.userSrv","gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.portal.profiles.userHomeCtrl","business/user/user.home")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.userInterestingClassCtrl=function(e){$(".navigation").hide();var t=1,s=4,o=100,n=10,a="100",i="";e.$scope.tab=-1,e.$scope.userlikeinfo2=!0,e.$scope.userlikeinfo3=!0,e.$scope._progress="即将开始",e.$scope.list_length=0,e.$scope.gostudy=function(e,t){window.location.href=gxb.settings.identifier.goLMS()+"/class/"+t+"/announcement?redirect_to="+e},e.$scope.startstudy=function(e){window.location.href=gxb.settings.identifier.goLMS()+"/class/"+e+"/announcement"},e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var c=function(){e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",s=e.$scope.$new();$("#pagination").empty(),$("#pagination").append(e.$compile(t)(s)[0])};c(),e.$scope.onPageChange=function(){t=this.currentPage,r(t,s,i,a)};var r=function(t,s,o,n){e.$scope.labstatus=o,e.$userSrv.studyList(t,s,o,n).then(function(t){if(null!=t.data.dataList){if(e.$scope.userlikeinfo2=!0,e.$scope.userlikeinfo3=!1,e.$scope.data=t.data.dataList||[],e.$scope.newDate=t.date,e.$scope.total=t.data.paging.total,e.$scope.ngPaginationConfig.pageCount=t.data.paging.totalPage,e.$scope.list_length=t.data.paging.total,e.$scope.ngPaginationConfig.visiblePageCount=t.data.paging.totalPage>5?5:t.data.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1)}else e.$scope.list_length=0,e.$scope.userlikeinfo2=!1,e.$scope.userlikeinfo3=!0;e.$scope.$apply()})};e.$scope.time=function(t,s){var o=e.$scope.newDate,n=(t-o)/1e3,a=parseInt(n/86400);return a+parseInt(s)},e.$scope.time_1=function(t){var s=e.$scope.newDate,o=parseInt(t-s);return o},e.$scope.time_day=function(t){var s=e.$scope.newDate,o=(t-s)/1e3,n=parseInt(o/86400);return n};var l=[],p=[],g=function(t,s){for(var o=0;o<p.length;o++)e.$scope.time_1(p[o].startAt)<=0&&e.$scope.time_1(p[o].concludeAt)>0&&l.push(p[o]);for(var o=0;o<p.length;o++)e.$scope.time_1(p[o].startAt)>0&&l.push(p[o]);for(var o=0;o<p.length;o++)e.$scope.time_1(p[o].concludeAt)<0&&l.push(p[o]);return l.slice((t-1)*s,(t-1)*s+s)};e.$scope.ngPaginationConfig_auth={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var u=function(){e.$scope.ngPaginationConfig_auth={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig_auth' page-count='ngPaginationConfig_auth.pageCount' current-page='currentPage' on-page-change='onPageChangeAuth()'></gxbtmpagination>",s=e.$scope.$new();$("#pagination").empty(),$("#pagination").append(e.$compile(t)(s)[0])};e.$scope.onPageChangeAuth=function(){l=[],s=4,e.$scope.data=g(this.currentPage,s)};var d=function(t,s,a,i){u(),e.$scope.labstatus=a,e.$userSrv.studyList(t,s,a,i).then(function(a){if(null!=a.data.dataList){if(e.$scope.userlikeinfo2=!0,e.$scope.userlikeinfo3=!1,e.$scope.list_length=a.data.paging.total,s=4,p=a.data.dataList||[],e.$scope.newDate=a.date,e.$scope.data=g(t,s),o=p.length,n=Math.ceil(o/s),e.$scope.total=a.data.paging.total,e.$scope.ngPaginationConfig_auth.pageCount=n,e.$scope.ngPaginationConfig_auth.visiblePageCount=n>5?5:n,0==e.$scope.ngPaginationConfig_auth.pagenums.length)for(var i=0;i<e.$scope.ngPaginationConfig_auth.visiblePageCount;i++)e.$scope.ngPaginationConfig_auth.pagenums.push(i+1)}else e.$scope.list_length=0,e.$scope.userlikeinfo2=!1,e.$scope.userlikeinfo3=!0;e.$scope.$apply()})};d(t,9999,i,a),e.$scope.search=function(o){c(),e.$scope.ngPaginationConfig.pagenums=[],i=o,t=1,""==o?d(t,9999,i,a):r(t,s,i,a),"progress"==i?e.$scope._progress="正在进行":"conclude"==i?e.$scope._progress="已结课":e.$scope._progress="即将开始"}},e.inheritFromCtrl(e.portal.profiles.userInterestingClassCtrl),e.registerDependency("gxb.controllers.portal.profiles.userInterestingClassCtrl",["gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.profiles.userInterestingClassCtrl","business/user/user.interesting.class")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.userMyCourseCtrl=function(e){e.$scope.userlikeinfo2=!0,e.$scope.userlikeinfo3=!0;var t=gxb.settings.identifier.getUserID();e.$scope.gotTotalScore="",e.$userSrv.getMyCourse(t).then(function(t){t.status?(e.$scope.userlikeinfo2=!0,e.$scope.userlikeinfo3=!1,e.$scope.data=t.data||{}):(e.$scope.userlikeinfo2=!1,e.$scope.userlikeinfo3=!0,$("#show").css("display","inline-block !important")),e.$scope.$apply(),$(".user .w1200 .setting_main").css({height:1200}),$(".user .w1200 .setting").css({height:1200});var s=$(".zygj_my_course").height()+30;s>1200&&(console.log(111),$(".user .w1200 .setting_main").css({height:$(".zygj_my_course").height()+30}),$(".user .w1200 .setting").css({height:$(".zygj_my_course").height()+30}))}),e.$scope.gostudy=function(e){window.location.href=gxb.settings.identifier.goLMS()+"/class/"+e+"/announcement"}},e.inheritFromCtrl(e.portal.profiles.userMyCourseCtrl),e.registerDependency("gxb.controllers.portal.profiles.userMyCourseCtrl",["gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.profiles.userMyCourseCtrl","business/user/user.mycourse")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.userNotifyCtrl=function(e){var s=1,o=function(t){e.$userSrv.announcements(t,10).then(function(t){if(e.$scope.annlist=t.data.dataList||[],e.$scope.ngPaginationConfig.pageCount=t.data.paging.totalPage,e.$scope.totalItems=t.data.paging.total,e.$scope.ngPaginationConfig.visiblePageCount=t.data.paging.totalPage>5?5:t.data.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})};e.$scope.dataChange=function(e){return"TenantAnnouncement"==e?"学校公告":"课程公告"},e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var n="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",a=e.$scope.$new();$("#pagination").append(e.$compile(n)(a)[0]),e.$scope.onPageChange=function(){o(this.currentPage);var e=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");$.ajax({url:e+"/user_message_center/unread_message_num/api",type:"GET",dateType:"json",contentType:"application/json",success:function(e){"success"==e.message&&(gxb.utils.localStorageUtils.set("messageNum",e.data),gxb.utils.localStorageUtils.get("messageNum")?0==gxb.utils.localStorageUtils.get("messageNum")?$("body").find("#messageTips,.messageNumBer").hide():gxb.utils.localStorageUtils.get("messageNum")>99?$("body").find("#messageTips,.messageNumBer").show().removeClass("one").addClass("two").text("99+"):gxb.utils.localStorageUtils.get("messageNum")<10?$("body").find("#messageTips,.messageNumBer").show().removeClass("two").addClass("one").text(gxb.utils.localStorageUtils.get("messageNum")):$("body").find("#messageTips,.messageNumBer").show().removeClass("one").addClass("two").text(gxb.utils.localStorageUtils.get("messageNum")):$("body").find("#messageTips,.messageNumBer").hide())}})},o(s),e.$scope.localStorage=function(e){gxb.utils.localStorageUtils.set("notify_"+e.messageId,e),gxb.utils.localStorageUtils.set("userMessageId"+e.messageId,e.userMessageId),gxb.utils.localStorageUtils.set("isRead"+e.messageId,e.isRead),window.location.href=t.urlUtils.resolveUrl("/#/user/userNotifyDetail/"+e.messageId)}},e.inheritFromCtrl(e.portal.profiles.userNotifyCtrl),e.registerDependency("gxb.controllers.portal.profiles.userNotifyCtrl",["gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.profiles.userNotifyCtrl","business/user/user.notify")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.userNotifyDetailCtrl=function(e){var t=e.$state.params.notifyId,s=gxb.utils.localStorageUtils.get("notify_"+t);e.$scope.messageType=s.messageType,e.$scope.dataChange=function(e){return"TenantAnnouncement"==e?"学校公告":"课程公告"},e.$scope.getMessageDetailList=[],"ClassEndNotice"!=s.messageType&&"ScorePublish"!=s.messageType&&"ExamStartNotice"!=s.messageType&&"ExamScorePublish"!=s.messageType&&"ExamMakeUp"!=s.messageType&&"AssignmentBack"!=s.messageType||e.$classesSrv.getMessageData(t).then(function(t){e.$scope.getMessageDetailList=t.data||[],e.$scope.$apply()}),"Supervision"==s.messageType&&e.$classesSrv.classPushMessage(t).then(function(t){e.$scope.getMessageDetailList=t.data||[],e.$scope.$apply()}),"ClassAnnouncement"==s.messageType&&e.$classesSrv.getAnnouncement(t).then(function(t){e.$scope.getMessageDetailList=t.data||[],e.$scope.$apply()}),"TenantAnnouncement"==s.messageType&&e.$classesSrv.getAnnouncements(t).then(function(t){e.$scope.getMessageDetailList=t.data||[],e.$scope.$apply()}),e.$scope.linkToPage=function(t){"ExamStartNotice"==e.$scope.messageType&&(window.location.href=gxb.settings.identifier.goLMS()+"/class/"+t+"/exam"),"ScorePublish"==e.$scope.messageType&&(window.location.href=gxb.settings.identifier.goLMS()+"/class/"+t+"/scoreAnalysis"),"ClassEndNotice"==e.$scope.messageType&&(window.location.href=gxb.settings.identifier.goLMS()+"/class/"+t+"/announcement")};var o=gxb.utils.localStorageUtils.get("userMessageId"+t),n=gxb.utils.localStorageUtils.get("isRead"+t);e.$classesSrv.setMessageRead(o).then(function(e){e.data&&"success"==e.message&&(0==n&&gxb.utils.localStorageUtils.set("messageNum",gxb.utils.localStorageUtils.get("messageNum")-1),gxb.utils.localStorageUtils.get("messageNum")?0==gxb.utils.localStorageUtils.get("messageNum")?$("body").find("#messageTips").hide():gxb.utils.localStorageUtils.get("messageNum")>99?$("body").find("#messageTips").show().removeClass("one").addClass("two").text("99"):gxb.utils.localStorageUtils.get("messageNum")<10?$("body").find("#messageTips").show().removeClass("two").addClass("one").text(gxb.utils.localStorageUtils.get("messageNum")):$("body").find("#messageTips").show().removeClass("one").addClass("two").text(gxb.utils.localStorageUtils.get("messageNum")):$("body").find("#messageTips").hide())}),e.$scope.$apply(),e.$scope.coursesList=[],e.$classesSrv.loadCourses("","","jingcaishiting").then(function(t){e.$scope.coursesList=t.dataList||[],e.$scope.$apply()})},e.inheritFromCtrl(e.portal.profiles.userNotifyDetailCtrl),e.registerDependency("gxb.controllers.portal.profiles.userNotifyDetailCtrl",["gxb.services.classes.userSrv","gxb.services.classes.classesSrv"]),e.registerView("gxb.controllers.portal.profiles.userNotifyDetailCtrl","business/user/user.notifydetail")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.userProfileCtrl=function(e){function s(){e.$userSrv.noRepeatLoad().then(function(t){e.$scope.token=t.data||"",gxb.utils.localStorageUtils.set("repeat_token",t.data)})}e.$scope.gengh=!0,e.$scope.bingEmail=!0,e.$scope.hasMulti=!1,$(".navigation").hide();var o=e.$location.url();o.indexOf("?tab=2")>-1?e.$scope.tab=2:e.$scope.tab=1,e.$scope.data={onChanged:function(t,s){e.$scope.userVo.tenantId=s,$(".singleTenant").text(t)},DEFAULT_TENANT_ID:gxb.settings.identifier.getTenantID()},e.$scope.uploadData={fileElementID:"slide_file_element",isImage:!0,autoupload:!0,cutImage:!0,size:["70*70","48*48","36*36"],cdnPrefix:gxb.settings.cdn.wangsu.getPaths().uploads_user_avatar_prefix,cdnBucket:gxb.settings.cdn.wangsu.getBuckets().defaultBucket,onSuccess:function(t){e.$scope.imageUrl=t.absoluteUrl,e.$scope.realImageUrl=t.relativeUrl,e.$scope.$apply()}},$(".input_newPwd, .input_qnewPwd, .input_oldPwd").focus(function(){$(this).css("border","1px solid #1fb6ff")}).blur(function(){$(this).css("border","1px solid #e1e7eb")}),e.$scope.updatePwd=function(t,s,o){var n=/((?=.*\d)(?=.*\D)|(?=.*[a-zA-Z])(?=.*[^a-zA-Z]))^.{6,16}$/;if(!t||!s||!o)return $(".input_newPwd, .input_qnewPwd, .input_oldPwd").css("border","1px solid red"),alert("数据不完整"),!1;if(!n.test(s))return $(".input_newPwd").css("border","1px solid red"),alert("请输入6-16位数字、字母或符号的组合(至少两种类型字符组合)"),!1;if(s!=o)return $(".input_qnewPwd").css("border","1px solid red"),alert("两次密码输入不一致"),!1;var a={oldPwd:t,newPwd:s};a.newPwd.length>=6?a.newPwd.length<=16?e.$userSrv.updataPwd(a).then(function(e){e==-1?($(".input_oldPwd").css("border","1px solid red"),alert("旧密码输入不正确")):alert("修改成功")}):($(".input_newPwd").css("border","1px solid red"),alert("请输入6-16位密码,不能超过16位")):($(".input_newPwd").css("border","1px solid red"),alert("请输入6-16位密码,不能低于6位"))},e.$scope.updataUserLink=function(){var s={link:e.$scope.realImageUrl};return s.link?void e.$userSrv.updataUserLink(s).then(function(e){e.status?(alert("修改成功"),window.location.reload()):alert("修改失败")}):(alert("修改成功"),void(window.location=t.urlUtils.resolveUrl("/#/user/user_my")))};var n=gxb.settings.identifier.getTenantID();e.$userSrv.getSchool().then(function(t){e.$scope.schoolList=t.data||[],$.each(t.data,function(t,s){s.tenantId==n&&($("body").find(".singleTenant").text(s.name),e.$scope.userVo.tenantId=s.tenantId)}),e.$scope.$apply()},function(e){}),e.$userSrv.usersave().then(function(t){e.$scope.userauthlist=t.data.studentList||[],e.$scope["goto"]=!(e.$scope.userauthlist.length>0),e.$scope.$apply()}),s(),e.$scope.userVo={},e.$scope.Induction=!1,e.$scope.userAuth=function(){return e.$scope.userVo.no?e.$scope.userVo.name?e.$scope.userVo.tenantId?void e.$userSrv.bindingStudent(e.$scope.userVo,e.$scope.token).then(function(t){s(),"学校尚未导入您的学生信息"==t.message?e.$scope.Induction=!0:("您在本校已经认证过了，请不要重复认证。"==t.message&&(e.$scope.autherror="您在本校已经认证过了，请不要重复认证。<br>建议再次核对个人信息，如依然无法提交，请联系客服。"),"此学号已经被认证"==t.message&&(e.$scope.autherror="此学号已经被认证。<br>请检查自己是否认证过或是否输入错误，如遇到其他问题，请联系我们的客服。"),"用户不存在"==t.message&&(e.$scope.autherror="用户不存在。<br>建议再次核对个人信息，如依然无法提交，请联系客服。"),0==t.status&&(e.$scope.okauth=!0)),1==t.status&&(e.$scope.hasMulti=!1,e.$scope.noauth=!0),e.$scope.$apply()},function(t){e.$scope.$apply(),s()}):void alert("请选择学校"):void alert("请填写姓名"):void alert("请输入学号")},e.$scope.start=function(){e.$scope.noauth=!1,window.location.reload()},e.$scope.confirm_=function(){$(".courseTips").length>0&&$(".courseTips").trigger("click"),e.$userSrv.usersave().then(function(t){e.$scope.userauthlist=t.data.studentList||[],e.$scope["goto"]=!(e.$scope.userauthlist.length>0),e.$scope.noauth=!1,e.$scope.tab=2,e.$scope.$apply()})},e.$scope.okauth=!1,e.$scope.noauth=!1,e.$scope.okauths=function(){e.$scope.okauth=!1},e.$scope.user={name:"",gender:""},e.$scope.imageUrl=null,e.$scope.imageInfo=null,e.$scope.userdata,e.$userSrv.usersave().then(function(t){e.$scope.userdata=t.data,e.$scope.imageUrl=t.data.avatarUrl,"male"==e.$scope.userdata.gender?e.$scope.a=!0:e.$scope.b=!0,e.$scope.gender=e.$scope.userdata.gender,e.$scope.imageInfo=null!=t.data.avatarUrl?"修改图片":"上传图像",e.$scope.usernames=t.data.name,null!=t.data.name?e.$scope.username=t.data.name:null!=t.data.email?e.$scope.username=t.data.email:null!=t.data.mobile?e.$scope.username=t.data.mobile:e.$scope.username="",e.$scope.$apply()},function(e){}),e.$scope.select=function(t){e.$scope.userdata.gender=t.type},e.$scope.formData={},e.$scope.user={name:"",gender:""},e.$scope.updateuser=function(t){return""==t||""==e.$scope.gender?(alert("数据不完整"),!1):t.length<2||t.length>16?(alert("姓名长度为2-16位"),!1):(e.$scope.user.name=t,e.$scope.user.gender=e.$scope.gender,void e.$userSrv.updateuser(e.$scope.user).then(function(e){e&&(alert("保存成功"),window.location.reload())},function(e){}))},e.$scope.userVo={},e.$scope.init=!0,e.$scope.genghsy=function(t){e.$scope.init=!t,e.$scope.userVo.encryptedPassword="",e.$scope.userVo.mobile="",e.$scope.userVo.validateCode="",e.$scope.smscode=!0,e.$scope.timeOut=!0,i=60,e.$scope.smsinto="免费获取验证码",e.$scope.timezore=!1,e.$interval.cancel(a)},e.$scope.smsinto="免费获取验证码",e.$scope.changeCaptcha=function(){e.$scope.captchaUrl=t.urlUtils.resolveUrl("/user/captcha/image/api?rnd="+(new Date).getTime())},e.$scope.timezore=!0,e.$scope.changeCaptcha();var a,i=60;e.$scope.smscode=!0,e.$scope.timeOut=!0,e.$scope.getSmsCode=function(){if(e.$scope.userVo.mobile){if(!e.$scope.userVo.captcha)return void alert("请输入图形验证码");e.$scope.smscode=!1,e.$userSrv.getSmsCode(e.$scope.userVo.mobile,"",e.$scope.userVo.captcha).then(function(t){e.$scope.smsinto="请稍后...",t.status?a=e.$interval(function(){e.$scope.nowtime=i--,e.$scope.smsinto=e.$scope.nowtime+"秒后重新获取",0==e.$scope.nowtime&&(e.$scope.smscode=!0,e.$scope.timeOut=!0,i=60,e.$scope.smsinto="免费获取验证码",e.$scope.timezore=!1,e.$interval.cancel(a))},1e3,61):(e.$scope.smscode=!0,"手机已被注册"==t.message?e.$scope.timeOut=!0:e.$scope.timeOut=!1,t.message&&((t.message||"").indexOf("验证码")==-1&&e.$scope.changeCaptcha(),alert(t.message))),e.$scope.$apply()})}else alert("请输入手机号")},e.$scope.ngfalse=!0,e.$scope.voiceSms=function(){e.$userSrv.getSmsCode(e.$scope.userVo.mobile,1,e.$scope.userVo.captcha).then(function(t){t.status?e.$scope.ngfalse=!1:t.message&&((t.message||"").indexOf("验证码")==-1&&e.$scope.changeCaptcha(),alert(t.message))})},e.$scope.bindMobile=function(){e.$userSrv.changeMobile(e.$scope.userVo).then(function(t){t.status?(e.$scope.init=!0,e.$scope.userdata.mobile=e.$scope.userVo.mobile,alert("绑定手机成功"),e.$scope.$apply()):alert(t.message)},function(e){})},e.$scope.bingEmail=!0,e.$scope.bingemail=function(t){e.$scope.bingEmail=!t,e.$scope.userVo1.encryptedPassword="",e.$scope.userVo1.email="",e.$scope.userVo1.validateCode="",e.$scope.emailcode=!0,e.$scope.emailtimeOut=!0,r=60,e.$scope.emailinto="免费获取验证码",e.$scope.emailtimezore=!1,e.$interval.cancel(c)},e.$scope.okemails=!1,e.$scope.okemail=function(){e.$scope.okemails=!1},e.$scope.userVo1={},e.$scope.changehide=!0,e.$scope.changeEmail=function(){e.$scope.changehide=!1,e.$userSrv.changeEmail(e.$scope.userVo1).then(function(t){t.status?(e.$scope.emailok=e.$scope.userVo1.email,e.$scope.bingEmail=!0,e.$scope.changehide=!0,e.$scope.userdata.email=e.$scope.userVo1.email):(alert(t.message),e.$scope.changehide=!0),e.$scope.$apply()},function(e){})},e.$scope.emailinto="免费获取验证码",e.$scope.emailtimezore=!0;var c,r=60;e.$scope.emailcode=!0,e.$scope.emailtimeOut=!0,e.$scope.getEmailCodes=function(){if(e.$scope.userVo1.email){e.$scope.emailcode=!1,e.$scope.emailinto="请稍后...";var t={email:e.$scope.userVo1.email};e.$userSrv.sendEmailValidateCode(t).then(function(t){t.status?c=e.$interval(function(){e.$scope.emailnowtime=r--,e.$scope.emailinto=e.$scope.emailnowtime+"秒后重新获取",0==e.$scope.emailnowtime&&(e.$scope.emailcode=!0,e.$scope.emailtimeOut=!0,r=60,e.$scope.emailinto="免费获取验证码",e.$scope.emailtimezore=!1,e.$interval.cancel(c))},1e3,61):(alert(t.errorInfo.email),e.$scope.emailcode=!0),e.$scope.$apply()})}else alert("请输入邮箱")},e.$scope.authli=!1,e.$scope.okauthli=function(t){e.$scope.authli=!!t},e.$scope.gender="",e.$scope.a=!1,e.$scope.select=function(t,s){e.$scope.a=!1,1==t?e.$scope.a=!1:e.$scope.a=!0,1==e.$scope.b&&(e.$scope.b=!1,e.$scope.a=!0),e.$scope.gender=s},e.$scope.b=!1,e.$scope.simple=function(t,s){e.$scope.b=!0,1==t||1==e.$scope.a?e.$scope.b=!1:e.$scope.b=!0,1==e.$scope.a&&(e.$scope.a=!1,e.$scope.b=!0),e.$scope.gender=s}},e.inheritFromCtrl(e.portal.profiles.userProfileCtrl),e.registerDependency("gxb.controllers.portal.profiles.userProfileCtrl",["gxb.services.classes.userSrv","$interval"]),e.registerView("gxb.controllers.portal.profiles.userProfileCtrl","business/user/user.profile")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.userTrainingPlanCtrl=function(e){e.$scope.userlikeinfo2=!0,e.$scope.userlikeinfo3=!0;var t=gxb.settings.identifier.getUserID();e.$scope.gotTotalScore="",e.$userSrv.getSolution(t).then(function(t){t.status?(e.$scope.userlikeinfo2=!0,e.$scope.userlikeinfo3=!1,e.$scope.data=t.data||{},e.$scope.gotTotalScore=Number(t.data.gotRequiredScore)+Number(t.data.gotElectiveScore),e.$scope.solutionClassList=t.data.solutionClassList||[]):(e.$scope.userlikeinfo2=!1,e.$scope.userlikeinfo3=!0,$("#show").css("display","inline-block !important")),e.$scope.$apply(),$(".user .w1200 .setting_main").css({height:1200}),$(".user .w1200 .setting").css({height:1200});var s=$(".zygj_my_course").height()+30;s>1200&&($(".user .w1200 .setting_main").css({height:$(".zygj_my_course").height()+30}),$(".user .w1200 .setting").css({height:$(".zygj_my_course").height()+30}))})},e.inheritFromCtrl(e.portal.profiles.userTrainingPlanCtrl),e.registerDependency("gxb.controllers.portal.profiles.userTrainingPlanCtrl",["gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.profiles.userTrainingPlanCtrl","business/user/user.trainingplan")}(gxb.controllers,gxb.utils),function(e,t){e.portal.profiles.userCenterCtrl=function(e){$(".navigation").hide();var s=gxb.settings.identifier.getTenantID();e.$scope.$userCenterHTML="",e.$userSrv.tenantTemplate().then(function(o){var n=o.data.body;n=JSON.parse(n);var a=t.encryptUtils.html.htmlDecode(n.usercenter);e.$scope.$userCenterHTML=e.$sce.trustAsHtml(a),e.$scope.$apply(),$(document.body).find("[isPart='true']").each(function(){var o=$(this),n=o.attr("part-data");if(n&&(n=t.encryptUtils.base64.decode(n)))try{var a=t.jsonUtils.toObject(n);a.dataMapperString=t.encryptUtils.base64.encode(t.jsonUtils.toString(a.dataMapper||{})),a.identityKey="webpart_"+t.generateID();var i="<<%= webPartId %> data-key='<%= identityKey %>' data-api='<%= apiUrl %>' data-mapper='<%= dataMapperString %>'  ></ <%= webPartId %>>";o.empty();var c=e.$scope.$new();c.parameter={tenantId:s,url:e.$location.host()},o.append(e.$compile(t.stringUtils.format(i,a))(c)[0])}catch(r){}});var i=e.$scope.$new();i.parameter={tenantId:s},$(document.body).find(".setting_main >.nosetting").append(e.$compile("<div ui-view='user_setting_view'/>")(i)[0]);var c=(window.location.hash||"").toLowerCase(),r=c;c.indexOf("?")>=0&&(r=c.substring(0,c.indexOf("?")));var l=r.indexOf("#/user/user_home")>=0||r.indexOf("#/user/user_notify")>=0||r.indexOf("#/user/user_auth")>=0||r.indexOf("#/user/user_like")>=0||r.indexOf("#/user/user_coll")>=0||r.indexOf("#/user/user_my")>=0||r.indexOf("#/user/my_user_exam")>=0||r.indexOf("#/user/class_analysis")>=0||r.indexOf("#/user/my_course")>=0,p="#/user"==c||"#/user/"==c;c=!l||p?"/#/user/user_home":c,l||(r=c),window.location.href=p?gxb.utils.urlUtils.resolveUrl("#/user/user_home"):gxb.utils.urlUtils.resolveUrl("#/user");var g=window.setInterval(function(){var e=$("li[href='"+r+"']");e.length?(window.clearInterval(g),e.trigger("click"),c!=r&&(window.location.href=gxb.utils.urlUtils.resolveUrl(c))):r.indexOf("#/user/class_analysis")>=0&&(window.clearInterval(g),e.trigger("click"),window.location.href=gxb.utils.urlUtils.resolveUrl(c))},20)})},e.inheritFromCtrl(e.portal.profiles.userCenterCtrl),e.registerDependency("gxb.controllers.portal.profiles.userCenterCtrl",["gxb.services.portal.homeSrv","gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.portal.profiles.userCenterCtrl","business/user/user")}(gxb.controllers,gxb.utils),function(e,t){e.portal.zygjCtrl=function(e){var t=gxb.settings.identifier.getTenantID();t&&e.$classesSrv.getClassByTenantId(t).then(function(t){e.$scope.courselist=t.dataList||[],e.$scope.$apply()})},e.inheritFromCtrl(e.portal.homeCtrl),e.registerDependency("gxb.controllers.portal.zygjCtrl",["gxb.services.classes.classesSrv"]),e.registerView("gxb.controllers.portal.zygjCtrl","business/zygjhome/zygj")}(gxb.controllers,gxb.utils),function(e,t){e.admin.courseClassifiyCtrl=function(e){function t(t,s,o){e.$goodCourseSrv.classpublished(t,s,o).then(function(t){if(e.$scope.classpublishedList=t.dataList||null,e.$scope.total=t.paging.total,e.$scope.ngPaginationConfigs.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfigs.visiblePageCount=t.paging.totalPage>10?8:t.paging.totalPage,0==e.$scope.ngPaginationConfigs.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfigs.visiblePageCount;s++)e.$scope.ngPaginationConfigs.pagenums.push(s+1);e.$scope.$apply(),e.$scope.showChecked()})}e.$scope.courseCategoryList=null,e.$scope.parentSortAlert=!0,e.$scope.childSortAlert=!0,e.$scope.parentSortName="",e.$scope.childSortName="",e.$scope.editSortHide=!0,e.$scope.deleteParentSort=!0,e.$scope.deleteChildSort=!0,e.$scope.editChildSortHide=!0,e.$scope.courseClassList=null,e.$scope.serialNum="",e.$scope.tab=1,e.$scope.totalClassNum="",e.$scope.imageUrl1=null,e.$scope.imageUrl=null,e.$scope.realImageUrl1=null,e.$scope.realImageUrl=null,e.$scope.percentage=0,e.$scope.percentage1=0;var s="",o=!1;e.$scope.uploadData={fileElementID:".slide_file_element",isImage:!0,autoupload:!0,cutImage:!0,size:["240*150"],cdnPrefix:gxb.settings.cdn.wangsu.getPaths().uploads_user_avatar_prefix,cdnBucket:gxb.settings.cdn.wangsu.getBuckets().defaultBucket,onSuccess:function(t){e.$scope.imageUrl=t.absoluteUrl,e.$scope.realImageUrl=t.relativeUrl,e.$scope.$apply()},onProgress:function(t){e.$scope.percentage=100*t.percentage,e.$scope.$apply()}},e.$scope.uploadData1={fileElementID:".slide_file_element1",isImage:!0,autoupload:!0,cutImage:!0,size:["240*150"],cdnPrefix:gxb.settings.cdn.wangsu.getPaths().uploads_user_avatar_prefix,cdnBucket:gxb.settings.cdn.wangsu.getBuckets().defaultBucket,onSuccess:function(t){e.$scope.imageUrl1=t.absoluteUrl,e.$scope.realImageUrl1=t.relativeUrl,e.$scope.$apply()},onProgress:function(t){e.$scope.percentage1=100*t.percentage,e.$scope.$apply()}};var n=function(){e.$courseCategorySrv.getCourseCategoryList().then(function(t){e.$scope.courseCategoryList=t.data||[],e.$scope.$apply()})};n(),e.$scope.clearValue=function(){e.$scope.parentSortName="",e.$scope.parentSortLink="",e.$scope.childSortName="",e.$scope.childSortLink="",e.$scope.imageName="",e.$scope.advertisementDesc="",e.$scope.imageUrl="",e.$scope.imageName1="",e.$scope.advertisementDesc1="",e.$scope.imageUrl1=""},e.$scope.commonCourse=!0,e.$scope.linkCourse=!1,e.$scope.advertisement=!1,e.$scope.parentSortPop=function(t,s,o,a,i,c,r){t?(e.$scope.addOredit="编辑",e.$scope.parentSortName=s,e.$scope.parentSortLink=o,e.$scope.imageName=i,e.$scope.imageUrl=c,e.$scope.advertisementDesc=r,c&&(e.$scope.realImageUrl=c.substring(c.indexOf(".com")+4))):(e.$scope.addOredit="添加",e.$scope.parentSortName="",e.$scope.parentSortLink="",e.$scope.imageName="",e.$scope.advertisementDesc="",e.$scope.imageUrl=""),1==a&&(e.$scope.commonCourse=!1,e.$scope.linkCourse=!0,e.$scope.advertisement=!1),0==a&&(e.$scope.commonCourse=!0,e.$scope.linkCourse=!1,e.$scope.advertisement=!1),2==a&&(e.$scope.commonCourse=!1,e.$scope.linkCourse=!1,e.$scope.advertisement=!0),e.$scope.parentSortAlert=!e.$scope.parentSortAlert,e.$scope.addParentSort=function(){if(1==e.$scope.commonCourse){if((e.$scope.parentSortName||[]).length>16)return alert("分类名称字数限制16字符以内"),!1;var s={categoryType:0,categoryName:e.$scope.parentSortName,position:$("#canDrap>li").length>0?parseInt($("#canDrap>li").last().attr("position"))+1:1};if(!s.categoryName)return void alert("数据不完整")}if(1==e.$scope.linkCourse){if((e.$scope.parentSortName||[]).length>16)return alert("分类名称字数限制16字符以内"),!1;var s={categoryType:1,categoryName:e.$scope.parentSortName,categoryUrl:e.$scope.parentSortLink,position:$("#canDrap>li").length>0?parseInt($("#canDrap>li").last().attr("position"))+1:1};if(!s.categoryName||!s.categoryUrl)return void alert("数据不完整")}if(1==e.$scope.advertisement){if((e.$scope.parentSortName||[]).length>16)return alert("分类名称字数限制16字符以内"),!1;if((e.$scope.imageName||[]).length>32)return alert("图片名称字数限制32字符以内"),!1;if((e.$scope.advertisementDesc||[]).length>24)return alert("广告描述字数限制24字符以内"),!1;var s={categoryType:2,categoryName:e.$scope.parentSortName,categoryUrl:e.$scope.parentSortLink,imageName:e.$scope.imageName,advertisementDesc:e.$scope.advertisementDesc,imageUrl:e.$scope.realImageUrl,position:$("#canDrap>li").length>0?parseInt($("#canDrap>li").last().attr("position"))+1:1};if(!(s.categoryName&&s.categoryUrl&&s.imageName&&s.advertisementDesc&&s.imageUrl))return void alert("数据不完整")}t?e.$courseCategorySrv.editCourseCategory(t,s).then(function(t){1==t.status&&"success"==t.message&&(e.$scope.parentSortName="",e.$scope.parentSortLink="",e.$scope.imageName="",e.$scope.advertisementDesc="",e.$scope.imageUrl="",e.$scope.parentSortAlert=!e.$scope.parentSortAlert,n())}):e.$courseCategorySrv.addCourseCategory(s).then(function(t){1==t.status&&"success"==t.message&&(e.$scope.parentSortName="",e.$scope.parentSortLink="",e.$scope.imageName="",e.$scope.advertisementDesc="",e.$scope.imageUrl="",e.$scope.parentSortAlert=!e.$scope.parentSortAlert,n())})},e.$scope.cancelParentAlert=function(){e.$scope.parentSortAlert=!e.$scope.parentSortAlert}},e.$scope.deleteParentSortPop=function(t,s){e.$scope.deleteHeadTitle=s,e.$scope.deleteParentSort=!e.$scope.deleteParentSort,e.$scope.delParentSortOk=function(){e.$courseCategorySrv.deleteCourseCategory(t).then(function(t){1==t.status&&"success"==t.message&&(e.$scope.deleteParentSort=!e.$scope.deleteParentSort,n())})},e.$scope.cancelDelParentSort=function(){e.$scope.deleteParentSort=!e.$scope.deleteParentSort}},e.$scope.common2=!0,e.$scope.link2=!1,e.$scope.advertisement1=!1,e.$scope.childSortPop=function(t,s,o,a,i,c,r,l,p,g){1==a&&(e.$scope.addOredit2="添加二",e.$scope.childSortName="",e.$scope.childSortLink="",e.$scope.onecategoryName=s,e.$scope.imageName1="",e.$scope.advertisementDesc1="",e.$scope.imageUrl1=""),3==a?(e.$scope.addOredit2="添加三",e.$scope.childSortName="",e.$scope.childSortLink="",e.$scope.onecategoryName=s,e.$scope.imageName1="",e.$scope.advertisementDesc1="",e.$scope.imageUrl1=""):2==a?(e.$scope.addOredit2="编辑二",
e.$scope.childSortName=s,e.$scope.childSortLink=o,e.$scope.onecategoryName=c,e.$scope.imageName1=r,e.$scope.advertisementDesc1=p,e.$scope.imageUrl1=l,l&&(e.$scope.realImageUrl1=l.substring(l.indexOf(".com")+4))):4==a&&(e.$scope.addOredit2="编辑三",e.$scope.childSortName=s,e.$scope.childSortLink=o,e.$scope.onecategoryName=c,e.$scope.imageName1=r,e.$scope.advertisementDesc1=p,e.$scope.imageUrl1=l,l&&(e.$scope.realImageUrl1=l.substring(l.indexOf(".com")+4))),1==i&&(e.$scope.link2=!0,e.$scope.common2=!1,e.$scope.advertisement1=!1),0==i&&(e.$scope.link2=!1,e.$scope.common2=!0,e.$scope.advertisement1=!1),2==i&&(e.$scope.link2=!1,e.$scope.common2=!1,e.$scope.advertisement1=!0),e.$scope.childSortAlert=!e.$scope.childSortAlert,e.$scope.addChildSortOk=function(){if(1==e.$scope.common2){if((e.$scope.childSortName||[]).length>16)return alert("分类名称字数限制16字符以内"),!1;if("编辑二"==e.$scope.addOredit2||"编辑三"==e.$scope.addOredit2)var s={categoryType:0,categoryName:e.$scope.childSortName,parentId:t};else{var s={categoryType:0,categoryName:e.$scope.childSortName,parentId:t};"添加二"==e.$scope.addOredit2&&(s.position=0==$(".first>li").eq(g).closest("li").find(".second>li").length?1:parseInt($(".first>li").eq(g).closest("li").find(".second>li").last().attr("position"))+1),"添加三"==e.$scope.addOredit2&&(s.position=0==$(".second>li").eq(g).closest("li").find(".three>li").length?1:parseInt($(".second>li").eq(g).closest("li").find(".three>li").last().attr("position"))+1)}if(!s.categoryName)return void alert("数据不完整")}if(1==e.$scope.link2){if((e.$scope.childSortName||[]).length>16)return alert("分类名称字数限制16字符以内"),!1;if("编辑"==e.$scope.addOredit2)var s={categoryType:1,categoryName:e.$scope.childSortName,parentId:t,categoryUrl:e.$scope.childSortLink};else{var s={categoryType:1,categoryName:e.$scope.childSortName,parentId:t,categoryUrl:e.$scope.childSortLink};"添加二"==e.$scope.addOredit2&&(s.position=0==$(".first>li").eq(g).closest("li").find(".second>li").length?1:parseInt($(".first>li").eq(g).closest("li").find(".second>li").last().attr("position"))+1),"添加三"==e.$scope.addOredit2&&(s.position=0==$(".second>li").eq(g).closest("li").find(".three>li").length?1:parseInt($(".second>li").eq(g).closest("li").find(".three>li").last().attr("position"))+1)}if(!s.categoryName||!s.categoryUrl)return void alert("数据不完整")}if(1==e.$scope.advertisement1){if((e.$scope.childSortName||[]).length>16)return alert("分类名称字数限制16字符以内"),!1;if((e.$scope.imageName1||[]).length>32)return alert("图片名称字数限制32字符以内"),!1;if((e.$scope.advertisementDesc1||[]).length>24)return alert("广告描述字数限制24字符以内"),!1;if("编辑二"==e.$scope.addOredit2||"编辑三"==e.$scope.addOredit2)var s={categoryType:2,categoryName:e.$scope.childSortName,categoryUrl:e.$scope.childSortLink,imageName:e.$scope.imageName1,advertisementDesc:e.$scope.advertisementDesc1,imageUrl:e.$scope.realImageUrl1,parentId:t};else{var s={categoryType:2,categoryName:e.$scope.childSortName,categoryUrl:e.$scope.childSortLink,imageName:e.$scope.imageName1,advertisementDesc:e.$scope.advertisementDesc1,imageUrl:e.$scope.realImageUrl1,parentId:t};"添加二"==e.$scope.addOredit2&&(s.position=0==$(".first>li").eq(g).closest("li").find(".second>li").length?1:parseInt($(".first>li").eq(g).closest("li").find(".second>li").last().attr("position"))+1),"添加三"==e.$scope.addOredit2&&(s.position=0==$(".second>li").eq(g).closest("li").find(".three>li").length?1:parseInt($(".second>li").eq(g).closest("li").find(".three>li").last().attr("position"))+1)}if(!(s.categoryName&&s.categoryUrl&&s.imageName&&s.advertisementDesc&&s.imageUrl))return void alert("数据不完整")}"添加二"==e.$scope.addOredit2||"添加三"==e.$scope.addOredit2?e.$courseCategorySrv.addCourseCategory(s).then(function(t){1==t.status&&"success"==t.message&&(e.$scope.childSortName="",e.$scope.childSortLink="",e.$scope.imageName1="",e.$scope.advertisementDesc1="",e.$scope.imageUrl1="",e.$scope.childSortAlert=!e.$scope.childSortAlert,n())}):e.$courseCategorySrv.editCourseCategory(t,s).then(function(t){1==t.status&&"success"==t.message&&(e.$scope.childSortName="",e.$scope.imageName1="",e.$scope.advertisementDesc1="",e.$scope.childSortAlert=!e.$scope.childSortAlert,e.$scope.imageUrl1="",n())})},e.$scope.cancelAddChildSort=function(){e.$scope.childSortAlert=!e.$scope.childSortAlert}},e.$scope.delChildSortPop=function(t,s){e.$scope.deleteChildHeadTitle=s,e.$scope.deleteChildSort=!e.$scope.deleteChildSort,e.$scope.delChildSortOk=function(){e.$courseCategorySrv.deleteCourseCategory(t).then(function(t){1==t.status&&"success"==t.message&&(e.$scope.deleteChildSort=!e.$scope.deleteChildSort,n())})},e.$scope.canDelChildSort=function(){e.$scope.deleteChildSort=!e.$scope.deleteChildSort}};var a={total:20,totalPage:6,pageSize:20},i=[],c=[];e.$scope.searchResult=!1;var r=function(t){if(s=e.$scope.searchText||e.$scope.classifyName||"",""==s)c=i;else{c=[];for(var n=0;n<i.length;n++){var r=String(i[n].classId);r.indexOf(s)==-1&&i[n].className.indexOf(s)==-1||c.push(i[n])}}return 0==c.length&&(e.$scope.searchResult=!0,e.$scope.dataList=!1),c.length>0&&(e.$scope.searchResult=!1,e.$scope.dataList=!0),(o?c:i).slice((t-1)*a.pageSize,(t-1)*a.pageSize+a.pageSize)};e.$scope.courseDataSource;var l=function(t){e.$scope.checkedSource={},e.$courseCategorySrv.getCategoryCourseData(t).then(function(t){i=t.data||[],e.$scope.courseDataSource=t.data||[],e.$scope.totalClassNum=t.data.length||0,e.$scope.courseClassList=r(1)||[],e.$scope.courseClassList.length>0&&(e.$scope.noClass=!1,e.$scope.hasClass=!0,e.$scope.dataList=!0),e.$scope.checkClassList=[];for(var s=0,n=i.length;s<n;s++){var l=i[s];l&&(e.$scope.checkedSource["_"+l.classId]=l),e.$scope.checkClassList.push({classId:l.classId,className:l.className,position:l.position})}if(a.total=o?c.length:i.length,e.$scope.total=a.total,a.totalPage=Math.ceil(a.total/a.pageSize),e.$scope.ngPaginationConfig.pageCount=a.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=a.totalPage>10?10:a.totalPage,e.$scope.ngPaginationConfig.pagenums=[],0==e.$scope.ngPaginationConfig.pagenums.length)for(var p=0;p<e.$scope.ngPaginationConfig.visiblePageCount;p++)e.$scope.ngPaginationConfig.pagenums.push(p+1);e.$scope.$apply()})};e.$scope.addcategoryName=null,e.$scope.addcategoryId=null,e.$scope.urlLink=!1,e.$scope.noClass=!1,e.$scope.hasClass=!1;var p="";e.$scope.parentSortShowClass=function(t,s,n,i){i.stopPropagation(),p=t,l(t),e.$scope.getCheckClassIdList=[],e.$scope.searchText="",0==n&&(e.$scope.urlLink=!1,e.$courseCategorySrv.getCategoryCourseData(t).then(function(t){0==(t.data||[]).length&&(e.$scope.noClass=!0,e.$scope.hasClass=!1,e.$scope.dataList=!1,e.$scope.$apply())}),e.$scope.courseClassList&&0==e.$scope.courseClassList.length&&(e.$scope.noClass=!0,e.$scope.hasClass=!1,e.$scope.dataList=!1,e.$scope.advertisementLink=!1),e.$scope.searchResult=!1),1==n&&(e.$scope.urlLink=!0,e.$scope.noClass=!1,e.$scope.hasClass=!1,e.$scope.searchResult=!1,e.$scope.$apply(),e.$scope.advertisementLink=!1),2==n&&(e.$scope.urlLink=!1,e.$scope.advertisementLink=!0,e.$scope.noClass=!1,e.$scope.hasClass=!1,e.$scope.searchResult=!1),e.$scope.addcategoryId=t,e.$scope.addcategoryName=s,o=!1,e.$scope.searchClassList=function(){o=!0,e.$scope.ngPaginationConfig.pagenums=[],l(t)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.searchClassList()},e.$scope.pageCount=function(s){a.pageSize=s,e.$scope.ngPaginationConfig.pagenums=[],l(t)}},e.$scope.onPageChange=function(){e.$scope.courseClassList=r(this.currentPage)},e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var g="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",u=e.$scope.$new();$("#pagination").append(e.$compile(g)(u)[0]),e.$scope.removeCategoryCourse=function(t){e.$courseCategorySrv.deleteCategoryCourse(t.classCategoryId).then(function(e){1==e.status&&"success"==e.message&&l(t.categoryId)})},e.$scope.tenantClassList=null;e.$scope.addClassPop=!0;var d=1,f=5,m="";e.$scope.addSortClassPop=function(){t(d,f,m),e.$scope.addClassPop=!e.$scope.addClassPop,e.$scope.getCheckClassIdList=e.$scope.checkClassList},e.$scope.showChecked=function(){$(".classlart i").each(function(){var t=$(this);$.each(e.$scope.getCheckClassIdList,function(e,s){s.classId==t.attr("data")&&(t.removeClass("icon-unchecked"),t.addClass("icon-checked"))})})},e.$scope.classifySearch=function(){e.$scope.ngPaginationConfig.pagenums=[],m=e.$scope.classifyName||"",t(d,f,m)},e.$scope.myKeyUp=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.classifySearch()},e.$scope.ngPaginationConfigs={pageCount:6,visiblePageCount:6,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var h="<gxbtmpagination conf='ngPaginationConfigs' page-count='ngPaginationConfigs.pageCount' current-page='currentPage' on-page-change='onPageChanges()'></gxbtmpagination>",C=e.$scope.$new();$("#addClassify").append(e.$compile(h)(C)[0]),e.$scope.onPageChanges=function(){t(this.currentPage,f,m)},e.$scope.onInit=function(t){this.a=!!e.$scope.checkedSource["_"+t.classId]},e.$scope.checkedSource={},e.$scope.getCheckClassIdList=[],e.$scope.checkItems=function(t,s){t?(e.$scope.checkedSource["_"+s.classId]=s,e.$scope.getCheckClassIdList.push({classId:s.classId,className:s.className})):(delete e.$scope.checkedSource["_"+s.classId],$.each(e.$scope.getCheckClassIdList,function(t,o){o.classId==s.classId&&e.$scope.getCheckClassIdList.splice(t,1)}))},e.$scope.remove=function(t){$(".classlart i").each(function(){var s=$(this);$.each(e.$scope.getCheckClassIdList,function(e,o){t==s.attr("data")&&(s.removeClass("icon-checked"),s.addClass("icon-unchecked"))})}),delete e.$scope.checkedSource["_"+t],$.each(e.$scope.getCheckClassIdList,function(s,o){o.classId==t&&e.$scope.getCheckClassIdList.splice(s,1)})},e.$scope.cancelClassPop=function(){$(".qxclass").removeClass("current"),e.$scope.getCheckClassIdList=[],e.$scope.addClassPop=!e.$scope.addClassPop},e.$scope.qx=!0,e.$scope.quanxuan=function(t){e.$scope.qx=!t,t?$(".classlart i").each(function(){$(this).removeClass("icon-unchecked"),$(this).addClass("icon-checked");var t=$(this),s=!0;e.$scope.getCheckClassIdList&&$.each(e.$scope.getCheckClassIdList,function(e,o){return o.classId==t.attr("data")&&(s=!1),s}),1==s&&e.$scope.getCheckClassIdList.push({classId:t.attr("data"),className:t.attr("main")})}):$(".classlart i").each(function(){$(this).removeClass("icon-checked"),$(this).addClass("icon-unchecked");var t=$(this);$.each(e.$scope.getCheckClassIdList,function(s,o){o.classId==t.attr("data")&&e.$scope.getCheckClassIdList.splice(s,1)})})},e.$scope.classsubmit=function(){var t=[];$.each(e.$scope.getCheckClassIdList,function(e,s){s.position?t.push({classId:s.classId,position:s.position}):t.push({classId:s.classId})}),e.$goodCourseSrv.addcategoryclass(e.$scope.addcategoryId,t).then(function(t){t.status&&(e.$scope.addClassPop=!e.$scope.addClassPop,l(e.$scope.addcategoryId))})},e.$scope.moveUp=function(t,s,o){if(0!=o){var n=[{classCategoryId:t,position:e.$scope.courseClassList[o-1].position},{classCategoryId:e.$scope.courseClassList[o-1].classCategoryId,position:s}];e.$goodCourseSrv.ClassifymoveUpData(n).then(function(e){1==e.status&&l(p)})}else alert("已经是第一个,不可再上移啦")},e.$scope.moveDown=function(t,s,o){if(o!=e.$scope.courseClassList.length){var n=[{classCategoryId:t,position:e.$scope.courseClassList[o].position},{classCategoryId:e.$scope.courseClassList[o].classCategoryId,position:s}];e.$goodCourseSrv.ClassifymoveUpData(n).then(function(e){1==e.status&&l(p)})}else alert("已经是最后一个了,不可再下移啦")},e.$scope.sortableOpts={handle:".drag-handle",ghostClass:"ghost",animation:150,onEnd:function(e){var t,s=$(e.item).attr("categoryId");t=e.newIndex>e.oldIndex?$(e.item).prev("li").attr("position"):$(e.item).next("li").attr("position"),v(s,t)}},e.$scope.sortableOption={handle:".drag-handle",ghostClass:"ghost",animation:150,onEnd:function(t){var s,o,n=$(t.item).attr("classCategoryId"),a=$(t.item).attr("position"),i=$(t.item).next("tr").attr("classCategoryId"),c=$(t.item).next("tr").attr("position");a>c?s=[{classCategoryId:n,position:c},{classCategoryId:i,position:a}]:($(".classcategory").each(function(){var e=$(this);e.attr("position")==c-1&&(o=e.attr("classCategoryId"))}),s=[{classCategoryId:n,position:c-1},{classCategoryId:o,position:a}]),e.$goodCourseSrv.ClassifymoveUpData(s).then(function(e){1==e.status&&l(p)})}};var v=function(t,s){e.$courseCategorySrv.updateClassify(t,s).then(function(e){e&&e.status&&n()})}},e.inheritFromCtrl(e.admin.courseClassifiyCtrl),e.registerDependency("gxb.controllers.admin.courseClassifiyCtrl",["gxb.services.tenants.courseCategorySrv","gxb.services.tenants.goodCourseSrv"]),e.registerView("gxb.controllers.admin.courseClassifiyCtrl","administration/classification/index")}(gxb.controllers,gxb.utils),function(e,t){e.admin.carouseCourseCtrl=function(e){},e.inheritFromCtrl(e.admin.carouseCourseCtrl),e.registerDependency("gxb.controllers.admin.carouseCourseCtrl",[]),e.registerView("gxb.controllers.admin.carouseCourseCtrl","administration/coursetranslation/carousecourse")}(gxb.controllers,gxb.utils),function(e,t){e.admin.editMessageCtrl=function(e){var s=e.$state.params.id;e.$studentListSrv.getStudentTempById(s).then(function(t){e.$scope.studentlist=t||null,e.$scope.subdis=t.educationQualification,e.$scope.sub=t.discipline,e.$scope.importFlaginfo=t.userId?"解除认证":"",e.$scope.jbshow=!0,t.mobile||(e.$scope.jbshow=!1),t.email||(e.$scope.jbshow=!1),t.userId||(e.$scope.jbshow=!1),e.$scope.$apply()}),e.$scope.sexy=[{type:"male",text:"男"},{type:"female",text:"女"}],e.$scope.education=[{type:"1",text:"高中"},{type:"2",text:"中专"},{type:"3",text:"大专"},{type:"4",text:"本科"},{type:"5",text:"研究生"},{type:"6",text:"博士及以上"},{type:"7",text:"其它"}],e.$scope.discip=[{type:"1",text:"工学"},{type:"2",text:"理学"},{type:"3",text:"农学"},{type:"4",text:"管理学"},{type:"5",text:"经济学"},{type:"6",text:"医学"},{type:"7",text:"教育学"},{type:"8",text:"军事学"},{type:"9",text:"哲学"},{type:"10",text:"历史学"},{type:"11",text:"文学"},{type:"12",text:"法学"},{type:"13",text:"艺术学"},{type:"14",text:"其他"}],e.$scope.select=function(t){e.$scope.studentlist.gender=t.type},e.$scope.study=!0,e.$scope.subject=function(t){e.$scope.study=!t},e.$scope.subjectOption=function(t){e.$scope.studydis=!0,e.$scope.subdis=t,e.$scope.studentlist.educationQualification=t},e.$scope.studydis=!0,e.$scope.subjectdis=function(t){e.$scope.studydis=!t},e.$scope.subjectOptiondis=function(t){e.$scope.study=!0,e.$scope.sub=t,e.$scope.studentlist.discipline=t},e.$scope.savestudent=function(){return null==e.$scope.studentlist.no||""==e.$scope.studentlist.no?(alert("学号不能为空"),!1):null==e.$scope.studentlist.name||""==e.$scope.studentlist.name?(alert("真实姓名不能为空"),!1):(e.$scope.student={no:e.$scope.studentlist.no,name:e.$scope.studentlist.name,mobile:e.$scope.studentlist.mobile,email:e.$scope.studentlist.email,gender:e.$scope.studentlist.gender,schoolDepartment:e.$scope.studentlist.schoolDepartment,major:e.$scope.studentlist.major,schoolGrade:e.$scope.studentlist.schoolGrade,schoolClass:e.$scope.studentlist.schoolClass,discipline:e.$scope.studentlist.discipline,educationQualification:e.$scope.studentlist.educationQualification,id:e.$scope.studentlist.id,studentId:e.$scope.studentlist.studentId,userId:e.$scope.studentlist.userId},void e.$studentListSrv.updateStudentTemp(e.$scope.student).then(function(e){e.status?(alert("保存成功"),window.location.href=t.urlUtils.resolveUrl("/admin/#/admin")):alert(e.message)}))},e.$scope.reauth=!0,e.$scope.removeauthtk=function(t){e.$scope.reauth=!t},e.$scope.removeauth=function(){e.$scope.authdata={studentId:e.$scope.studentlist.studentId,userId:e.$scope.studentlist.userId,id:e.$scope.studentlist.id},e.$studentListSrv.removeauth(e.$scope.authdata).then(function(e){e.status&&window.location.reload()})},e.$scope.remobile=!0,e.$scope.removemobile=function(t){e.$scope.remobile=!t},e.$scope.sureremovemobile=function(){e.$scope.remobile=!0,e.$scope.userVo={userId:e.$scope.studentlist.userId},e.$studentListSrv.removemobile(e.$scope.userVo).then(function(e){e?(alert("解绑成功"),window.location.reload()):alert("解绑失败")})}},e.inheritFromCtrl(e.admin.editMessageCtrl),e.registerDependency("gxb.controllers.admin.editMessageCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.editMessageCtrl","administration/editmessage/index")}(gxb.controllers,gxb.utils),function(e,t){e.admin.helperCtrl=function(e){var t=1,s=5,o="",n="";e.$scope.helpList=null,e.$scope.deleteParentSort=!1,e.$scope.deleteChildSort=!1,e.$scope.erdeleteParentSort=!0,e.$scope.noClass=!1,e.$scope.hasClass=!1,e.$scope.dataList=!1,e.$scope.addClassPop=!1,e.$scope.searchResult=!1,e.$scope.helpList=[],e.$scope.getHelpList=function(){e.$helperSrv.getByTenantId().then(function(t){e.$scope.helpList=t.data||[],e.$scope.$apply()},function(e){})},e.$scope.getHelpList(),e.$scope.clearValue=function(){e.$scope.parentSortName="",e.$scope.parentSortLink="",e.$scope.childSortName="",e.$scope.childSortLink=""},e.$scope.editadd=!1,e.$scope.navname="",e.$scope.helpCenterId,e.$scope.onrOrTwo,e.$scope.onrOrTwoName,e.$scope.editOrAdd=function(t,s,o,n,a){e.$scope.helpCenterId=t,e.$scope.onrOrTwo=n,e.$scope.onrOrTwoName=a,"edit"==o?(e.$scope.addOredit="编辑",e.$scope.navname=s):(e.$scope.navname="",e.$scope.addOredit="添加"),e.$scope.editadd=!0,e.$scope.$apply()},e.$scope.okEditOrAdd=function(){var t;if(t="addone"==e.$scope.onrOrTwo?$("#canDrap>li").length>0?parseInt($("#canDrap>li").last().attr("position"))+1:1:0==$("#canDrap>li").eq(e.$scope.onrOrTwoName).closest("li").find(".second>li").length?1:parseInt($("#canDrap>li").eq(e.$scope.onrOrTwoName).closest("li").find(".second>li").last().attr("position"))+1,""==e.$scope.navname)return alert("请输入导航名称"),!1;if(e.$scope.navname.length>50)return alert("导航名称字数请限制在50个字以内"),!1;if("编辑"==e.$scope.addOredit){var s={helpCenterId:e.$scope.helpCenterId,navigationName:e.$scope.navname};e.$helperSrv.editHelpName(s).then(function(t){t.status&&(e.$scope.editadd=!1,e.$scope.getHelpList()),e.$scope.$apply()})}else{var s={parentId:e.$scope.helpCenterId,navigationName:e.$scope.navname,position:t};e.$helperSrv.addHelpName(s).then(function(t){t.status&&(e.$scope.editadd=!1,e.$scope.getHelpList()),e.$scope.$apply()})}},e.$scope.cancelParentAlert=function(){e.$scope.editadd=!e.$scope.editadd},e.$scope.cancelDelParentSort=function(){e.$scope.deleteParentSort=!e.$scope.deleteParentSort},e.$scope.deleteParent=function(t,s,o){e.$scope.deleteParentSort=!0,e.$scope.deletename=s,e.$scope.erdel=o,e.$scope.helpCenterId=t,e.$scope.$apply()},e.$scope.delParentOk=function(){e.$helperSrv.delHelp(e.$scope.helpCenterId).then(function(t){t.status&&(e.$scope.deleteParentSort=!1,window.location.reload()),e.$scope.$apply()})};var a="",i=function(t,s,o,n,i,c){0==e.$scope.searchOne&&($(".valclass").val(""),i="",c=""),e.$helperSrv.getBodyByTenantId(a,t,s,o,i,c).then(function(t){if(e.$scope.navigationName=n,e.$scope.bodyList=t.data.dataList||[],e.$scope.totalnum=t.data.paging.total,0==e.$scope.bodyList.length?(1==e.$scope.searchOne?(e.$scope.searchResult=!0,e.$scope.hasClass=!0,e.$scope.noClass=!1):(e.$scope.noClass=!0,e.$scope.hasClass=!1,e.$scope.searchResult=!1),e.$scope.dataList=!1):(e.$scope.noClass=!1,e.$scope.hasClass=!0,e.$scope.dataList=!0,e.$scope.searchResult=!1),e.$scope.ngPaginationConfig.pageCount=t.data.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.data.paging.totalPage>5?5:t.data.paging.totalPage,e.$scope.ngPaginationConfig.pagenums=[],0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})};e.$scope.helpCenterIds,e.$scope.helpBodyList=function(a,r){e.$scope.helpCenterId=a,e.$scope.helpCenterIds=a,e.$scope.navigationName=r,e.$scope.navigationNames=r,e.$scope.ngPaginationConfig.pagenums=[],c(),t=1,e.$scope.searchOne=0,i(t,s,e.$scope.helpCenterId,e.$scope.navigationName,o,n)},e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var c=function(){var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",s=e.$scope.$new();$("#pagination").empty(),$("#pagination").append(e.$compile(t)(s)[0])};c(),e.$scope.onPageChange=function(){t=this.currentPage,i(t,s,e.$scope.helpCenterId,e.$scope.navigationName,o,n)},e.$scope.pageCount=function(a){e.$scope.ngPaginationConfig.pagenums=[],c(),s=a,i(t,s,e.$scope.helpCenterId,e.$scope.navigationName,o,n)},e.$scope.cancelDelHelpBody=function(){e.$scope.deleteChild=!e.$scope.deleteChild},e.$scope.deleteChild=!1,e.$scope.helpCenterBodyId,e.$scope.delHelpBody=function(t,s){e.$scope.deleteChild=!0,e.$scope.deletchildename=s,e.$scope.helpCenterBodyId=t,e.$scope.$apply()},e.$scope.delHelpBodyOk=function(){e.$helperSrv.delHelpBody(e.$scope.helpCenterBodyId).then(function(a){a.status&&(e.$scope.deleteChild=!1,e.$scope.ngPaginationConfig.pagenums=[],c(),t=1,e.$scope.searchOne=0,i(t,s,e.$scope.helpCenterId,e.$scope.navigationName,o,n)),e.$scope.$apply()})},e.$scope.cancelAddHelpBody=function(){e.$scope.addClassPop=!e.$scope.addClassPop},e.$scope.noticeModel={title:""},e.$scope.editorData={content:"",manualChange:null,size:{width:"100%",height:"100%"}},e.$scope.helpCenterBodyId,e.$scope.addoreditnames="",e.$scope.addHelpBody=function(t,s){"add"==s?(e.$scope.noticeModel.title="",e.$scope.editorData.content="",e.$scope.editorData.manualChange&&e.$scope.editorData.manualChange(),e.$scope.addoreditnames="添加"):(e.$scope.helpCenterBodyId=t,e.$helperSrv.detailHelpBody(t).then(function(t){e.$scope.noticeModel.title=t.data.title,e.$scope.editorData.body=t.data.body,e.$scope.editorData.content=e.$scope.editorData.body,e.$scope.editorData.manualChange&&e.$scope.editorData.manualChange(),e.$scope.$apply()}),e.$scope.addoreditnames="编辑"),e.$scope.addClassPop=!0,e.$scope.addchildename=e.$scope.navigationName,e.$scope.$apply()},e.$scope.addHelpBodyOk=function(){if(e.$scope.noticeModel.title.length>120)return alert("标题字数请限制在120个字以内"),!1;if(!e.$scope.noticeModel.title||!e.$scope.editorData.content)return void alert("数据不完整！");if(e.$scope.bodytextcontent=e.$scope.editorData.content,e.$scope.$apply(),"添加"==e.$scope.addoreditnames){var a={helpCenterId:e.$scope.helpCenterIds,title:e.$scope.noticeModel.title,body:e.$scope.editorData.content,bodyText:$(".bodycontent").html()};e.$helperSrv.addHelpBody(a).then(function(a){a.status&&(e.$scope.addClassPop=!1,e.$scope.ngPaginationConfig.pagenums=[],c(),t=1,e.$scope.searchOne=0,i(t,s,e.$scope.helpCenterIds,e.$scope.navigationName,o,n)),e.$scope.$apply()})}else{var a={helpCenterBodyId:e.$scope.helpCenterBodyId,title:e.$scope.noticeModel.title,body:e.$scope.editorData.content,bodyText:$(".bodycontent").html()};e.$helperSrv.editHelpBody(a).then(function(a){a.status&&(e.$scope.addClassPop=!1,e.$scope.ngPaginationConfig.pagenums=[],c(),t=1,e.$scope.searchOne=0,i(t,s,e.$scope.helpCenterIds,e.$scope.navigationName,o,n)),e.$scope.$apply()})}e.$scope.addClassPop=!1,e.$scope.$apply()},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.search()},e.$scope.search=function(){var a=$(".valclass").val();return null==a||""==a?(alert("请输入关键字"),!1):(o=a,t=1,e.$scope.searchOne=1,n="result",void i(t,s,e.$scope.helpCenterIds,e.$scope.navigationName,o,n))},e.$scope.sortableOpts={handle:".drag-handle",ghostClass:"ghost",animation:150,onEnd:function(e){var t,s=$(e.item).attr("helpCenterId");t=e.newIndex>e.oldIndex?$(e.item).prev("li").attr("position"):$(e.item).next("li").attr("position"),r(s,t)}};var r=function(t,s){e.$helperSrv.updatePosition(t,s).then(function(t){t&&t.status&&e.$scope.getHelpList()})}},e.inheritFromCtrl(e.admin.helperCtrl),e.registerDependency("gxb.controllers.admin.helperCtrl",["gxb.services.tenants.helperSrv"]),e.registerView("gxb.controllers.admin.helperCtrl","administration/helper/helper")}(gxb.controllers,gxb.utils),function(e,t){e.admin.indexCtrl=function(e){var s=20;if(e.$scope.tab=1,e.$scope.studentList=null,e.$scope.searching=null,e.$scope.filename=null,e.$scope.importres=!1,e.$scope.download_url=null,e.$scope.importdata=[],e.$scope.process=null,0!=gxb.utils.localStorageUtils.get("isHome")?(gxb.utils.localStorageUtils.set("currentPage",1),gxb.utils.localStorageUtils.set("certify",""),gxb.utils.localStorageUtils.set("keyword",""),e.$scope.tabs=0):gxb.utils.localStorageUtils.set("isHome",!0),gxb.utils.localStorageUtils.get("currentPage"))var o=gxb.utils.localStorageUtils.get("currentPage")||1;if(gxb.utils.localStorageUtils.get("certify")){var n=gxb.utils.localStorageUtils.get("certify")||"";e.$scope.tabs=gxb.utils.localStorageUtils.get("certify")}else{var n="";e.$scope.tabs=0}if(gxb.utils.localStorageUtils.get("keyword")){var a=gxb.utils.localStorageUtils.get("keyword")||"";e.$scope.searchText=a}else var a="";var i=function(t,s,o,n){e.$studentListSrv.loadStudentList(t,s,o,n).then(function(t){if(e.$scope.searching=c,c=!1,e.$scope.studentList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()},function(e){})},c=!1;e.$scope.search=function(){c=!0,a=e.$scope.searchText||"",e.$scope.ngPaginationConfig.pagenums=[],e.$scope.addPaging(),i(o,s,a,n),gxb.utils.localStorageUtils.set("keyword",a)};var r=0;e.$scope.rzsearch=function(t){""==t&&(r=0),0==t&&(r=2),1==t&&(r=1),gxb.utils.localStorageUtils.set("currentPage",1),gxb.utils.localStorageUtils.set("certify",r),n=t,e.$scope.ngPaginationConfig.pagenums=[],e.$scope.addPaging(),i(o,s,a,n)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.search()},e.$scope.pageCount=function(t){s=t,gxb.utils.localStorageUtils.set("currentPage",1),e.$scope.ngPaginationConfig.pagenums=[],e.$scope.addPaging(),i(o,s,a,n),gxb.utils.localStorageUtils.set("currentPage",1)},e.$scope.exportAll=function(){window.location=gxb.utils.urlUtils.resolveUrl("/tenant/studentTemp/exportAll/api")},e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]},e.$scope.onPageChange=function(){i(this.ngPaginationConfig.currentPage,s,a,n),gxb.utils.localStorageUtils.set("currentPage",this.ngPaginationConfig.currentPage)},e.$scope.addPaging=function(){e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:gxb.utils.localStorageUtils.get("currentPage")||1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='ngPaginationConfig.currentPage' on-page-change='onPageChange()'></gxbtmpagination>";$("#pagination").empty(),$("#pagination").append(e.$compile(t)(e.$scope)[0])},e.$scope.addPaging(),i(o,s,a,n),e.$scope.imp=!0,e.$scope["import"]=function(t){e.$scope.filename=null,e.$scope.importdata=[],e.$scope.importres=!1,e.$scope.importres1=!1,e.$scope.imp=!t},e.$scope.uploadfilemodel=function(){window.location.href="//gxbfile-gs.gaoxiaobang.com/static/templates/学生信息批量导入模板.xls"},e.$scope.importres1=!1,e.$scope.errormessage,e.$scope.uploadFile=function(t){var s=new FormData;e.$scope.filename=t[0].name,s.append("file",t[0]),e.$studentListSrv.uploadFile(s).then(function(t){t.status?($("#file").replaceWith('  <input type="file" id="file" class="gxb-btn-submit gxb-btn-ls" name="file"  onchange="angular.element(this).scope().uploadFile(this.files)"/>'),e.$scope.importres=!0,e.$scope.importres1=!1,e.$scope.importdata=t.data,e.$scope.download_url=t.data.download_url):(e.$scope.importres=!1,e.$scope.importres1=!0,e.$scope.errormessage=t.message),window.clearInterval(o),e.$scope.process="完成",e.$scope.$apply()});var o=window.setInterval(function(){e.$studentListSrv.processStatus().then(function(t){e.$scope.process=t.process,e.$scope.$apply()})},1e3)},e.$scope.downloadUrl=function(e){null!=e&&gxb.utils.downloadUtils.downloadFile(e)},e.$scope.linkTo=function(e){window.location=t.urlUtils.resolveUrl(e),gxb.utils.localStorageUtils.set("isHome",!1)},e.$scope.userId="",e.$scope.resetpwd=function(t){e.$scope.password=!1,e.$scope.userId=t},e.$scope.password=!0,e.$scope.reset=function(t){e.$scope.password=!0,e.$studentListSrv.resetPassword(t).then(function(t){1==t.status?(alert("重置成功"),e.$scope.$apply()):(alert("重置失败"),e.$scope.$apply())},function(){console.log("修改密码失败")})}},e.inheritFromCtrl(e.admin.indexCtrl),e.registerDependency("gxb.controllers.admin.indexCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.indexCtrl","administration/index")}(gxb.controllers,gxb.utils),function(e,t){e.admin.addNewsCtrl=function(e){e.$scope.noticeModel={title:"",body:""},e.$scope.editorData={content:"",size:{height:"300px"}},e.$scope.saveNews=function(){return e.$scope.noticeModel.body=e.$scope.editorData.content,e.$scope.noticeModel.body&&e.$scope.noticeModel.title?void e.$adminNewsSrv.addNews(e.$scope.noticeModel).then(function(e){1==e.status&&"success"==e.message&&(window.location.href=t.urlUtils.resolveUrl("/admin/#/news"))}):void alert("数据不完整！")}},e.inheritFromCtrl(e.admin.addNewsCtrl),e.registerDependency("gxb.controllers.admin.addNewsCtrl",["gxb.services.tenants.adminNewsSrv"]),e.registerView("gxb.controllers.admin.addNewsCtrl","administration/news/addnews")}(gxb.controllers,gxb.utils),function(e,t){e.admin.editNewsCtrl=function(e){e.$scope.noticeModel={title:"",body:""},e.$scope.editorData={content:"",size:{height:"300px"}};var s=e.$state.params.id,o=function(){e.$newsDetailSrv.loadNewsDetail(s).then(function(t){e.$scope.noticeModel.title=t.data.title,e.$scope.noticeModel.body=t.data.body,e.$scope.editorData.content=t.data.body,e.$scope.$apply()})};o();var n=function(){return e.$scope.noticeModel.body=e.$scope.editorData.content,e.$scope.noticeModel.body&&e.$scope.noticeModel.title?void e.$adminNewsSrv.editNews(s,e.$scope.noticeModel).then(function(e){1==e.status&&"success"==e.message&&(window.location.href=t.urlUtils.resolveUrl("/admin/#/news"))}):void alert("数据不完整！")};e.$scope.saveNews=function(){n()}},e.inheritFromCtrl(e.admin.editNewsCtrl),e.registerDependency("gxb.controllers.admin.editNewsCtrl",["gxb.services.tenants.adminNewsSrv","gxb.services.tenants.newsDetailSrv"]),e.registerView("gxb.controllers.admin.editNewsCtrl","administration/news/editnews")}(gxb.controllers,gxb.utils),function(e,t){e.admin.newsCtrl=function(e){e.$studentListSrv.gettenant().then(function(t){e.$scope.tenant=t.data,e.$scope.tenant.newsTitle=e.$scope.tenant.newsTitle||"新闻",e.$scope.$apply()}),e.$scope.updatatenant=function(){var t={newsTitle:e.$scope.tenant.newsTitle};t.newsTitle.length<=15?e.$studentListSrv.updatatenant(t).then(function(e){window.location.reload()}):alert("字数请限制在15汉字之内")},e.$scope.newsList=null,e.$scope.deleteNewsItem=null;var t=function(){e.$newsSrv.loadNewses(1,"").then(function(t){e.$scope.newsList=t.dataList||[],e.$scope.$apply()})},s=function(s,o){var n=o?{position:-1}:{};e.$adminNewsSrv.isSetTop(s,n).then(function(e){1==e.status&&"success"==e.message&&t()})};e.$scope.deleteNews=function(t){e.$scope.deleteNewsItem=t},e.$scope.deleteOk=function(){e.$adminNewsSrv.deleteNews(e.$scope.deleteNewsItem.id).then(function(s){e.$scope.deleteNewsItem=null,t()})},e.$scope.closeWindow=function(){e.$scope.deleteNewsItem=null},e.$scope.setTop=function(e){s(e,!0)},e.$scope.cancelTop=function(e){s(e,!1)},t()},e.inheritFromCtrl(e.admin.newsCtrl),e.registerDependency("gxb.controllers.admin.newsCtrl",["gxb.services.tenants.newsSrv","gxb.services.tenants.adminNewsSrv","gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.newsCtrl","administration/news/news");
}(gxb.controllers,gxb.utils),function(e,t){e.admin.addNoticeCtrl=function(e){e.$scope.noticeModel={title:"",desc:""},e.$scope.editorData={content:"",size:{height:"300px"}},e.$scope.saveNotice=function(){return e.$scope.noticeModel.desc=e.$scope.editorData.content,e.$scope.noticeModel.title.length>32?void alert("标题字数请限制在32个汉字以内"):e.$scope.noticeModel.desc&&e.$scope.noticeModel.title?void e.$announceSrv.addAnnounce(e.$scope.noticeModel).then(function(e){1==e.status&&"success"==e.message&&(window.location.href=t.urlUtils.resolveUrl("/admin/#/notice"))}):void alert("数据不完整！")}},e.inheritFromCtrl(e.admin.addNoticeCtrl),e.registerDependency("gxb.controllers.admin.addNoticeCtrl",["gxb.services.tenants.announceSrv"]),e.registerView("gxb.controllers.admin.addNoticeCtrl","administration/notice/addnotice")}(gxb.controllers,gxb.utils),function(e,t){e.admin.editNoticeCtrl=function(e){var s=e.$state.params.id;e.$scope.noticeModel={title:"",desc:""},e.$scope.editorData={content:"",size:{height:"300px"}};var o=function(){e.$announceDetailSrv.loadAnnounceDetail(s).then(function(t){e.$scope.noticeModel.title=t.data.title,e.$scope.noticeModel.desc=t.data.desc,e.$scope.editorData.content=t.data.desc})};e.$scope.saveNotice=function(){return e.$scope.noticeModel.desc=e.$scope.editorData.content,e.$scope.noticeModel.title.length>32?void alert("标题字数请限制在32个汉字以内"):e.$scope.noticeModel.desc&&e.$scope.noticeModel.title?void e.$announceSrv.editAnnounce(s,e.$scope.noticeModel).then(function(e){1==e.status&&"success"==e.message&&(window.location.href=t.urlUtils.resolveUrl("/admin/#/notice"))}):void alert("数据不完整！")},o()},e.inheritFromCtrl(e.admin.editNoticeCtrl),e.registerDependency("gxb.controllers.admin.editNoticeCtrl",["gxb.services.tenants.announceDetailSrv","gxb.services.tenants.announceSrv"]),e.registerView("gxb.controllers.admin.editNoticeCtrl","administration/notice/editnotice")}(gxb.controllers,gxb.utils),function(e,t){e.admin.noticeCtrl=function(e){e.$scope.noticeList=null,e.$scope.deleteNoticeItem=null;var t=function(){e.$announceSrv.loadAnnounceList(1,"").then(function(t){e.$scope.noticeList=t.dataList||[],e.$scope.$apply()})},s=function(s,o){var n=o?{position:-1}:{};e.$announceSrv.isTop(s,n).then(function(e){1==e.status&&"success"==e.message&&t()})};e.$scope.deleteNotice=function(t){e.$scope.deleteNoticeItem=t},e.$scope.deleteOk=function(){e.$announceSrv.deleteAnnounce(e.$scope.deleteNoticeItem.id).then(function(s){e.$scope.deleteNoticeItem=null,t()})},e.$scope.closeWindow=function(){e.$scope.deleteNoticeItem=null},e.$scope.setTop=function(e){s(e,!0)},e.$scope.cancelTop=function(e){s(e,!1)},t()},e.inheritFromCtrl(e.admin.noticeCtrl),e.registerDependency("gxb.controllers.admin.noticeCtrl",["gxb.services.tenants.announceSrv"]),e.registerView("gxb.controllers.admin.noticeCtrl","administration/notice/notice")}(gxb.controllers,gxb.utils),function(e,t){e.admin.carouselCtrl=function(e){e.$scope.uploadData={fileElementID:"slide_file_element",isImage:!0,autoupload:!0,cutImage:!0,size:["1200*360","790*350","750*468","1242*776","1080*675"],cdnPrefix:gxb.settings.cdn.wangsu.getPaths().uploads_banner_prefix,cdnBucket:gxb.settings.cdn.wangsu.getBuckets().imageBucket,onSuccess:function(t){e.$scope.sliderItem.imageUrl=t.absoluteUrl,e.$scope.sliderItem.realImageUrl=t.relativeUrl,e.$scope.$apply()}},e.$scope.link=function(e){window.location.href=gxb.utils.urlUtils.resolveUrl(e)};var s=function(t){e.$scope.isAddEvent=t};e.$scope.sliders=null,e.$scope.isAddEvent=null;var o=function(){return{title:"",imageUrl:"",realImageUrl:"",url:"",id:"",position:1,assetId:""}};e.$scope.sliderItem=null,e.$scope.deleteSliderItem=null;var n=function(){e.$carouselSrv.getCarouselList().then(function(t){e.$scope.sliders=t.data||[],e.$scope.$apply()})};e.$scope.onAddEvent=function(){s(!0),e.$scope.sliderItem=o()},e.$scope.closeWindow=function(){e.$scope.sliderItem=null,e.$scope.isAddEvent=null},e.$scope.saveSlider=function(){var s=e.$scope.sliderItem,o={title:s.title,url:s.url,appUrl:s.appUrl,imageUrl:t.urlUtils.getCDNFilePath(s.realImageUrl||s.imageUrl),position:s.position||e.$scope.sliders.length};if(e.$scope.isAddEvent||(o.id=s.id,o.assetId=s.assetId),!o.title||!o.imageUrl||!e.$scope.isAddEvent&&!o.id)return void alert("数据不完整");var a=function(t){1==t.status&&"success"==t.message&&(e.$scope.closeWindow(),n())};e.$scope.isAddEvent?e.$carouselSrv.addCarousel(o).then(a):e.$carouselSrv.editCarousel(o.id,o).then(a)},e.$scope.onEditEvent=function(t){e.$scope.sliderItem=t,e.$scope.isAddEvent=!1},e.$scope.onDeleteEvent=function(t){e.$scope.deleteSliderItem=t},e.$scope.onDeleteEventOK=function(){e.$carouselSrv.deleteCarousel(e.$scope.deleteSliderItem.id).then(function(t){e.$scope.onDeleteEventCancel(),n()})},e.$scope.onDeleteEventCancel=function(){e.$scope.deleteSliderItem=null},n()},e.inheritFromCtrl(e.admin.carouselCtrl),e.registerDependency("gxb.controllers.admin.carouselCtrl",["gxb.services.tenants.carouselSrv","gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.carouselCtrl","administration/pagemain/carousel")}(gxb.controllers,gxb.utils),function(e,t){e.admin.endPageCtrl=function(e){e.$scope.editorData={content:"",size:{height:"200px"}},e.$scope.linkModel={title:"",url:""},e.$scope.aboutUsModel={title:"",body:""},e.$scope.link=function(e){window.location=gxb.utils.urlUtils.resolveUrl(e)},e.$scope.links=[],e.$scope.isAboutUs=!1,e.$scope.isAddEvent=!1,e.$scope.sightItem=!1,e.$scope.deleteSightItem=!1,e.$scope.editOrAdd=!1,e.$scope.editAboutUs=!1;var t=function(){e.$endPageSrv.getLinkList(gxb.settings.identifier.getTenantID()).then(function(t){1==t.status&&"success"==t.message&&t.data&&t.data.length>0&&(e.$scope.links=t.data||[],e.$scope.$apply())})};t();var s=function(){e.$endPageSrv.getAboutUs(gxb.settings.identifier.getTenantID()).then(function(t){t&&(e.$scope.isAboutUs=!0,e.$scope.aboutUsModel.body=t.body,e.$scope.editorData.content=t.body,e.$scope.aboutUsModel.title=t.title,e.$scope.$apply())})};s(),e.$scope.addAboutUs=function(){e.$scope.editOrAdd=!0,e.$scope.editAboutUs=!0,$("body").find("div[data='editorData']").find(".edui-editor-iframeholder").css({height:"auto","min-height":"200px"})},e.$scope.editAboutUsBtn=function(){e.$scope.editOrAdd=!1,e.$scope.editAboutUs=!0,$("body").find("div[data='editorData']").find(".edui-editor-iframeholder").css({height:"auto","min-height":"200px"})},e.$scope.closeAboutUs=function(){e.$scope.editAboutUs=!1},e.$scope.saveAboutUs=function(){return e.$scope.aboutUsModel.body=e.$scope.editorData.content,e.$scope.aboutUsModel.title.length>32?void alert("标题字数请限制在32个汉字以内"):e.$scope.aboutUsModel.body.length>99999?void alert("标题字数请限制在99999个汉字以内"):e.$scope.aboutUsModel.body&&e.$scope.aboutUsModel.title?void e.$endPageSrv.newAboutUs(e.$scope.aboutUsModel).then(function(t){t&&(e.$scope.editAboutUs=!1,s())}):void alert("数据不完整！")},e.$scope.deleteAboutUsBtn=function(){e.$endPageSrv.deleteAboutUs().then(function(e){window.location.reload()})},e.$scope.addLink=function(){e.$scope.isAddEvent=!0,e.$scope.sightItem=!0,e.$scope.linkModel={title:"",url:""}},e.$scope.closeAddLink=function(){e.$scope.sightItem=!1},e.$scope.onEditLink=function(t){e.$endPageSrv.getLink(t).then(function(s){1==s.status&&"success"==s.message&&(e.$scope.isAddEvent=!1,e.$scope.sightItem=!0,e.$scope.linkModel.title=s.data.title,e.$scope.linkModel.url=s.data.url,e.$scope.linkModel.friendChainId=t,e.$scope.$apply())})},e.$scope.onDeleteLink=function(t){e.$scope.deleteSightItem=!0,e.$scope.friendChainId=t},e.$scope.onDeleteEventCancel=function(){e.$scope.deleteSightItem=!1},e.$scope.onDeleteEventOK=function(){e.$endPageSrv.deleteLink(e.$scope.friendChainId).then(function(s){1==s.status&&"success"==s.message&&(e.$scope.deleteSightItem=!1,t())})},e.$scope.saveLink=function(s){return e.$scope.linkModel.title.length>15?void alert("标题字数请限制在15个汉字以内"):e.$scope.linkModel.url&&e.$scope.linkModel.title?void("new"==s?e.$scope.links&&e.$scope.links.length>=5?alert("最多添加5条友链"):e.$endPageSrv.addLink(e.$scope.linkModel).then(function(s){1==s.status&&"success"==s.message&&(e.$scope.sightItem=!1,t())}):e.$endPageSrv.editLink(s,e.$scope.linkModel).then(function(s){1==s.status&&"success"==s.message&&(e.$scope.sightItem=!1,t())})):void alert("数据不完整！")}},e.inheritFromCtrl(e.admin.endPageCtrl),e.registerDependency("gxb.controllers.admin.endPageCtrl",["gxb.services.tenants.endPageSrv"]),e.registerView("gxb.controllers.admin.endPageCtrl","administration/pagemain/endpage")}(gxb.controllers,gxb.utils),function(e,t){e.admin.goodCourseCtrl=function(e){e.$studentListSrv.gettenant().then(function(t){e.$scope.tenant=t.data,e.$scope.tenant.teacherTitle=e.$scope.tenant.teacherTitle||"名师风采",e.$scope.$apply()}),e.$scope.updatatenant=function(){var t={jingcaiTitle:e.$scope.tenant.jingcaiTitle};t.jingcaiTitle.length<=12?e.$studentListSrv.updatatenant(t).then(function(e){window.location.reload()}):alert("字数请限制在12汉字之内")},e.$scope.link=function(e){window.location=gxb.utils.urlUtils.resolveUrl(e)},e.$scope.moveUp=function(t,s){if(0!=s){var o=[{id:t.id,position:e.$scope.jpCourseList[s-1].position},{id:e.$scope.jpCourseList[s-1].id,position:t.position}];e.$studentListSrv.moveUpData(o).then(function(e){1==e.status&&a()})}else alert("已经是第一个,不可再上移啦")},e.$scope.moveDown=function(t,s){if(4!=s){var o=[{id:t.id,position:e.$scope.jpCourseList[s+1].position},{id:e.$scope.jpCourseList[s+1].id,position:t.position}];e.$studentListSrv.moveUpData(o).then(function(e){1==e.status&&a()})}else alert("已经是最后一个了,不可再下移啦")},e.$scope.isAddClassEvent=!1,e.$scope.isSearching=!1,e.$scope.noData=!1,e.$scope.totalCount=!1,e.$scope.classList=null,e.$scope.searchText="";var t=3;e.$scope.addClass=function(){e.$scope.isAddClassEvent=!0,e.$scope.searchText="",e.$scope.checkedSource={},e.$scope.ngPaginationConfig.pagenums=[],e.$scope.addPaging(),s(1)},e.$scope.closeWindow=function(){e.$scope.isAddClassEvent=!1},e.$scope.addPaging=function(){e.$scope.ngPaginationConfig={pageCount:5,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage1' on-page-change='onPageChange()'></gxbtmpagination>";$("#pagination").empty(),$("#pagination").append(e.$compile(t)(e.$scope)[0])},e.$scope.addPaging();var s=function(s){var o=e.$scope.searchText;e.$studentListSrv.queryClassUser(s,t,o||"").then(function(s){e.$scope.isSearching=!!o,e.$scope.noData=0==s.paging.total,e.$scope.classList=s.dataList||[],e.$scope.totalCount=1*s.paging.total;var n=Math.ceil(e.$scope.totalCount/t)||1;if(e.$scope.ngPaginationConfig.pageCount=n,e.$scope.ngPaginationConfig.visiblePageCount=n>5?5:n,0==e.$scope.ngPaginationConfig.pagenums.length)for(var a=0;a<e.$scope.ngPaginationConfig.visiblePageCount;a++)e.$scope.ngPaginationConfig.pagenums.push(a+1);e.$scope.$apply()})};e.$scope.onPageChange=function(){s(this.currentPage1,3)},e.$scope.onSearch=function(){e.$scope.ngPaginationConfig.pagenums=[],e.$scope.addPaging(),s(1)},e.$scope.onSearchKeyUp=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.onSearch()},e.$scope.checkedSource={},e.$scope.checkItems=function(t,s){var o=0;for(var n in e.$scope.checkedSource)e.$scope.checkedSource.hasOwnProperty(n)&&o++;return 5==o&&t?void(this.a=!1):void(t?e.$scope.checkedSource["_"+s.classId]=s:delete e.$scope.checkedSource["_"+s.classId])},e.$scope.onInit=function(t){this.a=!!e.$scope.checkedSource["_"+t.classId]},e.$scope.onSaveCheckedClass=function(){var t=[],s=0;for(var o in e.$scope.checkedSource)if(e.$scope.checkedSource.hasOwnProperty(o)){var n=e.$scope.checkedSource[o];t.push({classId:n.classId,type:"jingcaishiting",position:s}),s++}0==t.length&&alert("请选择课程");for(var i=gxb.settings.identifier.getTenantID(),c=0;c<(e.$scope.jpCourseList||[]).length;c++)t.push({classId:e.$scope.jpCourseList[c].classId,type:"jingcaishiting",position:e.$scope.jpCourseList[c].position});e.$goodCourseSrv.saveJpCourse(i,t).then(function(t){e.$scope.closeWindow(),a()})},e.$scope.isChooseClassEvent=!1,e.$scope.isChooseClassSearching=!1,e.$scope.noChooseClassData=!1,e.$scope.totalChooseClassCount=!1,e.$scope.chooseClassList=null,e.$scope.chooseClassSearchText="",e.$scope.selectNode={};var o=null,n=null,a=function(){var t=gxb.settings.identifier.getTenantID();e.$goodCourseSrv.loadJpCourse("jingcaishiting",t).then(function(t){e.$scope.jpCourseList=t.data||[],e.$scope.$apply()})};a();var i=function(s){if(e.$scope.noChooseClassData=!1,!o||!o.length)return void(e.$scope.noChooseClassData=!0);for(var a=[],i=0,c=o.length;i<c;i++){var r=o[i];n&&r&&r.classId!=n.classId&&a.push(r)}if(e.$scope.chooseClassSearchText){var l=a;a=[];for(var i=0,c=l.length;i<c;i++){var r=l[i];r&&(r.classId.indexOf(e.$scope.chooseClassSearchText)>=0||r.className.indexOf(e.$scope.chooseClassSearchText)>=0)&&a.push(r)}}e.$scope.chooseClassList=a.slice((s-1)*t,(s-1)*t+t),e.$scope.noChooseClassData=a.length>0,e.$scope.totalCount=a.length;var p=Math.ceil(e.$scope.totalCount/t)||1;if(e.$scope.ngPaginationConfig_ChooseClass.pageCount=p,e.$scope.ngPaginationConfig_ChooseClass.visiblePageCount=p>5?5:p,0==e.$scope.ngPaginationConfig_ChooseClass.pagenums.length)for(var g=0;g<e.$scope.ngPaginationConfig_ChooseClass.visiblePageCount;g++)e.$scope.ngPaginationConfig_ChooseClass.pagenums.push(g+1)},c=function(){e.$scope.ngPaginationConfig_ChooseClass.pagenums=[],e.$scope.addPag(),e.$goodCourseSrv.loadClassList().then(function(t){o=t.dataList||[],i(1),e.$scope.$apply()})};e.$scope.changeClass=function(t){e.$scope.isChooseClassEvent=!0,e.$scope.selectNode={},n=t,c()},e.$scope.closeChooseClassWindow=function(){e.$scope.isChooseClassEvent=!1},e.$scope.addPag=function(){e.$scope.ngPaginationConfig_ChooseClass={pageCount:5,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig_ChooseClass' page-count='ngPaginationConfig_ChooseClass.pageCount' current-page='currentPage' on-page-change='onChooseClassPageChange()'></gxbtmpagination>";$("#pagination_chooseClass").empty(),$("#pagination_chooseClass").append(e.$compile(t)(e.$scope)[0]),e.$scope.$apply()},e.$scope.addPag(),e.$scope.onChooseClassPageChange=function(){i(this.currentPage,3)},e.$scope.onChooseClassSearch=function(){e.$scope.ngPaginationConfig_ChooseClass.pagenums=[],e.$scope.addPag(),i(1)},e.$scope.onChooseClassSearchKeyUp=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.onChooseClassSearch()},e.$scope.changeSelecedItem=function(t){e.$scope.selectNode=t},e.$scope.onSaveCheckedChooseClass=function(){if(!e.$scope.selectNode.classId||!n.id)return void alert("数据不完整");var t={classId:e.$scope.selectNode.classId};e.$goodCourseSrv.modifyClassInfor(n.id,t).then(function(t){a(),e.$scope.closeChooseClassWindow()})},e.$scope.deleteUserId=null,e.$scope.isDelete=!1,e.$scope.deleteUser=function(t){e.$scope.deleteId=t,e.$scope.isDelete=!0},e.$scope.sureDelete=function(){e.$goodCourseSrv["delete"](e.$scope.deleteId).then(function(t){t.status?(alert("删除成功"),window.location.reload()):(e.$scope.isDelete=!1,alert(t.message)),e.$scope.$apply()})}},e.inheritFromCtrl(e.admin.goodCourseCtrl),e.registerDependency("gxb.controllers.admin.goodCourseCtrl",["gxb.services.tenants.goodCourseSrv","gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.goodCourseCtrl","administration/pagemain/goodcourse")}(gxb.controllers,gxb.utils),function(e,t){e.admin.platFormCtrl=function(e){e.$scope.imageUrl=null,e.$scope.uploadData={fileElementID:"slide_file_element",isImage:!0,autoupload:!0,cdnPrefix:gxb.settings.cdn.wangsu.getPaths().uploads_logo_avatar_prefix,cdnBucket:gxb.settings.cdn.wangsu.getBuckets().imageBucket,onSuccess:function(t){e.$scope.imageUrl=t.absoluteUrl,e.$scope.realImageUrl=t.relativeUrl,e.$scope.$apply()}};e.$scope.name="",e.$scope.desc="",e.$scope.link=function(e){window.location=gxb.utils.urlUtils.resolveUrl(e)},e.$scope.data=[];var t=function(){e.$platFormSrv.getPlatform().then(function(t){e.$scope.name=t.data.name||[],e.$scope.desc=t.data.desc||[],e.$scope.data=t.data,e.$scope.$apply()},function(e){console.log("query platform error!")})};t(),e.$scope.savePlatform=function(){var t={name:e.$scope.name,desc:e.$scope.desc};e.$platFormSrv.editPlatform(t).then(function(e){alert("保存设置成功!")},function(e){console.log("edit platform error!")})},e.$scope.showhide=!1,e.$scope.logoshow=function(t){e.$scope.imageUrl=null,e.$scope.showhide=!t},e.$scope.addlogo=function(t,s){e.$scope.showhide=!0,e.$scope.editlogo=s?"编辑":"添加",s?e.$scope.imageUrl="white"==t?e.$scope.data.tenantWhiteLogo.link:e.$scope.data.tenantBlackLogo.link:e.$scope.imageUrl="",s?(e.$scope.logoblack=!1,e.$scope.logowhite=!1,e.$scope.editsavelogo=!0,e.$scope.tab=t):"white"==t?(e.$scope.logoblack=!1,e.$scope.logowhite=!0,e.$scope.editsavelogo=!1):(e.$scope.logoblack=!0,e.$scope.logowhite=!1,e.$scope.editsavelogo=!1)},e.$scope.tips="字数请限制在512个汉字以内",e.$scope.reset=!0,e.$scope.checkLength=function(t){t?t.length>512?(e.$scope.tips="字数不可超过512字",e.$scope.reset=!1):(e.$scope.reset=!0,e.$scope.tips="字数请限制在512个汉字以内"):(e.$scope.tips="学校简介不可为空!",e.$scope.reset=!1)},e.$scope.addblack=function(){if(null==e.$scope.imageUrl)return alert("请选择图片"),!1;var t={link:e.$scope.realImageUrl,type:"InstitutionTopBlackBadgeImage",viewableType:"School"};e.$platFormSrv.addblacklogo(t).then(function(e){e.status&&window.location.reload()})},e.$scope.addwhite=function(){if(null==e.$scope.imageUrl)return alert("请选择图片"),!1;var t={link:e.$scope.realImageUrl,type:"InstitutionTopWhiteBadgeImage",viewableType:"School"};e.$platFormSrv.addwhitelogo(t).then(function(e){e.status&&window.location.reload()})},e.$scope.savelogo=function(t){if(null==e.$scope.imageUrl)return alert("请选择图片"),!1;var s="white"==t?e.$scope.data.tenantWhiteLogo.id:e.$scope.data.tenantBlackLogo.id,o="white"==t?"InstitutionTopWhiteBadgeImage":"InstitutionTopBlackBadgeImage",n={link:e.$scope.realImageUrl,type:o,viewableType:"School"};e.$platFormSrv.updateasset(s,n).then(function(e){e.status&&window.location.reload()})}},e.inheritFromCtrl(e.admin.platFormCtrl),e.registerDependency("gxb.controllers.admin.platFormCtrl",["gxb.services.tenants.platFormSrv"]),e.registerView("gxb.controllers.admin.platFormCtrl","administration/pagemain/platform")}(gxb.controllers,gxb.utils),function(e,t){e.admin.schoolProjectCtrl=function(e){e.$scope.relatedIntro="",e.$scope.link=function(e){window.location=gxb.utils.urlUtils.resolveUrl(e)};var t=function(){e.$platFormSrv.getPlatform().then(function(t){e.$scope.relatedIntro=t.data.relatedIntro||[],e.$scope.relatedIntroTitle=t.data.relatedIntroTitle||"学校介绍",e.$scope.tenant=t.data||[],e.$scope.$apply(),t.data.relatedIntro.length>150&&(e.$scope.tips="字数不可超过150字")},function(e){console.log("query school profile error!")})};t(),e.$scope.saveSchoolProfile=function(){var t={relatedIntro:e.$scope.relatedIntro,relatedIntroTitle:e.$scope.relatedIntroTitle};e.$scope.relatedIntroTitle.length<=12?e.$platFormSrv.editPlatform(t).then(function(e){alert("数据保存成功!"),window.location.reload()}):alert("字数请限制在12汉字之内")},e.$scope.tips="字数请限制在512个汉字以内",e.$scope.reset=!0,e.$scope.checkLength=function(t){t?t.length>512&&(e.$scope.tips="字数不可超过150字",e.$scope.reset=!1):(e.$scope.tips="学校简介不可为空!",e.$scope.reset=!1)}},e.inheritFromCtrl(e.admin.schoolProjectCtrl),e.registerDependency("gxb.controllers.admin.schoolProjectCtrl",["gxb.services.tenants.platFormSrv"]),e.registerView("gxb.controllers.admin.schoolProjectCtrl","administration/pagemain/schoolproject")}(gxb.controllers,gxb.utils),function(e,t){e.admin.schoolStyleCtrl=function(e){e.$studentListSrv.gettenant().then(function(t){e.$scope.tenant=t.data,e.$scope.tenant.photoTitle=e.$scope.tenant.photoTitle||"名师风采",e.$scope.$apply()}),e.$scope.updatatenant=function(){var t={photoTitle:e.$scope.tenant.photoTitle};t.photoTitle.length<=12?e.$studentListSrv.updatatenant(t).then(function(e){window.location.reload()}):alert("字数请限制在12汉字之内")},e.$scope.uploadData={fileElementID:"sight_file_element",isImage:!0,autoupload:!0,cdnPrefix:gxb.settings.cdn.wangsu.getPaths().uploads_sight_prefix,cdnBucket:gxb.settings.cdn.wangsu.getBuckets().imageBucket,onSuccess:function(t){e.$scope.sightItem.link=t.absoluteUrl,e.$scope.sightItem.realImageUrl=t.relativeUrl,e.$scope.$apply()}},e.$scope.link=function(e){window.location.href=gxb.utils.urlUtils.resolveUrl(e)};var s=function(t){e.$scope.isAddEvent=t};e.$scope.sights=null,e.$scope.isAddEvent=null;var o=function(){return{title:"",link:"",realImageUrl:"",id:"",position:1}};e.$scope.sightItem=null,e.$scope.deleteSightItem=null;var n=function(){e.$schoolStyleSrv.getSchoolStyle(1,6).then(function(t){e.$scope.sights=t.dataList||[],e.$scope.$apply()})};e.$scope.onAddEvent=function(){s(!0),e.$scope.sightItem=o()},e.$scope.closeWindow=function(){e.$scope.sightItem=null,e.$scope.isAddEvent=null},e.$scope.saveSight=function(){var s=e.$scope.sightItem,o={title:s.title,link:t.urlUtils.getCDNFilePath(s.realImageUrl||s.link),position:s.position||e.$scope.sights.length};if(e.$scope.isAddEvent||(o.assetId=s.assetId),!o.title||!o.link||!e.$scope.isAddEvent&&!o.assetId)return void alert("数据不完整");var a=function(t){1==t.status&&"success"==t.message&&(e.$scope.closeWindow(),n())};e.$scope.isAddEvent?e.$schoolStyleSrv.addSchoolStyle(o).then(a):e.$schoolStyleSrv.editSchoolStyle(o.assetId,o).then(a)},e.$scope.onEditEvent=function(t){e.$scope.sightItem=t,e.$scope.isAddEvent=!1},e.$scope.onDeleteEvent=function(t){e.$scope.deleteSightItem=t},e.$scope.onDeleteEventOK=function(){e.$schoolStyleSrv.deleteSchoolStyle(e.$scope.deleteSightItem.assetId).then(function(t){e.$scope.onDeleteEventCancel(),n()})},e.$scope.onDeleteEventCancel=function(){e.$scope.deleteSightItem=null},n()},e.inheritFromCtrl(e.admin.schoolStyleCtrl),e.registerDependency("gxb.controllers.admin.schoolStyleCtrl",["gxb.services.tenants.schoolStyleSrv","gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.schoolStyleCtrl","administration/pagemain/schoolstyle")}(gxb.controllers,gxb.utils),function(e,t){e.admin.teacherStyleCtrl=function(e){e.$studentListSrv.gettenant().then(function(t){e.$scope.tenant=t.data,e.$scope.tenant.teacherTitle=e.$scope.tenant.teacherTitle||"名师风采",e.$scope.$apply()}),e.$scope.updatatenant=function(){var t={teacherTitle:e.$scope.tenant.teacherTitle};t.teacherTitle.length<=12?e.$studentListSrv.updatatenant(t).then(function(e){window.location.reload()}):alert("字数请限制在12汉字之内")},e.$scope.teacherStyleList=null,e.$scope.filterTeacherStyleList=null,e.$scope.selectedPosition="",e.$scope.serialNum="",e.$scope.hide=!0;var t=1,s=3,o=100,n=10,a="",i=!1;e.$scope.totalNum="",e.$scope.selectedId="",e.$scope.link=function(e){window.location=gxb.utils.urlUtils.resolveUrl(e)};var c=[],r=[],l=[],p=function(t,s){a=e.$scope.searchText||"";for(var o=3;o<l.length;o++)c.push(l[o]);if(""==a)r=c;else{r=[];for(var o=0;o<c.length;o++)c[o].instructorId.indexOf(a)==-1&&c[o].name.indexOf(a)==-1||r.push(c[o])}return e.$scope.totalNum=c.length,(i?r:c).slice((t-1)*s,(t-1)*s+s)},g=function(){e.$teacherStyleSrv.getTeacherStyle(1,12).then(function(t){e.$scope.teacherStyleList=t.dataList||[],e.$scope.$apply()})};g();var u=function(t,s){e.$teacherStyleSrv.getTeacherStyle(t,"9999").then(function(a){if(l=a.dataList||[],s=3,e.$scope.filterTeacherStyleList=p(t,s),o=i?r.length:c.length,e.$scope.serialNum=(t-1)*s,e.$scope.total=o,n=Math.ceil(o/s),e.$scope.ngPaginationConfig.pageCount=n,e.$scope.ngPaginationConfig.visiblePageCount=n>5?5:n,0==e.$scope.ngPaginationConfig.pagenums.length)for(var g=0;g<e.$scope.ngPaginationConfig.visiblePageCount;g++)e.$scope.ngPaginationConfig.pagenums.push(g+1);e.$scope.$apply()})};e.$scope.cancel=function(){e.$scope.searchText="",e.$scope.hide=!e.$scope.hide},e.$scope.select=function(t){e.$scope.selectedId=t.instructorId,e.$scope.selectedPosition=t.position},e.$scope.reSelect=function(o,n){void 0==n&&(n=1),c=[],r=[],l=[],e.$scope.hide=!e.$scope.hide,s="",u(t,s),e.$scope.editTeacherStyle=function(){var t=e.$scope.selectedId,s=e.$scope.selectedPosition,a=[{instructorId:o,position:s},{instructorId:t,position:n}];e.$teacherStyleSrv.editTeacherStyle(a).then(function(t){1==t.status&&"success"==t.message&&(e.$scope.hide=!e.$scope.hide),g()})}},e.$scope.queryText=function(){i=!0,c=[],s="",e.$scope.ngPaginationConfig.pagenums=[],u(t,s)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.queryText()},e.$scope.onPageChange=function(){c=[],s=3,e.$scope.filterTeacherStyleList=p(this.currentPage,s)},e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var d="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",f=e.$scope.$new();$("#pagination").append(e.$compile(d)(f)[0])},e.inheritFromCtrl(e.admin.teacherStyleCtrl),e.registerDependency("gxb.controllers.admin.teacherStyleCtrl",["gxb.services.tenants.teacherStyleSrv","gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.teacherStyleCtrl","administration/pagemain/teacherstyle")}(gxb.controllers,gxb.utils),function(e,t){e.admin.templateCtrl=function(e){e.$userSrv.tenantTemplate().then(function(t){2==t.data.templateId?e.$scope.a=!0:3==t.data.templateId&&(e.$scope.b=!0),e.$scope.templateId=t.data.templateId}),e.$scope.templateId="",e.$scope.setTemplate=function(){e.$scope.template={templateId:e.$scope.templateId},e.$homeSrv.setTemplate(e.$scope.template).then(function(e){e.status?alert("设置成功"):alert("设置失败，请稍后再试")})},e.$scope.link=function(e){window.location.href=gxb.utils.urlUtils.resolveUrl(e)},e.$scope.a=!1,e.$scope.select=function(t,s){e.$scope.a=!1,1==t?e.$scope.a=!1:e.$scope.a=!0,1==e.$scope.b&&(e.$scope.b=!1,e.$scope.a=!0),e.$scope.templateId=s},e.$scope.b=!1,e.$scope.simple=function(t,s){e.$scope.b=!0,1==t||1==e.$scope.a?e.$scope.b=!1:e.$scope.b=!0,1==e.$scope.a&&(e.$scope.a=!1,e.$scope.b=!0),e.$scope.templateId=s}},e.inheritFromCtrl(e.admin.templateCtrl),e.registerDependency("gxb.controllers.admin.templateCtrl",["gxb.services.portal.homeSrv","gxb.services.classes.userSrv"]),e.registerView("gxb.controllers.admin.templateCtrl","administration/pagemain/template")}(gxb.controllers,gxb.utils),function(e,t){e.admin.editPowerCtrl=function(e){var t="此账号已被设为管理员，请勿重新设置",s=e.$state.params.id||"";e.$scope.h2=s?"编辑":"添加",e.$scope.edit=!!s,e.$scope.mobile=!0,e.$scope.setAdmin=!0,e.$scope.manager=[],e.$studentListSrv.getrolelist().then(function(t){$.each(t.data,function(t,s){e.$scope.manager.push({name:s.name,id:s.roleId})}),e.$scope.$apply()},function(){console.log("获取角色失败")}),e.$scope.adminData=[],s&&e.$studentListSrv.editpowerList(s).then(function(t){e.$scope.adminData=t.data||[],e.$scope.$apply()},function(){console.log("失败")}),e.$scope.checkIdSample=function(e,t){var s="";return e&&t&&$.each(e,function(e,o){if(o.roleId==t)return s="icon-checked",!1}),s},e.$scope.queryRes=function(t){if(t){var o=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(/^1[3|4|5|7|8]\d{9}$/.test(t))e.$scope.mobile=!0,e.$scope.tips="";else{if(e.$scope.mobile=!1,e.$scope.tips="请输入正确的手机号",!o.test(t))return e.$scope.mobile=!1,void(e.$scope.tips="请输入正确的邮箱");e.$scope.mobile=!0,e.$scope.tips=""}e.$scope.roleList=[],e.$studentListSrv.queryUser(t).then(function(t){e.$scope.roleList=t.data.dataList||[],e.$scope.roleList&&e.$scope.roleList.length&&e.$scope.roleList.length>0?$.each(e.$scope.roleList,function(t,o){e.$scope.mobile=!1,e.$scope.setAdmin=!0,e.$scope.tips="此账号可以添加管理员",e.$scope.edit=!0,s=e.$scope.roleList[0].userId}):(e.$scope.edit=!1,e.$scope.mobile=!0,e.$scope.setAdmin=!1),e.$scope.$apply()},function(){console.log("查询失败")})}else e.$scope.mobile=!1,e.$scope.tips="请输入手机号或邮箱"},e.$scope.cancel=function(){window.location=gxb.utils.urlUtils.resolveUrl("/admin/#/powerlist")},e.$scope.save=function(){if(e.$scope.tips!=t){if(e.$scope.rolesList=[],e.$scope.tenantIds=[],$(".roles li i").each(function(){$(this).hasClass("icon-checked")&&e.$scope.rolesList.push($(this).attr("data"))}),!e.$scope.rolesList.length)return void alert("请选择角色");null==s||""==s||void 0==s?(e.$scope.roleUserArr={},e.$scope.tenantIds.push(gxb.settings.identifier.getTenantID()),e.$scope.roleUserArr.roleIds=e.$scope.rolesList,e.$scope.roleUserArr.tenantIds=e.$scope.tenantIds,e.$scope.roleUserArr.userName=e.$scope.accountNum,e.$scope.roleUserArr.name=e.$scope.name,e.$studentListSrv.addpower(s,e.$scope.roleUserArr).then(function(e){e&&(window.location=gxb.utils.urlUtils.resolveUrl("/admin/#/powerlist"))},function(){alert("添加管理员失败")})):e.$studentListSrv.editpower(s,e.$scope.rolesList).then(function(e){1==e.data&&(window.location=gxb.utils.urlUtils.resolveUrl("/admin/#/powerlist"))},function(){alert("编辑管理员失败")})}else alert(t)}},e.inheritFromCtrl(e.admin.editPowerCtrl),e.registerDependency("gxb.controllers.admin.editPowerCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.editPowerCtrl","administration/power/editpower")}(gxb.controllers,gxb.utils),function(e,t){e.admin.powerListCtrl=function(e){e.$scope.tab=1;var t="tenant",s=20,o=gxb.settings.identifier.getTenantID();if(0!=gxb.utils.localStorageUtils.get("isHome")?(gxb.utils.localStorageUtils.set("currentPage",1),gxb.utils.localStorageUtils.set("keyword",""),gxb.utils.localStorageUtils.set("roleId",""),gxb.utils.localStorageUtils.set("roleName","全部")):gxb.utils.localStorageUtils.set("isHome",!0),gxb.utils.localStorageUtils.get("currentPage"))var n=gxb.utils.localStorageUtils.get("currentPage")||1;if(gxb.utils.localStorageUtils.get("keyword")){var a=gxb.utils.localStorageUtils.get("keyword")||"";e.$scope.searchText=a}else var a="";if(gxb.utils.localStorageUtils.get("roleId")){var i=gxb.utils.localStorageUtils.get("roleId")||"";e.$scope.roleName=gxb.utils.localStorageUtils.get("roleName")}else var i="";e.$scope.powerList=null;var c=function(t,s,o,n,a,i){e.$studentListSrv.adminPerson(t,s,o,n,a,i).then(function(t){if(e.$scope.powerList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()},function(){console.log("获取权限列表失败")})};e.$scope.search=function(){var a=e.$scope.searchText||"";e.$scope.ngPaginationConfig.pagenums=[],c(t,n,s,a,o,i),gxb.utils.localStorageUtils.set("keyword",a)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.search()},e.$scope.pageCount=function(r){s=r,e.$scope.ngPaginationConfig.pagenums=[],c(t,n,s,a,o,i)},e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:gxb.utils.localStorageUtils.get("currentPage")||1,pagenums:[]};var r="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",l=e.$scope.$new();$("#pagination").append(e.$compile(r)(l)[0]),e.$scope.onPageChange=function(){console.log(i),c(t,this.currentPage,s,a,o,i),gxb.utils.localStorageUtils.set("currentPage",this.currentPage)},c(t,n,s,a,o,i),e.$scope.addAdminor=function(){window.location=gxb.utils.urlUtils.resolveUrl("/admin/#/powerlist/new")},e.$scope.editAdminor=function(e){window.location=gxb.utils.urlUtils.resolveUrl("/admin/#/powerlist/"+e),gxb.utils.localStorageUtils.set("isHome",!1)},e.$scope.role=!0,e.$scope.selectRole=function(t){1==t?e.$scope.role=!1:e.$scope.role=!0,e.$scope.roleList=[],e.$studentListSrv.getrolelist().then(function(t){e.$scope.roleList=t.data||[],e.$scope.$apply()},function(){console.log("获取角色失败")})},e.$scope.roleFilter=function(r,l){gxb.utils.localStorageUtils.set("roleId",r),gxb.utils.localStorageUtils.set("roleName",l),e.$scope.role=!0,e.$scope.roleName=l,
i=r,c(t,n,s,a,o,r)},e.$scope.del=!1,e.$scope.delrole=function(t,s,o){e.$scope.powername=s,e.$scope.poweruserId=o,e.$scope.del=!!t},e.$scope.deleterole=function(){e.$scope.del=!1,e.$studentListSrv.deleterole(e.$scope.poweruserId).then(function(e){e.status&&c(t,n,s,a,o,i)})},e.$scope.imp=!0,e.$scope["import"]=function(t){e.$scope.filename=null,e.$scope.importdata=[],e.$scope.process=null,e.$scope.importres=!1,e.$scope.importres1=!1,e.$scope.imp=!t},e.$scope.uploadfilemodel=function(){window.location.href="http://gxbfile-gs.gaoxiaobang.com/static/templates/批量添加管理人员模板.xls"},e.$scope.importres1=!1,e.$scope.errormessage,e.$scope.uploadFile=function(t){console.log(t);var s=new FormData;e.$scope.filename=t[0].name,s.append("file",t[0]),e.$studentListSrv.uploadFileMaster(s).then(function(t){t.status?($("#file").replaceWith('  <input type="file" id="file" class="gxb-btn-submit gxb-btn-ls" name="file"  onchange="angular.element(this).scope().uploadFile(this.files)"/>'),e.$scope.importres=!0,e.$scope.importres1=!1):(e.$scope.importres=!1,e.$scope.importres1=!0,e.$scope.errormessage=t.message),e.$scope.process="完成",e.$scope.$apply()});var o=window.setInterval(function(){e.$studentListSrv.processStatusMaster().then(function(t){t&&(e.$scope.importdata=t,clearInterval(o),e.$scope.$apply())})},1e3)},e.$scope.downloadUrl=function(e){null!=e&&gxb.utils.downloadUtils.downloadFile(e)}},e.inheritFromCtrl(e.admin.powerListCtrl),e.registerDependency("gxb.controllers.admin.powerListCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.powerListCtrl","administration/power/powerlist")}(gxb.controllers,gxb.utils),function(e,t){e.admin.classPublishCtrl=function(e){},e.inheritFromCtrl(e.admin.classPublishCtrl),e.registerDependency("gxb.controllers.admin.classPublishCtrl",[]),e.registerView("gxb.controllers.admin.classPublishCtrl","administration/publishclass/index")}(gxb.controllers,gxb.utils),function(e,t){e.admin.selectClassCtrl=function(e){function t(){e.$scope.showPopTips={show:!1,success:!1},e.$scope.$apply(),window.location.href="/#/user/user_home"}function s(){var t=e.$scope.currentSelectCourse.selectiveId||"";e.$studentListSrv.getSelectCourseInfo(t).then(function(t){e.$scope.currentSelectCourse=t||{},e.$scope.maxSelectNum=parseInt(t.maxNum||0),e.$scope.getClassInfo()})}function o(){var t=e.$scope.currentSelectCourse.selectiveId||"";e.$studentListSrv.getSelectClassList(t,e.$scope.curPage,e.$scope.pageSize).then(function(t){if(e.$scope.total=t.paging.total||0,t&&t.dataList){for(var s=0;s<t.dataList.length;s++)e.$scope.chekcedList.indexOf(parseInt(t.dataList[s].classId))>-1?t.dataList[s].checked=!0:t.dataList[s].checked=!1;e.$scope.selectClassList=t&&t.dataList||[]}if(e.$scope.ngPaginationConfig1.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig1.visiblePageCount=t.paging.totalPage>3?3:t.paging.totalPage,0==e.$scope.ngPaginationConfig1.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig1.visiblePageCount;s++)e.$scope.ngPaginationConfig1.pagenums.push(s+1);e.$scope.$apply()})}e.$scope.showIfarme=!0,e.$scope.currentPop=2,e.$scope.currentSelectCourse={selectiveId:e.$state.params.id},e.$scope.showPopTips={show:!1,success:!1},e.$scope.curPage=1,e.$scope.pageSize=6,e.$scope.chekcedList=[],e.$scope.selectClassList=[],e.$scope.total=0,e.$scope.maxSelectNum,e.$scope.showWarn=!1,e.$scope.getClassInfo=function(){var t=e.$state.params.id||"";e.$studentListSrv.getSelectedListAtStudent(t).then(function(t){e.$scope.chekcedList=t||[],o()})},e.$scope.checkClassId=function(t){var s=e.$scope.chekcedList.indexOf(parseInt(t));if(s>-1)e.$scope.chekcedList.splice(s,1);else{if(e.$scope.maxSelectNum&&e.$scope.chekcedList.length>=e.$scope.maxSelectNum)return void alert("最多可选"+e.$scope.maxSelectNum+"门课程");e.$scope.chekcedList.push(parseInt(t))}this.classitem.checked=!this.classitem.checked},e.$scope.postSelect=function(){var t=e.$scope.chekcedList||[];return 0==t.length?void alert("请选择课程"):e.$scope.maxSelectNum&&t.length>e.$scope.maxSelectNum?void alert("最多可选"+e.$scope.maxSelectNum+"门课程"):void(e.$scope.showWarn=!0)},e.$scope.cancel=function(){e.$scope.showWarn=!1},e.$scope.saveSelet=function(){var s=e.$scope.currentSelectCourse.selectiveId||"",o=e.$scope.chekcedList||[];e.$studentListSrv.saveStudentSelected(s,o).then(function(s){s&&(e.$scope.showWarn=!1,e.$scope.showPopTips={show:!0,success:!0},e.$scope.$apply(),setTimeout(t,3e3))},function(t){t&&(e.$scope.showWarn=!1,e.$scope.showPopTips={show:!0,success:!1},e.$scope.$apply(),alert(t.msg))})},s(),e.$scope.ngPaginationConfig1={pageCount:10,visiblePageCount:3,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var n="<gxbtmpagination conf='ngPaginationConfig1' page-count='ngPaginationConfig1.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",a=e.$scope.$new();$("#page_").append(e.$compile(n)(a)[0]),e.$scope.onPageChange=function(){e.$scope.curPage=this.currentPage,o()}},e.inheritFromCtrl(e.admin.selectClassCtrl),e.registerDependency("gxb.controllers.admin.selectClassCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.selectClassCtrl","administration/selectcourse/studentSelect")}(gxb.controllers,gxb.utils),function(e,t){e.admin.selectCourseCtrl=function(e){var s="";e.$scope.curPage=1;var o=20,n=gxb.settings.identifier.getTenantID();e.$scope.dataList=null,e.$scope.tab=1,e.$scope.searchText="",e.$scope.showCreate=!1,e.$scope.deleteId=null,e.$scope.pop={},e.$scope.pop.inputNum=0,e.$scope.pop.data={title:"",studentType:"0"};var a=function(t,s,o){e.$studentListSrv.selectCourseList(t,s,o,n).then(function(t){if(e.$scope.isSearching=!!e.$scope.searchText,e.$scope.noData=!1,0==t.paging.total&&(e.$scope.noData=!0),e.$scope.dataList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.curPage=t.paging.curPage,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})};e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:e.$scope.curPage||1,pagenums:[]};var i="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",c=e.$scope.$new();$("#pagination").append(e.$compile(i)(c)[0]),e.$scope.onPageChange=function(){a(this.currentPage,o,s),gxb.utils.localStorageUtils.set("currentPage",this.currentPage)},e.$scope.pop.keyup=function(t){e.$scope.pop.inputNum=e.$scope.pop.data.title.length},e.$scope.pop.goCreate=function(){this.disabled||(e.$scope.pop.data.title.trim().length>0?(this.disabled=!0,e.$studentListSrv.saveSelectCourse(e.$scope.pop.data).then(function(e){window.location.href=t.urlUtils.resolveUrl("/admin/#/selectcourse/edit/"+e)})):(this.disabled=!1,alert("请输入选课标题")))},e.$scope.createSelectCourse=function(){e.$scope.pop.data.title="",e.$scope.pop.inputNum=0,e.$scope.showCreate=!e.$scope.showCreate},e.$scope.edit=function(e){window.location.href=t.urlUtils.resolveUrl("/admin/#/selectcourse/edit/"+e)},e.$scope.del=function(){e.$studentListSrv.deleteSelectCourse(e.$scope.deleteId).then(function(t){t&&(e.$scope.deleteId=null,a(e.$scope.curPage,o,s))},function(e){alert(e.msg)})},e.$scope.delwarn=function(t){e.$scope.deleteId=t},e.$scope.pageCount=function(t){o=t,e.$scope.ngPaginationConfig.pagenums=[],a(e.$scope.curPage,o,s)},a(e.$scope.curPage,o,s)},e.inheritFromCtrl(e.admin.selectCourseCtrl),e.registerDependency("gxb.controllers.admin.selectCourseCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.selectCourseCtrl","administration/selectcourse/index")}(gxb.controllers,gxb.utils),function(e,t){e.admin.selectCourseEditCtrl=function(e){function s(){e.$studentListSrv.getSelectCourseInfo(a).then(function(t){e.$scope.selectcourse.info=gxb.extend(e.$scope.selectcourse.info,t),0==t.maxNum?e.$scope.selectcourse.info.maxNum="":e.$scope.selectcourse.info.maxNum=parseInt(t.maxNum),o(999)})}function o(){e.$studentListSrv.getSelectClassList(a,e.$scope.curPage_info,e.$scope.pageSize_info).then(function(t){if(t&&t.dataList&&(e.$scope.selectcourse.courseList=t.dataList),e.$scope.dataList=t.dataList||[],e.$scope.total_info=t.paging.total,e.$scope.curPage_info=t.paging.curPage,e.$scope.ngPaginationConfig_info.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig_info.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,e.$scope.ngPaginationConfig_info.pagenums=[],0==e.$scope.ngPaginationConfig_info.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig_info.visiblePageCount;s++)e.$scope.ngPaginationConfig_info.pagenums.push(s+1);e.$scope.$apply()})}function n(t,s,o){e.$studentListSrv.getAddClassDataListSelective(t,s,o).then(function(t){e.$scope.classList=t.dataList||[];for(var s=0;s<e.$scope.classList.length;s++)e.$scope.checkClassIdList.indexOf(e.$scope.classList[s].classId)>-1?e.$scope.classList[s].checked=!0:e.$scope.classList[s].checked=!1;if(e.$scope.poptotal=t.paging.total,e.$scope.ngPaginationConfig1.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig1.visiblePageCount=t.paging.totalPage>3?3:t.paging.totalPage,0==e.$scope.ngPaginationConfig1.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig1.visiblePageCount;s++)e.$scope.ngPaginationConfig1.pagenums.push(s+1);e.$scope.selectAll=!1,e.$scope.$apply()})}e.$scope.selectcourse={},e.$scope.selectcourse.courseList=[];var a=e.$state.params.id;gxb.settings.identifier.getTenantID();e.$scope.getCheckClassIdList=[],e.$scope.checkClassIdList=[],e.$scope.curPage_info=1,e.$scope.pageSize_info=10,e.$scope.tab_info="",e.$scope.searcCont="",e.$scope.isRzNum="",e.$scope.deleteMessage="",e.$scope.addClass=!0,e.$scope.selectcourse.info={title:"",description:"",startAt:"",maxNum:"",selectiveId:"",endAt:""},e.$scope.checkDescriptionText=function(){e.$scope.selectcourse.info.description.length>255?e.$scope.selectcourse.info.description=e.$scope.selectcourse.info.description.substr(0,255):""},e.$scope.selectcourse.update=function(){return e.$scope.selectcourse.info.startAt.length<2||e.$scope.selectcourse.info.endAt.length<2?void alert("请设置选课时间"):(e.$scope.selectcourse.info.startAt=t.datetimeUtils.minutes(e.$scope.selectcourse.info.startAt),e.$scope.selectcourse.info.endAt=t.datetimeUtils.minutes(e.$scope.selectcourse.info.endAt),void e.$studentListSrv.updateSelectCourse(e.$scope.selectcourse.info).then(function(e){alert("保存成功")},function(e){alert(e.msg)}))},e.$scope.selectcourse.publish=function(){e.$studentListSrv.publishSelectCourse(a).then(function(e){alert("发布成功")},function(e){alert(e.msg)})},e.$scope.selectcourse.deleteSelectCourseClassById=function(t){e.$studentListSrv.deleteSelectCourseClassById(a,t).then(function(e){e&&(alert("删除成功"),o())},function(e){alert(e.msg)})},e.$scope.ngPaginationConfig_info={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:e.$scope.curPage_info||1,pagenums:[]};var i="<gxbtmpagination conf='ngPaginationConfig_info' page-count='ngPaginationConfig_info.pageCount' current-page='currentPage' on-page-change='onPageChange_info()'></gxbtmpagination>",c=e.$scope.$new();$("#info_pagination").append(e.$compile(i)(c)[0]),e.$scope.onPageChange_info=function(){e.$scope.curPage_info=this.currentPage,o()},e.$scope.pageCount_info=function(t){e.$scope.ngPaginationConfig_info.pagenums=[],e.$scope.pageSize_info=t,o()},s(),e.$scope.selectcourse.title=!0,e.$scope.selectcourse.clickTab=function(t,s){e.$scope.selectcourse.title=t,t||d()};var r=1,l=5,p="";e.$scope.selectAll,e.$scope.addClassList=function(){e.$scope.addClass=!1,n(r,l,p)},e.$scope.ngPaginationConfig1={pageCount:10,visiblePageCount:3,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var g="<gxbtmpagination conf='ngPaginationConfig1' page-count='ngPaginationConfig1.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",u=e.$scope.$new();$("#addClassify").append(e.$compile(g)(u)[0]),e.$scope.onPageChange=function(){r=this.currentPage,n(r,l,p)},e.$scope.classSearch=function(){e.$scope.ngPaginationConfig1.pagenums=[],p=e.$scope.classifyName||"",n(r,l,p)},e.$scope.myKeyUp=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.classSearch()},e.$scope.checkItems=function(t,s){this.item.checked=t,t?(e.$scope.getCheckClassIdList.push({classId:s.classId,className:s.className}),e.$scope.checkClassIdList.push(s.classId)):$.each(e.$scope.getCheckClassIdList,function(t,o){o.classId==s.classId&&(e.$scope.getCheckClassIdList.splice(t,1),e.$scope.checkClassIdList.splice(t,1))})},e.$scope.remove=function(t){$(".classlart i").each(function(){var s=$(this);$.each(e.$scope.getCheckClassIdList,function(e,o){t==s.attr("data")&&(s.removeClass("icon-checked"),s.addClass("icon-unchecked"))})}),$.each(e.$scope.getCheckClassIdList,function(s,o){o.classId==t&&(e.$scope.getCheckClassIdList.splice(s,1),e.$scope.checkClassIdList.splice(s,1))})},e.$scope.qx=!0,e.$scope.quanxuan=function(t){e.$scope.qx=!t,t?$(".classlart i").each(function(){$(this).removeClass("icon-unchecked"),$(this).addClass("icon-checked");var t=$(this),s=!0;e.$scope.getCheckClassIdList&&$.each(e.$scope.getCheckClassIdList,function(e,o){return o.classId==t.attr("data")&&(s=!1),s}),1==s&&(e.$scope.getCheckClassIdList.push({classId:t.attr("data"),className:t.attr("main")}),e.$scope.checkClassIdList.push(t.attr("data")))}):$(".classlart i").each(function(){$(this).removeClass("icon-checked"),$(this).addClass("icon-unchecked");var t=$(this);$.each(e.$scope.getCheckClassIdList,function(s,o){o.classId==t.attr("data")&&(e.$scope.getCheckClassIdList.splice(s,1),e.$scope.checkClassIdList.splice(s,1))})})},e.$scope.sure=function(){return 0==e.$scope.checkClassIdList.length?void alert("添加的班次不能为空"):void e.$studentListSrv.saveSelectiveClasses(a,e.$scope.checkClassIdList).then(function(t){t&&(e.$scope.reset(),o())},function(e){alert(e.msg)})},e.$scope.reset=function(){e.$scope.selectAll=!1,e.$scope.addClass=!0},e.$scope.imp=!0,e.$scope.tabs=0,e.$scope.tabRz=0,e.$scope.curPage=1,e.$scope.pageSize=20,e.$scope.certify="",e.$scope.searchText="";var d=function(){e.$studentListSrv.getSelectiveStudents(a,e.$scope.curPage,e.$scope.pageSize,e.$scope.searchText,e.$scope.certify,e.$scope.searcCont,e.$scope.isRzNum).then(function(t){if(e.$scope.studentList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>5?5:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);$(".checkAll").removeClass("icon-checked").addClass("icon-unchecked"),e.$scope.$apply()},function(e){})};e.$scope.rzsearch=function(t){0==t&&(e.$scope.certify=""),1==t&&(e.$scope.certify="yxk"),2==t&&(e.$scope.certify="wxk"),e.$scope.ngPaginationConfig.pagenums=[],d()},e.$scope.isRzsearch=function(t){0==t&&(e.$scope.isRzNum=""),1==t&&(e.$scope.isRzNum="yrz"),2==t&&(e.$scope.isRzNum="wrz"),e.$scope.ngPaginationConfig.pagenums=[],d()},e.$scope.searchTxt=function(){e.$scope.ngPaginationConfig.pagenums=[],d()},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.searchTxt()},$(".checkAll").click(function(){$(this).hasClass("icon-unchecked")?($(this).removeClass("icon-unchecked").addClass("icon-checked"),$(".checkAlone").removeClass("icon-unchecked").addClass("icon-checked")):($(this).removeClass("icon-checked").addClass("icon-unchecked"),$(".checkAlone").removeClass("icon-checked").addClass("icon-unchecked"))}),e.$scope.checkAlone=function(e){$(".checkAlone").eq(e).hasClass("icon-unchecked")?$(".checkAlone").eq(e).removeClass("icon-unchecked").addClass("icon-checked"):($(".checkAlone").eq(e).removeClass("icon-checked").addClass("icon-unchecked"),$(".checkAll").removeClass("icon-checked").addClass("icon-unchecked"))},e.$scope.deleteCtrl=function(){var t=[];$(".checkAlone").each(function(){$(this).hasClass("icon-checked")&&t.push($(this).attr("studentsId"))}),e.$scope.deleteMessage=1,0==t.length?$("#deleteMessage .deleteSure").html("您没有选择任何内容"):$("#deleteMessage .deleteSure").html("您确定要将选中的"+t.length+"名同学从列表中删除吗？"),e.$scope.deleteMessageSure=function(){0==t.length?e.$scope.deleteMessage=null:e.$studentListSrv.delStudentSelected(a,t).then(function(t){t&&(e.$scope.deleteMessage=null,e.$scope.ngPaginationConfig.pagenums=[],d(),e.$scope.$apply())})}},$(".choiceStatus").click(function(){$(this).siblings(".statuslist").show()}),$(".statuslist li").click(function(){var e=$(this).html();$(this).parent(".statuslist").siblings(".choiceStatus").find(".tit").html(e),$(this).parent().hide()}),$(document).click(function(){var e=window.event||e,t=$(e.srcElement||e.target);0==t.parents(".statusXk").length&&$(".statusXk .statuslist").hide(),0==t.parents(".statusRz").length&&$(".statusRz .statuslist").hide()}),e.$scope.delStudentListById=function(){var t=e.$scope.deleteStudentId;e.$studentListSrv.deleteSelectiveStudent(a,t).then(function(t){t&&(e.$scope.ngPaginationConfig.pagenums=[],d()),e.$scope.deleteStudentId=null})},e.$scope.showDelStudent=function(t){e.$scope.deleteStudentId=t},e.$scope.pageCount=function(t){e.$scope.pageSize=t,e.$scope.ngPaginationConfig.pagenums=[],d()},e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:e.$scope.curPage||1,pagenums:[]};var f="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange_()'></gxbtmpagination>",m=e.$scope.$new();$("#pagination").append(e.$compile(f)(m)[0]),e.$scope.onPageChange_=function(){e.$scope.curPage=this.currentPage,d()},e.$scope["import"]=function(t){e.$scope.filename=null,e.$scope.importdata={},e.$scope.importres=!1,e.$scope.importres1=!1,e.$scope.imp=!t},e.$scope.uploadfilemodel=function(){window.location.href="http://gxbfile-gs.gaoxiaobang.com/static/templates/importSelectCourse.xls"},e.$scope.importres1=!1,e.$scope.errormessage,e.$scope.uploadFile=function(t){var s=new FormData;e.$scope.filename=t[0].name,s.append("file",t[0]);var o;e.$studentListSrv.uploadStudentSelectCourse(a,s).then(function(t){t.status?($("#file").replaceWith('  <input type="file" id="file" class="gxb-btn-submit gxb-btn-ls" name="file"  onchange="angular.element(this).scope().uploadFile(this.files)"/>'),e.$scope.importres=!0,e.$scope.importres1=!1,o=window.setInterval(function(){e.$studentListSrv.getUploadStudentSelectCourseProgress(a).then(function(t){e.$scope.importdata=t,t.importedNum==t.totalNum&&(clearInterval(o),e.$scope.ngPaginationConfig.pagenums=[],d(),e.$scope.process="完成"),e.$scope.$apply()})},1e3)):(e.$scope.importres=!1,e.$scope.importres1=!0,e.$scope.errormessage=t.message,e.$scope.$apply())})},e.$scope.downloadUrl=function(e){null!=e&&gxb.utils.downloadUtils.downloadFile(e)},e.$scope.download_=function(){window.location.href="http://gxbfile-gs.gaoxiaobang.com/static/templates/importSelectCourse.xls"}},e.inheritFromCtrl(e.admin.selectCourseEditCtrl),e.registerDependency("gxb.controllers.admin.selectCourseEditCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.selectCourseEditCtrl","administration/selectcourse/edit")}(gxb.controllers,gxb.utils),function(e,t){e.admin.selectCourseStudentCtrl=function(e){function t(){$("html").css("background","rgba(40,59,92,.4)"),$("body").css("background","rgba(40,59,92,.4)"),e.$studentListSrv.getSelectiveListAtStudent().then(function(t){e.$scope.courseList=t||[],t&&t.length>0&&(e.$scope.currentSelectCourse=e.$scope.courseList[0]||{}),e.$scope.$apply()})}e.$scope.showIfarme=!0,e.$scope.courseList=[],e.$scope.curNum=0,e.$scope.preOrNext=!0,e.$scope.currentSelectCourse={},e.$scope.currentPop=1;var s=e.$location.search()._source_;e.$scope.close=function(){var e={close:!0};window.parent.postMessage(e,s)},e.$scope.last=!1,e.$scope.next=function(){e.$scope.last||(e.$scope.curNum<e.$scope.courseList.length?(e.$scope.curNum++,e.$scope.currentSelectCourse=e.$scope.courseList[e.$scope.curNum]||{},e.$scope.first=!1,e.$scope.curNum+1==e.$scope.courseList.length&&(e.$scope.last=!0)):(e.$scope.last=!0,e.$scope.first=!1))},e.$scope.first=!0,e.$scope.pre=function(){e.$scope.first||(e.$scope.curNum>0?(e.$scope.curNum--,e.$scope.currentSelectCourse=e.$scope.courseList[e.$scope.curNum]||{},e.$scope.last=!1,0==e.$scope.curNum&&(e.$scope.first=!0)):(e.$scope.first=!0,e.$scope.last=!1))},e.$scope.getSelectInfo=function(){var t=e.$scope.currentSelectCourse.selectiveId||"",o={url:"/iframe#/selectclass/"+t};window.parent.postMessage(o,s)},t()},e.inheritFromCtrl(e.admin.selectCourseStudentCtrl),e.registerDependency("gxb.controllers.admin.selectCourseStudentCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.selectCourseStudentCtrl","administration/selectcourse/studentSelect")}(gxb.controllers,gxb.utils),function(e,t){e.admin.simpleSetCtrl=function(e){var t="";e.$simpleSetSrv.loadSimpleSet().then(function(t){e.$scope.simpleSetList=t.data,e.$scope.$apply()}),e.$scope.entryLevels=[{id:1,type:"all",name:"无限制",content:"登录用户和游客都可以访问平台内容"},{id:2,type:"login",name:"登录用户可访问",content:"登录用户可以访问平台内容"},{id:3,type:"tenant",name:"校内用户可访问",content:"本校已认证用户可以平台内容"}],e.$scope.select=function(t){e.$scope.simpleSetList.entryLevel=t.type},e.$scope.publish=function(){t=e.$scope.simpleSetList.entryLevel;var s={entryLevel:t};e.$simpleSetSrv.putSimpleSet(s).then(function(e){alert("保存设置成功！")})}},e.inheritFromCtrl(e.admin.simpleSetCtrl),e.registerDependency("gxb.controllers.admin.simpleSetCtrl",["gxb.services.tenants.simpleSetSrv"]),e.registerView("gxb.controllers.admin.simpleSetCtrl","administration/simpleset/index")}(gxb.controllers,gxb.utils),function(e,t){e.admin.studentListCtrl=function(e){var t=20;if(e.$scope.noData=null,e.$scope.dataList=null,e.$scope.isSearching=!1,e.$scope.tab=1,e.$scope.searchText="",0!=gxb.utils.localStorageUtils.get("isHome")?(gxb.utils.localStorageUtils.set("currentPage",1),gxb.utils.localStorageUtils.set("keyword","")):gxb.utils.localStorageUtils.set("isHome",!0),gxb.utils.localStorageUtils.get("currentPage"))var s=gxb.utils.localStorageUtils.get("currentPage")||1;if(gxb.utils.localStorageUtils.get("keyword")){var o=gxb.utils.localStorageUtils.get("keyword")||"";e.$scope.searchText=o}else var o="";var n=function(t,s,o){e.$studentListSrv.queryClassUser(t,s,o).then(function(t){if(e.$scope.isSearching=!!e.$scope.searchText,e.$scope.noData=!1,0==t.paging.total&&(e.$scope.noData=!0),e.$scope.dataList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})};e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:gxb.utils.localStorageUtils.get("currentPage")||1,pagenums:[]};var a="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",i=e.$scope.$new();$("#pagination").append(e.$compile(a)(i)[0]),e.$scope.onPageChange=function(){n(this.currentPage,t,o),gxb.utils.localStorageUtils.set("currentPage",this.currentPage)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.search()},e.$scope.guanli=function(e){window.location.href=gxb.settings.identifier.goLMS()+"/class/"+e,gxb.utils.localStorageUtils.set("isHome",!1)},e.$scope.goToClassMgr=function(e){window.location.href=gxb.settings.identifier.goLMS()+"/class/"},e.$scope.search=function(){o=e.$scope.searchText||"",e.$scope.ngPaginationConfig.pagenums=[],n(s,t,o),gxb.utils.localStorageUtils.set("keyword",o)},e.$scope.pageCount=function(a){t=a,e.$scope.ngPaginationConfig.pagenums=[],n(s,t,o)},n(s,t,o)},e.inheritFromCtrl(e.admin.studentListCtrl),e.registerDependency("gxb.controllers.admin.studentListCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.admin.studentListCtrl","administration/studentlist/index")}(gxb.controllers,gxb.utils),function(e,t){e["super"].activityCtrl=function(e){function t(t,s,o){e.$studentListSrv.activitiesData(t,s,o).then(function(t){if(e.$scope.activityListCtrl=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.isSearchingEvent=!!e.$scope.activityName,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})}e.$scope.deleteActivity=!0,e.$scope.activityListCtrl=null,e.$scope.isSearchingEvent=!1,e.$scope.activityName="";var s=20;if(0!=gxb.utils.localStorageUtils.get("isHome")?(gxb.utils.localStorageUtils.set("currentPage",1),gxb.utils.localStorageUtils.set("keyword","")):gxb.utils.localStorageUtils.set("isHome",!0),gxb.utils.localStorageUtils.get("currentPage"))var o=gxb.utils.localStorageUtils.get("currentPage")||1;if(gxb.utils.localStorageUtils.get("keyword")){var n=gxb.utils.localStorageUtils.get("keyword")||"";e.$scope.activityName=n}else var n="";t(n,o,s),e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:gxb.utils.localStorageUtils.get("currentPage")||1,pagenums:[]};var a="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",i=e.$scope.$new();$("#pagination").append(e.$compile(a)(i)[0]),e.$scope.onPageChange=function(){o=this.currentPage,t(n,o,s),gxb.utils.localStorageUtils.set("currentPage",this.currentPage)},e.$scope.search=function(){e.$scope.ngPaginationConfig.pagenums=[],n=e.$scope.activityName||"",t(n,o,s),gxb.utils.localStorageUtils.set("keyword",n)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.search()},e.$scope.deleteActivityData=function(t,s){e.$scope.deleteActivity=!1,e.$scope.activutyTitle=s,e.$scope.doingId=t},e.$scope.sureDelete=function(a){e.$studentListSrv.deleteActivity(a).then(function(a){1==a.status&&1==a.data&&(e.$scope.deleteActivity=!0,t(n,o,s))})},e.$scope.editActivity=function(e){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/activity/"+e),gxb.utils.localStorageUtils.set("isHome",!1)},e.$scope.creatActivity=function(){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/activity/new")},e.$scope.relationActivity=function(e,t){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/activity/relation/"+e+"?name="+t)}},e.inheritFromCtrl(e["super"].activityCtrl),e.registerDependency("gxb.controllers.super.activityCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.activityCtrl","super/activity/activity")}(gxb.controllers,gxb.utils),function(e,t){e["super"].addActivityCtrl=function(e){function s(e){if(e){var t=e.replace(/-/g,"/"),s=new Date(t),o=s.getTime().toString();return o}}var o=e.$state.params.id;e.$scope.title=o?"编辑":"创建",e.$scope.tip="",e.$scope.link="",e.$scope.start="",e.$scope.end="",e.$scope.check=function(t,s){0==s?t?t.length>50?e.$scope.tip="请控制在50个字以内":e.$scope.tip="":e.$scope.tip="请填写信息":1==s?t?e.$scope.link="":e.$scope.link="请填写信息":2==s?t?e.$scope.start="":e.$scope.start="请填写信息":3==s&&(t?e.$scope.end="":e.$scope.end="请填写信息")},e.$scope.save=function(){if(""==e.$scope.tip&&""==e.$scope.link&&""==e.$scope.start&""==e.$scope.end)if(o){var n={title:e.$scope.getActivityData.title,link:e.$scope.getActivityData.link,startAt:e.$scope.getActivityData.startAt,concludeAt:e.$scope.getActivityData.concludeAt};e.$studentListSrv.saveActivityData(o,n).then(function(e){1==e.status&&(window.location=gxb.utils.urlUtils.resolveUrl("/console/#/activity"))})}else{var n={title:e.$scope.getActivityData.title,link:e.$scope.getActivityData.link,startAt:s(t.datetimeUtils.minutes(e.$scope.getActivityData.startAt)),concludeAt:s(t.datetimeUtils.minutes(e.$scope.getActivityData.concludeAt))};e.$studentListSrv.creatActivityData(n).then(function(e){1==e.status&&(window.location=gxb.utils.urlUtils.resolveUrl("/console/#/activity"))})}else alert("请填写信息")},o&&e.$studentListSrv.editActivityData(o).then(function(t){e.$scope.getActivityData=t.data||[],e.$scope.$apply()}),e.$scope.cancle=function(){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/activity")}},e.inheritFromCtrl(e["super"].addActivityCtrl),e.registerDependency("gxb.controllers.super.addActivityCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.addActivityCtrl","super/activity/addActivity")}(gxb.controllers,gxb.utils),function(e,t){e["super"].relationClassCtrl=function(e){function t(t,s,o,n){e.$scope.checkedSource={},e.$studentListSrv.relationClassData(t,s,o,n).then(function(t){e.$scope.relationClassList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,e.$scope.checkClassList=[];for(var s=0,o=e.$scope.relationClassList.length;s<o;s++){var n=e.$scope.relationClassList[s];n&&(e.$scope.checkedSource["_"+n.classId]=n),e.$scope.checkClassList.push({classId:n.classId,className:n.className})}if(0==e.$scope.ngPaginationConfig.pagenums.length)for(var a=0;a<e.$scope.ngPaginationConfig.visiblePageCount;a++)e.$scope.ngPaginationConfig.pagenums.push(a+1);e.$scope.$apply()})}function s(t,s,o){e.$studentListSrv.getAddClassDataList(t,s,o).then(function(t){if(e.$scope.classList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig1.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig1.visiblePageCount=t.paging.totalPage>3?3:t.paging.totalPage,0==e.$scope.ngPaginationConfig1.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig1.visiblePageCount;s++)e.$scope.ngPaginationConfig1.pagenums.push(s+1);e.$scope.$apply(),e.$scope.showChecked()})}var o=e.$state.params.id;e.$scope.name=e.$state.params.name,e.$scope.addClass=!0;var n=1,a="",i=20;t(n,i,a,o),e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var c="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",r=e.$scope.$new();$("#pagination").append(e.$compile(c)(r)[0]),e.$scope.onPageChange=function(){n=this.currentPage,t(n,i,a,o)},e.$scope.search=function(){e.$scope.ngPaginationConfig.pagenums=[],a=e.$scope.classID||"",t(n,i,a,o)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.search()};var l=1,p=5,g="";e.$scope.addClassList=function(){e.$scope.addClass=!1,s(l,p,g),e.$scope.getCheckClassIdList=[],e.$scope.getCheckClassIdList=e.$scope.checkClassList},e.$scope.ngPaginationConfig1={pageCount:10,visiblePageCount:3,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var u="<gxbtmpagination conf='ngPaginationConfig1' page-count='ngPaginationConfig1.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",d=e.$scope.$new();$("#addClassify").append(e.$compile(u)(d)[0]),e.$scope.onPageChange=function(){l=this.currentPage,s(l,p,g)},e.$scope.showChecked=function(){$(".classlart i").each(function(){var t=$(this);$.each(e.$scope.getCheckClassIdList,function(e,s){s.classId==t.attr("data")&&(t.removeClass("icon-unchecked"),
t.addClass("icon-checked"))})})},e.$scope.onInit=function(t){this.a=!!e.$scope.checkedSource["_"+t.classId]},e.$scope.classSearch=function(){e.$scope.ngPaginationConfig1.pagenums=[],g=e.$scope.classifyName||"",s(l,p,g)},e.$scope.myKeyUp=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.classSearch()},e.$scope.getCheckClassIdList=[],e.$scope.checkItems=function(t,s){t?(e.$scope.checkedSource["_"+s.classId]=s,e.$scope.getCheckClassIdList.push({classId:s.classId,className:s.className})):(delete e.$scope.checkedSource["_"+s.classId],$.each(e.$scope.getCheckClassIdList,function(t,o){o.classId==s.classId&&e.$scope.getCheckClassIdList.splice(t,1)}))},e.$scope.remove=function(t){$(".classlart i").each(function(){var s=$(this);$.each(e.$scope.getCheckClassIdList,function(e,o){t==s.attr("data")&&(s.removeClass("icon-checked"),s.addClass("icon-unchecked"))})}),delete e.$scope.checkedSource["_"+t],$.each(e.$scope.getCheckClassIdList,function(s,o){o.classId==t&&e.$scope.getCheckClassIdList.splice(s,1)}),e.$scope.$apply()},e.$scope.qx=!0,e.$scope.quanxuan=function(t){e.$scope.qx=!t,t?$(".classlart i").each(function(){$(this).removeClass("icon-unchecked"),$(this).addClass("icon-checked");var t=$(this),s=!0;e.$scope.getCheckClassIdList&&$.each(e.$scope.getCheckClassIdList,function(e,o){return o.classId==t.attr("data")&&(s=!1),s}),1==s&&e.$scope.getCheckClassIdList.push({classId:t.attr("data"),className:t.attr("main")})}):$(".classlart i").each(function(){$(this).removeClass("icon-checked"),$(this).addClass("icon-unchecked");var t=$(this);$.each(e.$scope.getCheckClassIdList,function(s,o){o.classId==t.attr("data")&&e.$scope.getCheckClassIdList.splice(s,1)})})},e.$scope.sure=function(){var s=[];return $.each(e.$scope.getCheckClassIdList,function(e,t){s.push({classId:t.classId})}),0==s.length?void alert("添加的班次不能为空"):void e.$studentListSrv.sureSubmitData(o,s).then(function(s){1==s.status&&1==s.data&&(e.$scope.getCheckClassIdList=[],e.$scope.addClass=!0,t(n,i,a,o))})}},e.inheritFromCtrl(e["super"].relationClassCtrl),e.registerDependency("gxb.controllers.super.relationClassCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.relationClassCtrl","super/activity/relationClass")}(gxb.controllers,gxb.utils),function(e,t){e["super"].administrateCtrl=function(e){function t(t){e.$studentListSrv.studentDemend(t).then(function(t){e.$scope.studentList=t||[],e.$scope.$apply()},function(){console.log("获取账号信息失败")})}var s=e.$state.params.id;e.$scope.password=!0,e.$scope.font="重置",e.$scope.color="",e.$scope.reset=function(t){e.$scope.password=!0,e.$studentListSrv.resetPassword(t).then(function(t){1==t.status?(e.$scope.font="重置成功",e.$scope.color="succent",e.$scope.$apply()):(e.$scope.font="重置失败,请重试",e.$scope.color="faild",e.$scope.$apply())},function(){console.log("修改密码失败")})},e.$scope.accountResList=[],e.$studentListSrv.accountRes(s).then(function(t){e.$scope.accountResList=t||[],e.$scope.jbshow=!0,t.mobile||(e.$scope.jbshow=!1),t.email||(e.$scope.jbshow=!1),e.$scope.$apply()},function(){console.log("获取账号信息失败")}),e.$scope.studentList=[],t(s),e.$scope.remove=!0,e.$scope.relieveList=[],e.$scope.relieve=function(t,s,o,n){e.$scope.remove=!1,e.$scope.relieveList=[{tempId:t,studentId:s,userId:o,tenantId:n}]},e.$scope.reSure=function(o){e.$studentListSrv.relieve(o[0].tempId,o[0].studentId,o[0].userId,o[0].tenantId).then(function(o){o.status&&(e.$scope.remove=!0,e.$scope.$apply(),t(s))},function(){console.log("解除认证失败")})},e.$scope.back=function(){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/account")},e.$scope.remobile=!0,e.$scope.removemobile=function(t){e.$scope.remobile=!t},e.$scope.sureremovemobile=function(){e.$scope.remobile=!0,e.$scope.userVo={userId:e.$scope.accountResList.userId},e.$studentListSrv.removemobile(e.$scope.userVo).then(function(e){e?(alert("解绑成功"),window.location.reload()):alert("解绑失败")}),e.$scope.$apply()},e.$scope.modifyName=!0,e.$scope.modifyNameSure=function(t){t?e.$studentListSrv.modifilyName(s,t).then(function(t){1==t.status&&(e.$scope.modifyName=!1,window.location.reload())}):alert("姓名不可为空")}},e.inheritFromCtrl(e["super"].administrateCtrl),e.registerDependency("gxb.controllers.super.administrateCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.administrateCtrl","super/administrate/index")}(gxb.controllers,gxb.utils),function(e,t){e["super"].addMinistrateCtrl=function(e){var t=e.$state.params.userId||"";e.$scope.edit=!!t,e.$scope.mobile=!0,e.$scope.sex=!0,e.$scope.setAdmin=!0,e.$scope.adminData=[],t&&e.$studentListSrv.accountRes(t).then(function(t){e.$scope.adminData=t||[],e.$scope.$apply()}),e.$scope.adminRole=[],t&&e.$studentListSrv.getAdminRole(t).then(function(t){e.$scope.adminRole=t||{},e.$scope.data.checkedTenant=t.tenantList||[],e.$scope.tenantList=t.tenantList||[],e.$scope.$apply()}),e.$scope.checkIdSample=function(e,t){var s="";return e&&t&&$.each(e,function(e,o){if(o.roleId==t)return s="icon-checked",!1}),s},$(document).click(function(){$(document).find(".tenant-picker-tenantbox").hide()}),e.$scope.system=[],e.$scope.manager=[],e.$studentListSrv.getRole().then(function(t){$.each(t,function(t,s){"system"==s.type?e.$scope.system.push({name:s.name,id:s.roleId}):"manager"==s.type&&e.$scope.manager.push({name:s.name,id:s.roleId})}),e.$scope.$apply()}),e.$scope.queryRes=function(t){if(t){var s=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(/^1[3|4|5|7|8]\d{9}$/.test(t))e.$scope.mobile=!0,e.$scope.tips="";else{if(e.$scope.mobile=!1,e.$scope.tips="请输入正确的手机号",!s.test(t))return e.$scope.mobile=!1,void(e.$scope.tips="请输入正确的邮箱");e.$scope.mobile=!0,e.$scope.tips=""}e.$scope.roleList=[],e.$studentListSrv.queryUser(t).then(function(t){e.$scope.roleList=t.data.dataList||[],e.$scope.roleList&&e.$scope.roleList.length&&e.$scope.roleList.length>0?$.each(e.$scope.roleList,function(t,s){s.roleList&&s.roleList.length&&s.roleList.length>0?(e.$scope.mobile=!1,e.$scope.tips="此账号已被设为管理员，请勿重新设置"):(e.$scope.mobile=!1,e.$scope.setAdmin=!0,e.$scope.tips="此账号可以添加管理员",e.$scope.edit=!0,e.$scope.userIds=e.$scope.roleList&&e.$scope.roleList.length&&e.$scope.roleList[0].userId)}):(e.$scope.edit=!1,e.$scope.mobile=!0,e.$scope.setAdmin=!1),e.$scope.$apply()},function(){console.log("查询失败")})}else e.$scope.mobile=!1,e.$scope.tips="请输入手机号或邮箱"},e.$scope.data={hasMulti:!0,checkedTenant:[],onChanged:function(t){checkedTenant=t,e.$scope.tenantList=t}},e.$scope.save=function(){if("此账号已被设为管理员，请勿重新设置"!=e.$scope.tips){if(e.$scope.tenantId=[],void 0!=e.$scope.tenantList&&$.each(e.$scope.tenantList,function(t,s){e.$scope.tenantId.push(s.id)}),e.$scope.sysRoleIdList=[],$(".ge li i").each(function(){$(this).hasClass("icon-checked")&&e.$scope.sysRoleIdList.push($(this).attr("data"))}),e.$scope.roleIdList=[],$(".smart li i").each(function(){$(this).hasClass("icon-checked")&&e.$scope.roleIdList.push($(this).attr("data"))}),0==e.$scope.sysRoleIdList.length&&0==e.$scope.roleIdList.length)return void alert("请选择角色");if(e.$scope.roleIdList.length>0&&(void 0==e.$scope.tenantList||""==e.$scope.tenantList||null==e.$scope.tenantList))return void alert("请选择学校");var s={roleIds:e.$scope.roleIdList||[],sysRoleIds:e.$scope.sysRoleIdList||[],tenantIds:e.$scope.tenantId||[],userName:e.$scope.accountNum||"",name:e.$scope.name||e.$scope.adminData.name||e.$scope.roleList&&e.$scope.roleList.length&&e.$scope.roleList[0].name||""};if(t)e.$studentListSrv.editAdminData(t,s).then(function(e){1==e&&(window.location=gxb.utils.urlUtils.resolveUrl("/console/#/adminrole"))},function(){console.log("添加管理员失败")});else{if(""==e.$scope.accountNum)return e.$scope.mobile=!1,void(e.$scope.tips="请输入手机号或邮箱");if(e.$scope.mobile=!0,e.$scope.tips="",""==e.$scope.name)return e.$scope.sex=!1,void(e.$scope.tip="请输入姓名");e.$scope.sex=!0,e.$scope.tip="",e.$studentListSrv.addAdminData(e.$scope.userIds||"",s).then(function(e){1==e&&(window.location=gxb.utils.urlUtils.resolveUrl("/console/#/adminrole"))},function(){console.log("添加管理员失败")})}}else alert("此账号已被设为管理员，请勿重新设置")},e.$scope.cancel=function(){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/adminrole")}},e.inheritFromCtrl(e["super"].addMinistrateCtrl),e.registerDependency("gxb.controllers.super.addMinistrateCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.addMinistrateCtrl","super/adminrole/addministrate")}(gxb.controllers,gxb.utils),function(e,t){e["super"].adminRoleCtrl=function(e){function t(t,s,o,n,a){e.$studentListSrv.adminPerson("system",t,s,o,n,a||"").then(function(t){if(e.$scope.accountList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()},function(){console.log("获取管理列表失败")})}var s=20;e.$scope.accountList=null,e.$scope.roleList=[];var o="";if(e.$scope.$tips="全部",e.$scope.tab=1,0!=gxb.utils.localStorageUtils.get("isHome")?(gxb.utils.localStorageUtils.set("currentPage",1),gxb.utils.localStorageUtils.set("keyword",""),gxb.utils.localStorageUtils.set("roleId",""),gxb.utils.localStorageUtils.set("roleName","请选择学校")):gxb.utils.localStorageUtils.set("isHome",!0),gxb.utils.localStorageUtils.get("currentPage"))var n=gxb.utils.localStorageUtils.get("currentPage")||1;if(gxb.utils.localStorageUtils.get("keyword")){var a=gxb.utils.localStorageUtils.get("keyword")||"";e.$scope.searchText=a}else var a="";if(gxb.utils.localStorageUtils.get("roleId"))var i=gxb.utils.localStorageUtils.get("roleId")||"";else var i="";e.$scope.data={schoolName:gxb.utils.localStorageUtils.get("roleName"),onChanged:function(t,s){gxb.utils.localStorageUtils.set("roleId",s),gxb.utils.localStorageUtils.set("roleName",t),i=s,e.$scope.ngPaginationConfig.pagenums=[],e.$scope.addPaging(),e.$scope.filter(s)}},e.$scope.filter=function(e){i=e,t(n,s,a,i,o)},e.$scope.addTenant=function(){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/adminrole/new")},e.$scope.editAdmin=function(e){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/adminrole/"+e),gxb.utils.localStorageUtils.set("isHome",!1)},e.$scope.deleteUserObject=null,e.$scope.deleteAdmin=function(t){e.$scope.deleteUserObject=t},e.$scope.deleteAdminCancel=function(){e.$scope.deleteUserObject=null},e.$scope.deleteAdminOK=function(){e.$scope.deleteUserObject&&e.$studentListSrv.deleteAdminor(e.$scope.deleteUserObject.userId).then(function(o){t(n,s,a,i),console.log("delete"),e.$scope.deleteUserObject=null})},e.$scope.search=function(){a=e.$scope.searchText||"",e.$scope.ngPaginationConfig.pagenums=[],e.$scope.addPaging(),t(n,s,a,i,o),gxb.utils.localStorageUtils.set("keyword",a)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.search()},e.$scope.pageCount=function(c){s=c,e.$scope.ngPaginationConfig.pagenums=[],t(n,s,a,i,o)},e.$scope.addPaging=function(){e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:gxb.utils.localStorageUtils.get("currentPage")||1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>";$("#pagination").empty(),$("#pagination").append(e.$compile(t)(e.$scope)[0])},e.$scope.addPaging(),e.$scope.onPageChange=function(){t(this.currentPage,s,a,i,o),gxb.utils.localStorageUtils.set("currentPage",this.currentPage)},t(n,s,a,i,o)},e.inheritFromCtrl(e["super"].adminRoleCtrl),e.registerDependency("gxb.controllers.super.adminRoleCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.adminRoleCtrl","super/adminrole/adminor")}(gxb.controllers,gxb.utils),function(e,t){e["super"].appControllCtrl=function(e){var t=1,s=5,o="",n="";e.$scope.showNum=1,e.$scope.savePic=function(){if($(".accountInput").val())var t=new Date($(".accountInput").val()+" 00:00:00").getTime();else var t="";var s={imgTitle:e.$scope.picNameValue||"",imgUrl:e.$scope.realImageUrl3||"",startAt:t,btnUrl:e.$scope.realImageUrl4||""};s.imgTitle&&s.imgUrl&&s.startAt?e.$carouselSrv.appPupupSrv(s).then(function(t){t&&(e.$scope.isShowTab=0,e.$scope.getImgList(),e.$scope.$apply())},function(e){alert(e.msg)}):alert("信息填写不完整,请检查")},e.$scope.showPopupView=function(t){1==t?(e.$scope.percentage3=0,e.$scope.percentage4=0,e.$scope.isShowTab=1,e.$scope.isPicEditor=0,$(".namePicEditor").val(""),$(".srcPicEditor").attr("src",""),$(".accountInputEditor").val(""),$(".fontNameEditor").val(""),$(".fontContentEditor").val(""),$(".accountInputFontEditor").val("")):2==t&&(e.$scope.fontNameValue="",e.$scope.fontBodyValue="",$(".accountInputFont").val(""),e.$scope.editPopTxtId="no",e.$scope.isShowTab=2)},e.$scope.goInfoView=function(t){e.$scope.viewNum=1,e.$scope.viewpopTxt=t.body,e.$scope.viewpopTxtFrom=t.title,e.$carouselSrv.appPopupView().then(function(t){e.$scope.imgUrl=t.imgUrl,e.$scope.$apply()})},e.$scope.picEditor=function(t){n=t;var s=(t.id,t.imgTitle),o=t.imgUrl,a=t.startAt;e.$scope.isShowTab=1,e.$scope.isPicEditor=1,$(".namePicEditor").val(s),$(".srcPicEditor").attr("src",o),$(".accountInputEditor").val(a)},e.$scope.savePicEditor=function(){if($(".accountInput").val())var t=new Date($(".accountInput").val()+" 00:00:00").getTime();else var t="";var s={imgTitle:$(".namePicEditor").val()||"",imgUrl:e.$scope.realImageUrl3||"",startAt:t};e.$carouselSrv.appPicEditorSrv(s,n.id).then(function(t){t&&(e.$scope.isShowTab=0,e.$scope.getImgList(),e.$scope.$apply())},function(e){alert(e.msg)})},e.$scope.saveInfo=function(t){if($(".accountInputFont").val())var s=new Date($(".accountInputFont").val()+" 00:00:00").getTime();else var s="";var o={title:e.$scope.fontNameValue||"",body:e.$scope.fontBodyValue||"",startAt:s};o.title&&o.body&&o.startAt?"no"==t?e.$carouselSrv.appFontPupupSrv(o).then(function(t){t&&(e.$scope.isShowTab=0,e.$scope.getTxtList(),e.$scope.$apply())},function(e){alert(e.msg)}):e.$carouselSrv.editPupTxt(t,o).then(function(t){t&&(e.$scope.isShowTab=0,e.$scope.getTxtList(),e.$scope.$apply())},function(e){alert(e.msg)}):alert("信息填写不完整,请检查")},e.$scope.load_app_list=function(t,s,o){e.$carouselSrv.appPic_list(t,s,o).then(function(t){if(e.$scope.sliders=t.dataList||[],e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>5?5:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()},function(e){alert(e.msg)})},e.$scope.load_app_list("online",t,o),e.$scope.uploadData={fileElementID:".slide_file_element",isImage:!0,autoupload:!0,cutImage:!0,size:["750*1334"],cdnPrefix:gxb.settings.cdn.wangsu.getPaths().uploads_app_startup_prefix,cdnBucket:gxb.settings.cdn.wangsu.getBuckets().imageBucket,onSuccess:function(t){e.$scope.sliderItem.imageUrl=t.absoluteUrl,e.$scope.sliderItem.realImageUrl=t.relativeUrl,e.$scope.$apply()},onProgress:function(t){e.$scope.percentage=100*t.percentage,e.$scope.$apply()}},e.$scope.uploadDataApp={fileElementID:".slide_file_element_app",isImage:!0,autoupload:!0,cutImage:!0,size:["632*911"],cdnPrefix:gxb.settings.cdn.wangsu.getPaths().uploads_app_popup_prefix,cdnBucket:gxb.settings.cdn.wangsu.getBuckets().imageBucket,onSuccess:function(t){console.log(t),e.$scope.imageUrl3=t.absoluteUrl,e.$scope.realImageUrl3=t.relativeUrl,e.$scope.$apply()},onProgress:function(t){e.$scope.percentage3=100*t.percentage,e.$scope.$apply()}},e.$scope.uploadDataAppBtn={fileElementID:".slide_file_element_app_btn",isImage:!0,autoupload:!0,cutImage:!0,size:["257*72"],cdnPrefix:gxb.settings.cdn.wangsu.getPaths().uploads_app_popup_prefix,cdnBucket:gxb.settings.cdn.wangsu.getBuckets().imageBucket,onSuccess:function(t){console.log(t),e.$scope.imageUrl4=t.absoluteUrl,e.$scope.realImageUrl4=t.relativeUrl,e.$scope.$apply()},onProgress:function(t){e.$scope.percentage4=100*t.percentage,e.$scope.$apply()}},e.$scope.uploadData1={fileElementID:".slide_file_element1",isImage:!0,autoupload:!0,cutImage:!0,size:["1080*1920"],cdnPrefix:gxb.settings.cdn.wangsu.getPaths().uploads_app_startup_prefix,cdnBucket:gxb.settings.cdn.wangsu.getBuckets().imageBucket,onSuccess:function(t){e.$scope.sliderItem.imageUrl1=t.absoluteUrl,e.$scope.sliderItem.realImageUrl1=t.relativeUrl,e.$scope.$apply()},onProgress:function(t){e.$scope.percentage1=100*t.percentage,e.$scope.$apply()}},e.$scope.sliders=null,e.$scope.isAddEvent=null;var a=function(){return{title:"",imageUrl:"",realImageUrl:"",url:"",id:"",position:1,assetId:""}};e.$scope.sliderItem=null,e.$scope.deleteSliderItem=null,e.$scope.onAddEvent=function(){e.$scope.percentage=0,e.$scope.percentage1=0,e.$scope.sliderItem=a()},e.$scope.closeWindow=function(){e.$scope.sliderItem=null,e.$scope.isAddEvent=null},e.$scope.saveAndPublish=function(){var s=e.$scope.sliderItem,n={imageName:s.title,iosUrl:e.$scope.sliderItem.realImageUrl,androidUrl:e.$scope.sliderItem.realImageUrl1,status:"online"};if(!n.imageName||!n.iosUrl||!e.$scope.isAddEvent&&!n.androidUrl)return void alert("数据不完整");var a=function(s){1==s.status&&"success"==s.message&&(e.$scope.closeWindow(),e.$scope.load_app_list("online",t,o))};e.$carouselSrv.appPic_add(n).then(a,function(e){alert(e.msg)})},e.$scope.onDeleteEvent=function(t){e.$scope.deleteSliderItem=t,e.$scope.isAddEvent=!0},e.$scope.onDeleteEvent1=function(t){e.$scope.deleteSliderItem=t,e.$scope.isAddEvent=!1},e.$scope.onDeleteEventCancel=function(){e.$scope.deleteSliderItem=null,e.$scope.deleteSliderItem1=null},e.$scope.cancelPublish=function(){var s={id:e.$scope.deleteSliderItem.id,status:"offline"};e.$carouselSrv.appPic_update(s).then(function(s){e.$scope.onDeleteEventCancel(),e.$scope.load_app_list("online",t,o)},function(e){alert(e.msg)})},e.$scope.re_Publish=function(){var o={id:e.$scope.deleteSliderItem.id,status:"online"};e.$carouselSrv.appPic_update(o).then(function(o){e.$scope.onDeleteEventCancel(),e.$scope.load_app_list("offline",t,s),i()},function(e){alert(e.msg)})},e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var i=function(){e.$scope.ngPaginationConfig={pageCount:1,visiblePageCount:5,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",s=e.$scope.$new();$("#pagination").empty(),$("#pagination").append(e.$compile(t)(s)[0])};e.$scope.addPage=function(){i()},i(),e.$scope.onPageChange=function(){t=this.currentPage,e.$scope.load_app_list("offline",t,s)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.onPageChange()},e.$scope.getImgList=function(){e.$carouselSrv.appPupPicList().then(function(t){e.$scope.popImgList=t||[],e.$scope.$apply()})},e.$scope.getTxtList=function(){e.$carouselSrv.appPupTxtList().then(function(t){e.$scope.popTxtList=t||[],e.$scope.$apply()})},e.$scope.delPopImg=function(t){e.$carouselSrv.deletePupImg(t).then(function(t){t&&(alert("删除成功"),e.$scope.getImgList(),e.$scope.$apply())},function(e){alert(e.msg)})},e.$scope.delPopTxt=function(t){e.$carouselSrv.deletePupTxt(t).then(function(t){t&&(alert("删除成功"),e.$scope.getTxtList(),e.$scope.$apply())},function(e){alert(e.msg)})},e.$scope.editPopTxt=function(t){e.$scope.fontNameValue=t.title,e.$scope.fontBodyValue=t.body,$(".accountInputFont").val(t.startAt),e.$scope.editPopTxtId=t.id,e.$scope.isShowTab=2,e.$scope.$apply()}},e.inheritFromCtrl(e["super"].appControllCtrl),e.registerDependency("gxb.controllers.super.appControllCtrl",["gxb.services.tenants.carouselSrv","gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.appControllCtrl","super/appControll/appControll")}(gxb.controllers,gxb.utils),function(e,t){e["super"].essayCommentCtrl=function(e){function t(e){for(var t=0,s=0;s<e.length;s++){var o=e.charCodeAt(s);o>=1&&o<=126||65376<=o&&o<=65439?t++:t++}return t}e.$scope.tab=0,e.$scope.commTab=0,e.$scope.show=0,e.$scope.message="",e.$scope.id="",e.$scope.postTab=0,e.$scope.replyTab=0;var s=window.location.href,o=s.lastIndexOf("/"),n=s.substring(o+1,s.length),a=10,i=function(t,s,o){e.$chargingPageSrv.getFeatured(t,s,o).then(function(t){if(t.data.dataList){if(e.$scope.total=t.data.paging.total,e.$scope.ngPaginationConfig.pageCount=t.data.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.data.paging.totalPage>10?10:t.data.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);var o=[];e.$scope.commTab=0;for(var s=0;s<t.data.dataList.length;s++)t.data.dataList[s].ranking="取消上墙",o[s]=t.data.dataList[s];e.$scope.commentList=o,e.$scope.$apply()}else e.$scope.commTab=1,e.$scope.$apply()})},c=function(t,s,o){e.$chargingPageSrv.getMoreComm(t,s,o).then(function(t){if(t.data.dataList){if(e.$scope.total=t.data.paging.total,e.$scope.ngPaginationConfig1.pageCount=t.data.paging.totalPage,e.$scope.ngPaginationConfig1.visiblePageCount=t.data.paging.totalPage>10?10:t.data.paging.totalPage,0==e.$scope.ngPaginationConfig1.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig1.visiblePageCount;s++)e.$scope.ngPaginationConfig1.pagenums.push(s+1);var o=[];e.$scope.commTab=0;for(var s=0;s<t.data.dataList.length;s++)t.data.dataList[s].postList&&(e.$scope.postList=t.data.dataList[s].postList),t.data.dataList[s].ranking="上墙",o[s]=t.data.dataList[s];e.$scope.commentList=o,e.$scope.$apply()}else e.$scope.commTab=1,e.$scope.$apply()})};e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]},e.$scope.ngPaginationConfig1={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]},e.$chargingPageSrv.getChargingIntro(n).then(function(t){e.$scope.comment=t.data,i(n,1,a);var s="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",o=e.$scope.$new();$("#pagination").append(e.$compile(s)(o)[0]),e.$scope.$apply()}),e.$scope.featured=function(){$(".newsSiftComment").hasClass("active")||(e.$scope.tab=0,i(n,1,a),setTimeout(function(){var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",s=e.$scope.$new();$("#pagination").append(e.$compile(t)(s)[0])},500))},e.$scope.onPageChange=function(){0==e.$scope.tab?i(n,this.currentPage,a):c(n,this.currentPage,a)},e.$scope.reply=function(t){e.$scope.show=1,e.$scope.id=t},e.$scope.changeNum=function(s){s&&(e.$scope.num=t(s))},e.$scope.cancelMes=function(){e.$scope.show=0},e.$scope.replyMes=function(t,s){if(""==s||null==s)return alert("回复不能为空！"),!1;var o={content:s,commentId:t};e.$chargingPageSrv.replyMessage(o).then(function(s){if("success"==s.message){e.$scope.show=0,e.$scope.replyTab=1,e.$scope.postTab=1;for(var o=0;o<e.$scope.commentList.length;o++)e.$scope.commentList[o].commentId==t&&(e.$scope.commentList[o].postList=[],e.$scope.commentList[o].postList[0]=s.data,console.log(e.$scope.commentList[o]));e.$scope.$apply()}})},e.$scope.moreComment=function(){$(".newsMoreComment").hasClass("active")||(e.$scope.tab=1,c(n,1,a),setTimeout(function(){var t="<gxbtmpagination conf='ngPaginationConfig1' page-count='ngPaginationConfig1.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",s=e.$scope.$new();$("#pagination1").append(e.$compile(t)(s)[0])},500))},e.$scope.ranking=function(t,s){"取消上墙"==s?e.$chargingPageSrv.commentIsWill(t,0).then(function(s){if(console.log(s),"success"==s.message){alert("操作成功");for(var o=0;o<e.$scope.commentList.length;o++)e.$scope.commentList[o].commentId==t&&(e.$scope.commentList[o].ranking="上墙");e.$scope.$apply()}}):e.$chargingPageSrv.commentIsWill(t,1).then(function(s){if("success"==s.message){alert("操作成功");for(var o=0;o<e.$scope.commentList.length;o++)e.$scope.commentList[o].commentId==t&&(e.$scope.commentList[o].ranking="取消上墙");e.$scope.$apply()}})},e.$scope.commentIsTop=function(t){e.$chargingPageSrv.commentIsTop(t).then(function(s){if("success"==s.message){alert("操作成功");for(var o=0;o<e.$scope.commentList.length;o++)e.$scope.commentList[o].commentId==t&&(e.$scope.commentList[o].position="1");e.$scope.$apply()}})},e.$scope.commentIsTopCancel=function(t){e.$chargingPageSrv.commentIsTopCancel(t).then(function(s){if("success"==s.message){alert("操作成功");for(var o=0;o<e.$scope.commentList.length;o++)e.$scope.commentList[o].commentId==t&&(e.$scope.commentList[o].position="0");e.$scope.$apply()}})},e.$scope.deleteR=function(t,s){e.$chargingPageSrv.deleteReply(s).then(function(s){if(console.log(s),"success"==s.message){alert("操作成功！"),e.$scope.replyTab=0,e.$scope.postTab=0;for(var o=0;o<e.$scope.commentList.length;o++)e.$scope.commentList[o].commentId==t&&(e.$scope.commentList[o].postList=[]);e.$scope.$apply()}})}},e.inheritFromCtrl(e["super"].essayCommentCtrl),e.registerDependency("gxb.controllers.super.essayCommentCtrl",["gxb.services.tenants.chargingPageSrv"]),e.registerView("gxb.controllers.super.essayCommentCtrl","super/appControll/essayComment")}(gxb.controllers,gxb.utils),function(e,t){e["super"].newEssayCtrl=function(e){function t(e){for(var t=0,s=0;s<e.length;s++){var o=e.charCodeAt(s);o>=1&&o<=126||65376<=o&&o<=65439?t++:t++}return t}var s=window.location.href,o=s.lastIndexOf("/"),n=s.substring(o+1,s.length),a="";e.$scope.changeTitle=!1,e.$scope.changeAuthor=!1,e.$scope.changeIntro=!1,$(".admin_left").hide(),$("#gxb-header").hide(),e.$scope.amend=0,e.$scope.messageData={message:"",id:""},e.$scope.editorData={content:"",size:{height:"400px"}},"0"!=n?e.$chargingPageSrv.getChargingIntro(n).then(function(s){console.log(s),s.data&&(s.data.articleId&&(a=s.data.articleId),e.$chargingPageSrv.getChargingCategory().then(function(t){if(t.data){for(var o=[],n=0;n<t.data.length;n++)"0"!=s.data.categoryId&&t.data[n].categoryId==s.data.categoryId&&(e.$scope.classify=t.data[n].categoryName,e.$scope.classify=t.data[n].categoryId),o[n]=t.data[n];e.$scope.category=o;var a={categoryName:"---",categoryId:"-1"};e.$scope.category.unshift(a),s.data.categoryId||(e.$scope.classify="---",e.$scope.classify=e.$scope.category[0].categoryId),e.$scope.$apply()}}),s.data.content?e.$scope.editorData.content=s.data.content:e.$scope.editorData.content="",s.data.desc?(e.$scope.intro=s.data.desc,e.$scope.introNum=t(s.data.desc)):e.$scope.intro="",s.data.author?(e.$scope.author=s.data.author,e.$scope.authorNum=t(s.data.author)):e.$scope.author="",s.data.cover?(e.$scope.imageUrl=gxb.settings.cdn.wangsu.getDomains().defaultBucketDomain+s.data.cover,e.$scope.realImageUrl=s.data.cover):(e.$scope.imageUrl="",e.$scope.realImageUrl=""),e.$scope.title=s.data.title,e.$scope.number=t(s.data.title))}):(e.$chargingPageSrv.getChargingCategory().then(function(t){if(t.data){for(var s=[],o=0;o<t.data.length;o++)s[o]=t.data[o];e.$scope.category=s;var n={categoryName:"---",categoryId:"-1"};e.$scope.category.unshift(n),e.$scope.classify="---",e.$scope.classify=e.$scope.category[0].categoryId,e.$scope.$apply()}}),e.$scope.title="",e.$scope.author="",e.$scope.intro="",e.$scope.imageUrl="",e.$scope.realImageUrl=""),e.$scope.getCode=function(){e.$scope.title&&(e.$scope.number=t(e.$scope.title))},e.$scope.getAuthorCode=function(){e.$scope.author&&(e.$scope.authorNum=t(e.$scope.author))},e.$scope.getIntroCode=function(){e.$scope.intro&&(e.$scope.introNum=t(e.$scope.intro))},e.$scope.uploadData={fileElementID:"slide_file_element",isImage:!0,autoupload:!0,cutImage:!0,size:["100*100"],cdnPrefix:gxb.settings.cdn.wangsu.getPaths().charge_cover_bucket,cdnBucket:gxb.settings.cdn.wangsu.getBuckets().defaultBucket,onSuccess:function(t){console.log(t),e.$scope.imageUrl=t.absoluteUrl,e.$scope.realImageUrl=t.relativeUrl,e.$scope.$apply()}},e.$scope.saveDraft=function(){if(""==e.$scope.title)e.$scope.amend=1,e.$scope.messageData.message="文章标题不能为空！",e.$scope.messageData.id="1";else if(a){var t={title:e.$scope.title,author:e.$scope.author,desc:e.$scope.intro,categoryId:e.$scope.classify,content:e.$scope.editorData.content,cover:e.$scope.realImageUrl,articleId:a,status:0};"-1"==e.$scope.classify&&(t.categoryId=""),e.$chargingPageSrv.publishEssay(t).then(function(e){console.log(e),"success"==e.message&&alert("保存草稿成功！")})}else{var s={title:e.$scope.title,author:e.$scope.author,desc:e.$scope.intro,categoryId:e.$scope.classify,content:e.$scope.editorData.content,cover:e.$scope.realImageUrl,status:0};"-1"==e.$scope.classify&&(s.categoryId=""),e.$chargingPageSrv.newEssay(s).then(function(e){console.log(e),"success"==e.message&&(a=e.data.articleId,console.log(a),alert("保存草稿成功！"))})}},e.$scope.publishEssay=function(){return"-1"==e.$scope.classify?(alert("请选择文章归类"),!1):""==e.$scope.title?(alert("请填写文章标题！"),!1):""==e.$scope.author?(alert("请填写文章作者！"),!1):""==e.$scope.intro?(alert("请填写文章简介！"),!1):""==e.$scope.imageUrl?(alert("请上传文章封面！"),!1):""==e.$scope.editorData.content?(alert("请填写正文内容！"),!1):void(a?(e.$scope.essayData={title:e.$scope.title,author:e.$scope.author,desc:e.$scope.intro,categoryId:e.$scope.classify,content:e.$scope.editorData.content,cover:e.$scope.realImageUrl,articleId:a,status:1},e.$scope.amend=1,e.$scope.messageData.message="已发布的文章不支持再修改，请审核无误后再发布。确定现在就发布吗？",e.$scope.messageData.id="2"):(e.$scope.essayData={title:e.$scope.title,author:e.$scope.author,desc:e.$scope.intro,categoryId:e.$scope.classify,content:e.$scope.editorData.content,cover:e.$scope.realImageUrl,status:1},e.$scope.amend=1,e.$scope.messageData.message="已发布的文章不支持再修改，请审核无误后再发布。确定现在就发布吗？",e.$scope.messageData.id="2"))},e.$scope.amendFalse=function(){e.$scope.amend=0,e.$scope.$apply()},e.$scope.amendTrue=function(){"1"==e.$scope.messageData.id?e.$scope.amend=0:"2"==e.$scope.messageData.id&&(a?e.$chargingPageSrv.publishEssay(e.$scope.essayData).then(function(t){console.log(t),"success"==t.message&&(alert("发布成功，请关闭当前页！"),e.$scope.amend=0,e.$scope.$apply())}):e.$chargingPageSrv.newEssay(e.$scope.essayData).then(function(t){console.log(t),"success"==t.message&&(alert("发布成功，请关闭当前页！"),e.$scope.amend=0,e.$scope.$apply())}))}},e.inheritFromCtrl(e["super"].newEssayCtrl),e.registerDependency("gxb.controllers.super.newEssayCtrl",["gxb.services.tenants.chargingPageSrv"]),e.registerView("gxb.controllers.super.newEssayCtrl","super/appControll/newEssay")}(gxb.controllers,gxb.utils),function(e,t){e["super"].newsFeedCategoryMgrCtrl=function(e){function t(t,s,o,n){e.$chargingPageSrv.getChargingArticle(t,s,o,n).then(function(t){if(t.data.dataList){if(e.$scope.essayList=[],e.$scope.total=t.data.paging.total,e.$scope.ngPaginationConfig.pageCount=t.data.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.data.paging.totalPage>10?10:t.data.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.essayList=t.data.dataList,e.$scope.categoryTab=0,e.$scope.$apply();for(var o=0;o<e.$scope.essayList.length;o++)for(var n=0;n<e.$scope.chargingList.length;n++)e.$scope.essayList[o].categoryId==e.$scope.chargingList[n].categoryId&&(c=e.$scope.chargingList[n].categoryId)}else e.$scope.categoryTab=1,e.$scope.essayList=[],e.$scope.total=0,e.$scope.$apply()})}function s(t,s,o,n){e.$chargingPageSrv.getDraftCharging(t,s,o,n).then(function(t){if(t.data.dataList){if(e.$scope.total=t.data.paging.total,e.$scope.ngPaginationConfig.pageCount=t.data.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.data.paging.totalPage>10?10:t.data.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);
e.$scope.essayList=t.data.dataList,e.$scope.categoryTab=0,e.$scope.$apply()}else e.$scope.categoryTab=1,e.$scope.essayList=[],e.$scope.total=0,e.$scope.$apply()})}function o(){e.$chargingPageSrv.getChargingCategory().then(function(t){if(t.data){for(var s=[],o=0;o<t.data.length;o++)s[o]=t.data[o];r=s,e.$scope.chargingList=s,e.$scope.$apply()}})}function n(){e.$chargingPageSrv.getChargingCategory().then(function(o){if(o.data.length>0){for(var n=[],c=0;c<o.data.length;c++)o.data[c].show=!1,n[c]=o.data[c];e.$scope.category=n,e.$scope.cateName=e.$scope.category[0].categoryId;var r={categoryName:"【 草稿箱 】",categoryId:-1,show:!1},p={categoryName:"【 已下线文章 】",categoryId:-2,show:!1};if(e.$scope.category.push(r),e.$scope.category.push(p),gxb.utils.localStorageUtils.get("categoryId")){l=gxb.utils.localStorageUtils.get("categoryId"),i=gxb.utils.localStorageUtils.get("categoryId");for(var g=0;g<e.$scope.category.length;g++)e.$scope.category[g].categoryId==gxb.utils.localStorageUtils.get("categoryId")&&(e.$scope.category[g].show=!0)}else e.$scope.category[0].show=!0,i=e.$scope.category[0].categoryId;gxb.utils.localStorageUtils.set("categoryId",i),l?l==-1?s(0,1,a,""):l==-2?s(2,1,a,""):t(l,1,a,""):t(e.$scope.category[0].categoryId,1,a,""),e.$scope.$apply()}else{var u=[{categoryName:"【 草稿箱 】",categoryId:-1,show:!1},{categoryName:"【 已下线文章 】",categoryId:-2,show:!1}];e.$scope.categoryAdd=u,e.$scope.category[0].show=!0,e.$scope.$apply()}})}var a=10,i="",c="",r=[],l="";e.$scope.changeIntro=!1,$("#textInput").val(""),e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]},gxb.utils.localStorageUtils.get("cateTab")?e.$scope.appMen=gxb.utils.localStorageUtils.get("cateTab"):e.$scope.appMen=0,e.$scope.unRead=0,e.$scope.inputAlert=0,e.$scope.amend=0,e.$scope.amendFalse=function(){e.$scope.amend=0,e.$scope.$apply()},e.$scope.chargingPapeList=[{tittle:"新建分类",name:"建议类别数不超过10个,类别名称建议不超过6个字"},{tittle:"重命名",name:"类别名称建议不超过6个字"},{message:"仅删除该分类，文章本身不会被删除。删除后，分类下的文章可在【草稿箱】找回，请及时对文章进行重新归类。确认要删除吗？"},{message:"确认后会立即生效对类别的所有修改操作。确认发布？"},{message:"有改动尚未发布，确认后会自动忽视之前的操作并离开当前页面。确认离开吗？"},{message:"确定要下线本文章？"},{message:"删除后无法找回，确认要删除本草稿？"}],o(),n(),setTimeout(function(){var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",s=e.$scope.$new();$("#pagination").append(e.$compile(t)(s)[0])},2e3),e.$scope.showPage=function(){e.$scope.appMen=0,o(),gxb.utils.localStorageUtils.set("cateTab",e.$scope.appMen)},e.$scope.sortableOptions={handle:".dragHandles",ghostClass:"ghost",animation:150,onEnd:function(t){var s=$(t.item).attr("classCategoryId"),n=$(t.item).attr("position"),a=$(t.item).next("li").attr("position"),i=$(t.item).prev("li").attr("position");1*n<1*i?e.$chargingPageSrv.TzName(s,i).then(function(e){"success"==e.message&&o()}):1*n>1*a&&e.$chargingPageSrv.TzName(s,a).then(function(e){"success"==e.message&&o()})}},e.$scope.newCreateBtn=function(){e.$scope.inputAlert=1,e.$scope.createchargingTittle=e.$scope.chargingPapeList[0].tittle,e.$scope.createchargingName=e.$scope.chargingPapeList[0].name,$("#textInput").val(""),e.$scope.removeInput=function(t){t.$setPristine(),e.$scope.inputAlert=0},e.$scope.sureInput=function(t){if(""===$("#textInput").val())alert("名称不能为空哦");else{var s={categoryName:t,position:e.$scope.chargingList.length+1};e.$chargingPageSrv.addPageView(s).then(function(t){"success"===t.message&&(e.$scope.completedState=1,s.categoryId=parseInt(t.data.categoryId),e.$scope.chargingList.push(s),e.$scope.$apply())}),e.$scope.inputAlert=0}}},e.$scope.removeCharging=function(t){e.$scope.amend=1,e.$scope.deletePageData=e.$scope.chargingPapeList[2].message,e.$scope.amendTrue=function(){e.$scope.amend=0,e.$chargingPageSrv.deleteName(t).then(function(s){if("success"===s.message)for(var o=0;o<e.$scope.chargingList.length;o++)e.$scope.chargingList[o].categoryId===t&&e.$scope.chargingList.splice(o,1);e.$scope.$apply()})}},e.$scope.amendFull=function(){e.$chargingPageSrv.getChargingCategory().then(function(t){if(t.data){for(var s=[],o=0;o<t.data.length;o++)s[o]=t.data[o];e.$scope.nullData=s,e.$scope.$apply()}})},e.$scope.copyCharging=function(t,s){e.$scope.inputAlert=1,e.$scope.createchargingTittle=e.$scope.chargingPapeList[1].tittle,e.$scope.createchargingName=e.$scope.chargingPapeList[1].name,$("#textInput").val(s),e.$scope.removeInput=function(t){t.$setPristine(),e.$scope.inputAlert=0},e.$scope.sureInput=function(){if(""===$("#textInput").val())alert("名称不能为空哦");else{var s={categoryName:$("#textInput").val(),categoryId:t};e.$chargingPageSrv.rename(s).then(function(t){if("success"===t.message)for(var o=0;o<e.$scope.chargingList.length;o++)s.categoryId===e.$scope.chargingList[o].categoryId&&(e.$scope.chargingList[o].categoryName=s.categoryName,e.$scope.inputAlert=0);e.$scope.$apply()})}}},e.$scope.getCategoryList=function(o){i=o,$(".app_input_search").val(""),gxb.utils.localStorageUtils.set("categoryId",i);for(var n=0;n<e.$scope.category.length;n++)e.$scope.category[n].show=!1,e.$scope.category[n].categoryId==o&&(e.$scope.category[n].show=!0,e.$scope.cateName=e.$scope.category[n].categoryId);i==-1?(e.$scope.ngPaginationConfig.pagenums=[],s(0,1,a,"")):i==-2?(e.$scope.ngPaginationConfig.pagenums=[],s(2,1,a,"")):(e.$scope.ngPaginationConfig.pagenums=[],t(i,1,a,""))},e.$scope.goSearchIcon=function(o){o?i==-1?(e.$scope.ngPaginationConfig.pagenums=[],s(0,1,a,o)):i==-2?(e.$scope.ngPaginationConfig.pagenums=[],s(2,1,a,o)):(e.$scope.ngPaginationConfig.pagenums=[],t(i,1,a,o)):alert("请输入文章标题关键词搜索！")},e.$scope.myKeyup=function(o,n){var c=window.event?o.keyCode:o.which;13==c&&(i==-1?(e.$scope.ngPaginationConfig.pagenums=[],s(0,1,a,n)):i==-2?(e.$scope.ngPaginationConfig.pagenums=[],s(2,1,a,n)):(e.$scope.ngPaginationConfig.pagenums=[],t(i,1,a,n)))},e.$scope.onPageChange=function(){i==-1?s(0,this.currentPage,a,""):i==-2?s(2,this.currentPage,a,""):t(i,this.currentPage,a,"")},e.$scope.changeName=function(t,s){s&&(c=s,e.$chargingPageSrv.changeCharging(t,c).then(function(e){}))},e.$scope.goEssayIntro=function(t,s){"0"==s?window.open(gxb.utils.urlUtils.resolveUrl("/console/#/appControll/newEssay/"+t),"_blank"):"1"==s?(e.$scope.unRead=1,window.location=gxb.utils.urlUtils.resolveUrl("/console/#/appControll/chargingPage/comment/"+t)):window.location=gxb.utils.urlUtils.resolveUrl("/console/#/appControll/chargingPage/offlineEssay/"+t)},e.$scope.offlineEssay=function(t){e.$scope.amend=1,e.$scope.deletePageData=e.$scope.chargingPapeList[5].message,e.$scope.amendTrue=function(){e.$chargingPageSrv.offlineEssay(t).then(function(s){if("success"==s.message){e.$scope.amend=0;for(var o=0;o<e.$scope.essayList.length;o++)e.$scope.essayList[o].articleId==t&&(e.$scope.essayList.splice(o,1),0==e.$scope.essayList.length&&(e.$scope.categoryTab=1))}e.$scope.$apply()})}},e.$scope.deleteEssay=function(t){e.$scope.amend=1,e.$scope.deletePageData=e.$scope.chargingPapeList[6].message,e.$scope.amendTrue=function(){e.$chargingPageSrv.deleteDraft(t).then(function(s){if("success"==s.message){e.$scope.amend=0;for(var o=0;o<e.$scope.essayList.length;o++)e.$scope.essayList[o].articleId==t&&(e.$scope.essayList.splice(o,1),0==e.$scope.essayList.length&&(e.$scope.categoryTab=1))}e.$scope.$apply()})}},e.$scope.sortableOpts={handle:".drag-handle",ghostClass:"ghost",animation:150,onEnd:function(t){var s=$(t.item).attr("articleId"),o=$(t.item).attr("position"),n=$(t.item).next("li").attr("position"),a=$(t.item).prev("li").attr("position");1*o<1*n?e.$chargingPageSrv.dragEssay(s,n).then(function(e){"success"==e.message&&window.location.reload()}):1*o>1*a&&e.$chargingPageSrv.dragEssay(s,a).then(function(e){"success"==e.message&&window.location.reload()})}},e.$scope.hidePage=function(){e.$scope.appMen=1,gxb.utils.localStorageUtils.set("cateTab",e.$scope.appMen),$("#appOptions").hasClass("setBlue")||(n(),setTimeout(function(){var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",s=e.$scope.$new();$("#pagination").append(e.$compile(t)(s)[0])},500))},e.$scope.goNewEssay=function(){window.open(gxb.utils.urlUtils.resolveUrl("/console/#/appControll/newEssay/0"),"_blank")}},e.inheritFromCtrl(e["super"].newsFeedCategoryMgrCtrl),e.registerDependency("gxb.controllers.super.newsFeedCategoryMgrCtrl",["gxb.services.tenants.chargingPageSrv"]),e.registerView("gxb.controllers.super.newsFeedCategoryMgrCtrl","super/appControll/chargingPage")}(gxb.controllers,gxb.utils),function(e,t){e["super"].offlineEssayCtrl=function(e){var t=window.location.href,s=t.lastIndexOf("/"),o=t.substring(s+1,t.length);e.$scope.classify="",e.$scope.editorData={content:"",size:{height:"400px"}},e.$chargingPageSrv.getChargingIntro(o).then(function(t){console.log(t),t.data&&(e.$scope.editorData.content=t.data.content,t.data.cover=gxb.settings.cdn.wangsu.getDomains().defaultBucketDomain+t.data.cover,e.$scope.intro=t.data,e.$scope.$apply()),e.$chargingPageSrv.getChargingCategory().then(function(s){if(s.data)for(var o=0;o<s.data.length;o++)s.data[o].categoryId==t.data.categoryId&&(e.$scope.classify=s.data[o].categoryName,e.$scope.$apply())})})},e.inheritFromCtrl(e["super"].offlineEssayCtrl),e.registerDependency("gxb.controllers.super.offlineEssayCtrl",["gxb.services.tenants.chargingPageSrv"]),e.registerView("gxb.controllers.super.offlineEssayCtrl","super/appControll/offlineEssay")}(gxb.controllers,gxb.utils),function(e,t){e["super"].indexCtrl=function(e){function t(t,s,o,n){n=n||"";var a=0===n.indexOf(":")||0===n.indexOf("："),i=a?n.substr(1):"";e.$studentListSrv.account(t,s,o,a?"":n,a?i:"").then(function(t){if(e.$scope.accountList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()},function(){console.log("获取管理列表失败")})}var s=20;if(e.$scope.data={onChanged:function(t,s){a=s,gxb.utils.localStorageUtils.set("roleId",s),gxb.utils.localStorageUtils.set("roleName",t),e.$scope.filter(s)}},0!=gxb.utils.localStorageUtils.get("isHome")?(gxb.utils.localStorageUtils.set("currentPage",1),gxb.utils.localStorageUtils.set("keyword",""),gxb.utils.localStorageUtils.set("roleId",""),gxb.utils.localStorageUtils.set("roleName","请选择学校")):gxb.utils.localStorageUtils.set("isHome",!0),gxb.utils.localStorageUtils.get("currentPage"))var o=gxb.utils.localStorageUtils.get("currentPage")||1;if(gxb.utils.localStorageUtils.get("keyword")){var n=gxb.utils.localStorageUtils.get("keyword")||"";e.$scope.searchText=n}else var n="";if(gxb.utils.localStorageUtils.get("roleId"))var a=gxb.utils.localStorageUtils.get("roleId")||"";else var a="";e.$scope.tab=1,e.$scope.accountList=null,e.$scope.id="",$(document).click(function(){$(document).find(".tenant-picker-tenantbox").hide()}),e.$scope.filter=function(a){e.$scope.id=a,t(a,o,s,n)},e.$scope.management=function(e){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/account/"+e),gxb.utils.localStorageUtils.set("isHome",!1)},e.$scope.pageCount=function(s){e.$scope.ngPaginationConfig.pagenums=[],t(a,o,s,n)},e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:gxb.utils.localStorageUtils.get("currentPage")||1,pagenums:[]};var i="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",c=e.$scope.$new();$("#pagination").append(e.$compile(i)(c)[0]),e.$scope.onPageChange=function(){t(e.$scope.id||a,this.currentPage,s,n),gxb.utils.localStorageUtils.set("currentPage",this.currentPage)},e.$scope.search=function(){e.$scope.ngPaginationConfig.pagenums=[],n=e.$scope.searchText||"",t(a,o,s,n),gxb.utils.localStorageUtils.set("keyword",n)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.search()},t(a,o,s,n),e.$scope.deleteUserId=null,e.$scope.isDelete=!1,e.$scope.deleteUser=function(t){e.$scope.deleteUserId=t,e.$scope.isDelete=!0},e.$scope.sureDelete=function(){e.$studentListSrv.deleteUser(e.$scope.deleteUserId).then(function(t){t.status?(alert("删除成功"),window.location.reload()):(e.$scope.isDelete=!1,alert(t.message)),e.$scope.$apply()})}},e.inheritFromCtrl(e["super"].indexCtrl),e.registerDependency("gxb.controllers.super.indexCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.indexCtrl","super/index")}(gxb.controllers,gxb.utils),function(e,t){e["super"].recommendCtrl=function(e){function t(t){e.$scope.qx=!1,e.$scope.getCheckClassIdList=[],e.$scope.checkedSource={},e.$studentListSrv.remmondData(t).then(function(t){e.$scope.remmondList=t.data||[];for(var s=0,o=e.$scope.remmondList.length;s<o;s++){var n=e.$scope.remmondList[s];n&&(e.$scope.checkedSource["_"+n.classId]=n,e.$scope.getCheckClassIdList.push({classId:n.classId,className:n.className||n.classes.className}))}e.$scope.$apply()},function(){console.log("获取失败")})}function s(t,s,o){e.$studentListSrv.addCommonCourse(t,s,o).then(function(t){if(e.$scope.commonList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>3?3:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})}function o(t,s){e.$studentListSrv.InterestClassListData(t,s).then(function(t){if(e.$scope.classList=t.dataList||[],e.$scope.len=t.paging.total,e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig1.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig1.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,0==e.$scope.ngPaginationConfig1.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig1.visiblePageCount;s++)e.$scope.ngPaginationConfig1.pagenums.push(s+1);e.$scope.$apply()})}e.$scope.tab=1,e.$scope.type="guessyoulike",e.$scope["delete"]=!0,t(e.$scope.type),e.$scope.filterNav=function(s){e.$scope.type=s,t(s)},e.$scope.common=!0;var n=1,a=5,i="";e.$scope.commonList=null,e.$scope.addCommonLink=function(){e.$scope.addPaging(),s(n,a,i),e.$scope.common=!1},e.$scope.urlToPage=function(e){window.location=e},e.$scope.pageCount=function(t){a=t,e.$scope.ngPaginationConfig.pagenums=[],s(n,a,i)},e.$scope.conmmonCourseSearch=function(){e.$scope.ngPaginationConfig.pagenums=[],i=e.$scope.commonText||"",e.$scope.addPaging(),s(n,a,i)},e.$scope.myKeyUp=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.conmmonCourseSearch()},e.$scope.addPaging=function(){e.$scope.ngPaginationConfig={pageCount:3,visiblePageCount:3,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>";$("#pagination").empty(),$("#pagination").append(e.$compile(t)(e.$scope)[0])},e.$scope.addPaging(),e.$scope.onPageChange=function(){e.$scope.qx=!1,s(this.currentPage,a,i)},e.$scope.checkedSource={},e.$scope.getCheckClassIdList=[],e.$scope.checkItems=function(t,s){t?(e.$scope.checkedSource["_"+s.classId]=s,e.$scope.getCheckClassIdList.push({classId:s.classId,className:s.className})):(delete e.$scope.checkedSource["_"+s.classId],$.each(e.$scope.getCheckClassIdList,function(t,o){o.classId==s.classId&&e.$scope.getCheckClassIdList.splice(t,1)}))},e.$scope.remove=function(t){delete e.$scope.checkedSource["_"+t],$.each(e.$scope.getCheckClassIdList,function(s,o){o.classId==t&&e.$scope.getCheckClassIdList.splice(s,1)}),e.$scope.$apply()},e.$scope.sureToAdd=function(){e.$scope.classIdList=[];var s=e.$scope.remmondList.length+1;return $("#commonCourse").find("li").each(function(){e.$scope.classIdList.push({classId:$(this).attr("data"),type:e.$scope.type,position:s}),s++}),0==e.$scope.classIdList.length?void alert("请选择要添加的课程"):void e.$studentListSrv.addCourseToList(e.$scope.classIdList).then(function(s){1==s.status&&(t(e.$scope.type),e.$scope.common=!0,e.$scope.$apply())},function(){console.log("添加失败")})},e.$scope.deleteCourse=function(t,s){e.$scope["delete"]=!1,e.$scope.classId=t,e.$scope.className=s},e.$scope.sureDelete=function(s){e.$studentListSrv.deleteCourse(s).then(function(s){1==s.status&&(e.$scope["delete"]=!0,t(e.$scope.type))},function(){console.log("删除失败")})};var c=1,r=5,l="";e.$scope.InterestClass=function(){o(c,r)},e.$scope.addPaging1=function(){e.$scope.ngPaginationConfig1={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig1' page-count='ngPaginationConfig1.pageCount' current-page='currentPage1' on-page-change='onPageChange1()'></gxbtmpagination>";$("#interClass").empty(),$("#interClass").append(e.$compile(t)(e.$scope)[0])},e.$scope.addPaging1(),e.$scope.onPageChange1=function(){c=this.currentPage1,o(c,r,l)},e.$scope.onInit=function(t){this.a=!!e.$scope.checkedSource["_"+t.classId]},e.$scope.qx=!1,e.$scope.quanxuan=function(t){e.$scope.qx=!e.$scope.qx,e.$scope.qx?$(".classlart i").each(function(){$(this).removeClass("icon-unchecked"),$(this).addClass("icon-checked");var t=$(this),s=!0;e.$scope.getCheckClassIdList&&$.each(e.$scope.getCheckClassIdList,function(e,o){return o.classId==t.attr("data")&&(s=!1),s}),1==s&&e.$scope.getCheckClassIdList.push({classId:t.attr("data"),className:t.attr("main")})}):$(".classlart i").each(function(){$(this).removeClass("icon-checked"),$(this).addClass("icon-unchecked");var t=$(this);$.each(e.$scope.getCheckClassIdList,function(s,o){o.classId==t.attr("data")&&e.$scope.getCheckClassIdList.splice(s,1)})})},e.$scope.moveUp=function(t,s,n){if(0!=n)if("取消置顶"!=$(".move tr").eq(n+1).prev("tr").find(".top").text()){var a=[{classId:t,position:e.$scope.classList[n-1].position},{classId:e.$scope.classList[n-1].classId,position:s}];e.$studentListSrv.ClassmoveUpData(a).then(function(e){1==e.status&&o(c,r,l)})}else alert("不能再上移了!");else alert("已经是第一个,不可再上移啦")},e.$scope.moveDown=function(t,s,n){if(n!=e.$scope.classList.length){var a=[{classId:t,position:e.$scope.classList[n].position},{classId:e.$scope.classList[n].classId,position:s}];e.$studentListSrv.ClassmoveUpData(a).then(function(e){1==e.status&&o(c,r,l)})}else alert("已经是最后一个了,不可再下移啦")},e.$scope.stickTop=function(t,s){var n={};n=s!=-1?{classId:t,isTop:-1}:{classId:t},e.$studentListSrv.IsTop(n).then(function(e){1==e.status&&o(c,r,l)})},e.$scope.linkToclass=function(e){window.location=gxb.utils.urlUtils.resolveUrl("/#/courses/detail/"+e)}},e.inheritFromCtrl(e["super"].recommendCtrl),e.registerDependency("gxb.controllers.super.recommendCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.recommendCtrl","super/recommend/index")}(gxb.controllers,gxb.utils),function(e,t){e["super"].checkRoleCtrl=function(e){var t=e.$state.params.id;e.$scope.systemList=[],e.$scope.schoolList=[],e.$studentListSrv.authList(t).then(function(t){$.each(t,function(t,s){"system"==s.type?(e.$scope.systemList.push(s),e.$scope.$apply()):"tenant"==s.type&&(e.$scope.schoolList.push(s),e.$scope.$apply())})},function(){console.log("获取权限失败")}),e.$scope["return"]=function(){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/role")}},e.inheritFromCtrl(e["super"].checkRoleCtrl),e.registerDependency("gxb.controllers.super.checkRoleCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.checkRoleCtrl","super/role/checkrole")}(gxb.controllers,gxb.utils),function(e,t){e["super"].roleCtrl=function(e){function t(t,s,o){e.$studentListSrv.roleLists(t,s,o).then(function(t){if(e.$scope.roleList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()},function(){console.log("获取管理列表失败")})}var s="",o=1,n=20;e.$scope.roleList=[],e.$scope.tab=1,e.$scope.search=function(){s=e.$scope.searchText||"",e.$scope.ngPaginationConfig.pagenums=[],t(o,n,s)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.search()},e.$scope.check=function(e){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/role/"+e)},e.$scope.pageCount=function(a){n=a,e.$scope.ngPaginationConfig.pagenums=[],t(o,n,s)},e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var a="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",i=e.$scope.$new();$("#pagination").append(e.$compile(a)(i)[0]),e.$scope.onPageChange=function(){t(this.currentPage,n,s)},t(o,n,s)},e.inheritFromCtrl(e["super"].roleCtrl),e.registerDependency("gxb.controllers.super.roleCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.roleCtrl","super/role/index")}(gxb.controllers,gxb.utils),function(e,t){e["super"].addTenantCtrl=function(e){var s=e.$state.params.tenantId||"";e.$scope.hu=s?"编辑":"新建",e.$scope.tenantList=[],s&&e.$studentListSrv.getTenantData(s).then(function(t){e.$scope.tenantList=t||[],e.$scope.market=e.$scope.getCityName(t.zoneId,"city"),e.$scope.cityList=gxb.settings.zone.getCityByProvinceId(e.$scope.getCity(t.zoneId,"city")),e.$scope.$apply()},function(){console.log("获取租户信息失败")}),e.$scope.pro=!0,e.$scope.ci=!0,e.$scope.ar=!0,e.$scope.ty=!0,e.$scope.con=!0,e.$scope.cha=!0,e.$scope.sales=!0,e.$scope.change=!0,e.$scope.belong=!0,e.$scope.optionBlur=function(){setTimeout(function(){e.$scope.$apply(function(){e.$scope.pro=!0,e.$scope.ci=!0,e.$scope.ar=!0,e.$scope.ty=!0,e.$scope.con=!0,e.$scope.cha=!0,e.$scope.sales=!0,e.$scope.change=!0,e.$scope.belong=!0})},200)},e.$scope.provinces=function(t){e.$scope.provinceSearch="",1==t?e.$scope.pro=!1:e.$scope.pro=!0},e.$scope.city=function(t){e.$scope.citySearch="",1==t?e.$scope.ci=!1:e.$scope.ci=!0},e.$scope.areas=function(t){e.$scope.areaNameSearch="",1==t?e.$scope.ar=!1:e.$scope.ar=!0},e.$scope.schoolsTenant=function(t){e.$scope.belongSchool="",1==t?e.$scope.belong=!1:e.$scope.belong=!0},e.$studentListSrv.getBelongSchool().then(function(t){e.$scope.belongSchoolList=t.data||[],e.$scope.$apply()}),e.$scope.type=function(t){1==t?e.$scope.ty=!1:e.$scope.ty=!0},e.$scope.contractype=function(t){1==t?e.$scope.con=!1:e.$scope.con=!0},e.$scope.channelype=function(t){1==t?e.$scope.cha=!1:e.$scope.cha=!0},e.$studentListSrv.getTenantName("").then(function(t){e.$scope.salesNameList=t.data||[],e.$scope.$apply()},function(){console.log("获取租户姓名失败")}),e.$scope.saleName=function(t){e.$scope.saleNameSearch="",1==t?e.$scope.sales=!1:e.$scope.sales=!0},e.$scope.changeName=function(t){e.$scope.changeNameSearch="",1==t?e.$scope.change=!1:e.$scope.change=!0},e.$scope.changeType=function(t){e.$scope.change=!0,e.$scope.changesName=t},e.$scope.saleType=function(t){e.$scope.sales=!0,e.$scope.salesNames=t},e.$scope.contractType=function(t,s){e.$scope.con=!0,e.$scope.contract=t,e.$scope.contracttypestr=s},e.$scope.orgType=function(t,s){e.$scope.ty=!0,e.$scope.org=t,e.$scope.organizationType=s},e.$scope.channelType=function(t,s){e.$scope.cha=!0,e.$scope.channel=t,e.$scope.channeltypestr=s},e.$scope.selectBelong=function(t,s){e.$scope.belong=!0,e.$scope.belond=s,e.$scope.universityId=t},e.$scope.save=function(){if(e.$scope.tenantList.startedAt>e.$scope.tenantList.endedAt)return alert("服务截止时间不能小于服务开始时间"),!1;var o=0;$(".checkIcon").hasClass("icon-checked")&&(o=1);var n=0;$(".checkIconWebcast").hasClass("icon-checked")&&(n=1);var a=!1;$(".checkIconMessage").hasClass("icon-checked")&&(a=!0);var i=!1;$(".checkIconResource").hasClass("icon-checked")&&(i=!0);var c=!1;$(".checkIconPpt").hasClass("icon-checked")&&(c=!0);var r={name:e.$scope.tenantList.name,shortname:e.$scope.tenantList.shortname,zoneId:e.$scope.zoneId||e.$scope.tenantList.zoneId,website:e.$scope.tenantList.website||"",salesZoneId:e.$scope.saleId||e.$scope.tenantList.salesZoneId,salesName:e.$scope.salesNames||e.$scope.tenantList.salesName,gxbSalesName:e.$scope.gxbName||e.$scope.tenantList.gxbSalesName,customerSupervisor:e.$scope.changesName||e.$scope.tenantList.customerSupervisor,organizationType:e.$scope.organizationType||e.$scope.tenantList.organizationType,contractType:e.$scope.contracttypestr||e.$scope.tenantList.contractType,channelType:e.$scope.channeltypestr||e.$scope.tenantList.channelType,startedAt:t.datetimeUtils.convert(e.$scope.tenantList.startedAt),endedAt:t.datetimeUtils.convert(e.$scope.tenantList.endedAt),canProgramming:o,canWebcast:n,canShareResource:i,canPpt:c,canSendMessage:a,universityId:e.$scope.universityId||""};return r.name&&r.shortname&&r.zoneId&&r.salesZoneId&&r.salesName&&r.customerSupervisor&&r.organizationType&&r.contractType&&r.channelType&&r.startedAt&&r.endedAt?void(s?e.$studentListSrv.editTenantData(s,r).then(function(e){1==e.status&&(window.location=gxb.utils.urlUtils.resolveUrl("/console/#/tenant"))},function(){alert("编辑高校失败")}):e.$studentListSrv.submitTenantData(r).then(function(){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/tenant")},function(){alert("添加失败")})):(alert("数据不完整"),!1)},e.$scope.typeThrate=function(e,t){var s="";return"School-985"==e&&"org"==t?s="高校-985":"School-211"==e&&"org"==t?s="高校-211(非985)":"School-one"==e&&"org"==t?s="高校-一本(非985/211)":"School-two"==e&&"org"==t?s="高校-二本":"School-three"==e&&"org"==t?s="高校-三本":"School-Specialty"==e&&"org"==t?s="高校-专科":"Market"==e&&"org"==t?s="营销高校":"Test"==e&&"org"==t?s="测试高校":"Own"==e&&"org"==t?s="自用高校":"Other"==e?s="其他":"Free"==e&&"contract"==t?s="免费试用":"Try"==e&&"contract"==t?s="签约试用":"Pay"==e&&"contract"==t?s="付费":"Strategy"==e&&"contract"==t?s="战略":"Market"==e&&"contract"==t?s="营销":"GroupREP"==e&&"channel"==t?s="集团REP":"Sale"==e&&"channel"==t?s="高校邦销售":"ProfessionalBuild"==e&&"channel"==t?s="专业共建":"BD"==e&&"channel"==t&&(s="BD"),s},e.$scope.provincesList=gxb.settings.zone.getProvinces(),e.$scope.areaCode=function(t,s){e.$scope.pro=!0,e.$scope.omit=s,e.$scope.market=null,e.$scope.cityList=gxb.settings.zone.getCityByProvinceId(t),e.$scope.zoneId="",e.$scope.tenantList.zoneId=""},e.$scope.getValueTo=function(t,s){e.$scope.ci=!0,e.$scope.market=t,e.$scope.zoneId=s},e.$scope.getValueToSale=function(t,s){e.$scope.ar=!0,e.$scope.sale=t,e.$scope.saleId=s},e.$scope.cancel=function(){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/tenant")},e.$scope.getCityName=function(e,t){var s="city"==t?gxb.settings.zone.getCities():gxb.settings.zone.getProvinces();return $.each(s,function(t,s){if(s.code==e)return e=s.name}),e},e.$scope.getBelondName=function(t){if(t)return $.each(e.$scope.belongSchoolList,function(e,s){if(s.universityId==t)return t=s.name}),t},e.$scope.getCity=function(e){var t=gxb.settings.zone.getCities();return $.each(t,function(t,s){if(s.code==e)return e=s.parentId}),e},e.$scope.getProvinces=function(e){var t=gxb.settings.zone.getCities();$.each(t,function(t,s){if(s.code==e)return e=s.parentId});var s=gxb.settings.zone.getProvinces();return $.each(s,function(t,s){if(s.code==e)return e=s.name}),e},e.$scope.startDate=""},e.inheritFromCtrl(e["super"].addTenantCtrl),e.registerDependency("gxb.controllers.super.addTenantCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.addTenantCtrl","super/tenant/addtenant")}(gxb.controllers,gxb.utils),function(e,t){e["super"].promoteSetCtrl=function(e){function t(t){e.$scope.qx=!1,e.$scope.getCheckClassIdList=[],e.$studentListSrv.classTenantType(t,o).then(function(t){e.$scope.classtenantlist=t.data||[];for(var s=0,o=e.$scope.classtenantlist.length;s<o;s++){var n=e.$scope.classtenantlist[s];n&&(e.$scope.checkedSource["_"+n.classId]=n,e.$scope.getCheckClassIdList.push({classId:n.classId,className:n.className||n.classes.className}))}e.$scope.$apply()})}function s(t,s){var o=e.$scope.commonText||"";e.$studentListSrv.addCommonCourse(t,s,o).then(function(t){if(e.$scope.commonList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>3?3:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()})}e.$scope.type="guessyoulike",e.$scope.tab=1,e.$scope.commonText="";var o=e.$state.params.tenantId;e.$scope.classtenantlist=[],e.$scope.checkedSource={},t(e.$scope.type),e.$scope.urlToPage=function(e){window.location=e},e.$scope.conmmonCourseSearch=function(){e.$scope.ngPaginationConfig.pagenums=[],s(1,a)},e.$scope.myKeyUp=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.conmmonCourseSearch()},e.$scope["delete"]=!0,e.$scope.deleteCourse=function(t,s){e.$scope["delete"]=!1,e.$scope.classId=t,e.$scope.className=s},e.$scope.sureDelete=function(s){e.$studentListSrv.deleteCourse(s).then(function(s){1==s.status&&(e.$scope["delete"]=!0,t(e.$scope.type))})},e.$scope.common=!0;var n=1,a=5;e.$scope.commonList=null,e.$scope.addCommonLink=function(){e.$scope.common=!1,s(n,a)},e.$scope.pageCount=function(t){a=t,e.$scope.ngPaginationConfig.pagenums=[],s(n,a)},e.$scope.addPaging=function(){e.$scope.ngPaginationConfig={pageCount:3,visiblePageCount:3,prevText:"Prev",nextText:"Next",showIfOnePage:!1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>";$("#pagination").empty(),$("#pagination").append(e.$compile(t)(e.$scope)[0])},e.$scope.addPaging(),e.$scope.onPageChange=function(){e.$scope.qx=!1,s(this.currentPage,a)},e.$scope.onInit=function(t){this.a=!!e.$scope.checkedSource["_"+t.classId]},e.$scope.checkedSource={},e.$scope.getCheckClassIdList=[],e.$scope.checkItems=function(t,s){t?(e.$scope.checkedSource["_"+s.classId]=s,e.$scope.getCheckClassIdList.push({classId:s.classId,className:s.className})):(delete e.$scope.checkedSource["_"+s.classId],$.each(e.$scope.getCheckClassIdList,function(t,o){o.classId==s.classId&&e.$scope.getCheckClassIdList.splice(t,1)}))},e.$scope.remove=function(t){delete e.$scope.checkedSource["_"+t],$.each(e.$scope.getCheckClassIdList,function(s,o){o.classId==t&&e.$scope.getCheckClassIdList.splice(s,1)}),e.$scope.$apply()},e.$scope.sureToAdd=function(){e.$scope.classIdList=[];var s=e.$scope.classtenantlist.length+1;return $("#commonCourse").find("li").each(function(){e.$scope.classIdList.push({classId:$(this).attr("data"),type:e.$scope.type,position:s}),s++}),0==e.$scope.classIdList.length?void alert("请选择要添加的课程"):void e.$studentListSrv.addclassTenantType(o,e.$scope.classIdList).then(function(s){1==s.status&&(t(e.$scope.type),e.$scope.common=!0,e.$scope.$apply())},function(){console.log("添加失败")})},e.$scope.defaultshow=!0,e.$scope.defaulttenants=function(t){e.$scope.getCheckClassIdList=[],e.$scope.showname="hezuo"==e.$scope.type?"合作课程":"guessyoulike"==e.$scope.type?"猜你喜欢":"related"==e.$scope.type?"相关课程":"",e.$scope.defaultshow=!t},e.$scope.suredefaulttenants=function(){e.$scope.tenanttype={type:e.$scope.type,tenantId:o},e.$studentListSrv.defaulttenants(e.$scope.tenanttype).then(function(s){s&&(t(e.$scope.type),e.$scope.defaultshow=!0,e.$scope.$apply())})},e.$scope.iconchecked="icon-checked",e.$scope.qhclass=function(s){e.$scope.type=s,"hezuo"==s?10==e.$scope.hezuoType?e.$scope.iconchecked="icon-checked":e.$scope.iconchecked="icon-unchecked":"guessyoulike"==s?10==e.$scope.guessyoulikeType?e.$scope.iconchecked="icon-checked":e.$scope.iconchecked="icon-unchecked":"related"==s&&(10==e.$scope.relatedType?e.$scope.iconchecked="icon-checked":e.$scope.iconchecked="icon-unchecked"),
e.$scope.$apply(),t(s)},e.$studentListSrv.gettenantById(o).then(function(t){e.$scope.hezuoType=t.data.hezuoType,e.$scope.guessyoulikeType=t.data.guessyoulikeType,e.$scope.relatedType=t.data.relatedType,20==t.data.guessyoulikeType?e.$scope.iconchecked="icon-unchecked":e.$scope.iconchecked="icon-checked",e.$scope.$apply()}),e.$scope.showqt=function(t){"hezuo"==e.$scope.type?(e.$scope.hezuoType=t,e.$scope.qhclass(e.$scope.type),e.$scope.tenantshow={hezuoType:t,id:o}):"guessyoulike"==e.$scope.type?(e.$scope.guessyoulikeType=t,e.$scope.qhclass(e.$scope.type),e.$scope.tenantshow={guessyoulikeType:t,id:o}):"related"==e.$scope.type&&(e.$scope.relatedType=t,e.$scope.qhclass(e.$scope.type),e.$scope.tenantshow={relatedType:t,id:o}),e.$studentListSrv.updateShowType(e.$scope.tenantshow).then(function(e){})},e.$scope.qx=!1,e.$scope.quanxuan=function(t){e.$scope.qx=!e.$scope.qx,e.$scope.qx?$(".classlart i").each(function(){$(this).removeClass("icon-unchecked"),$(this).addClass("icon-checked");var t=$(this),s=!0;e.$scope.getCheckClassIdList&&$.each(e.$scope.getCheckClassIdList,function(e,o){return o.classId==t.attr("data")&&(s=!1),s}),1==s&&e.$scope.getCheckClassIdList.push({classId:t.attr("data"),className:t.attr("main")})}):$(".classlart i").each(function(){$(this).removeClass("icon-checked"),$(this).addClass("icon-unchecked");var t=$(this);$.each(e.$scope.getCheckClassIdList,function(s,o){o.classId==t.attr("data")&&e.$scope.getCheckClassIdList.splice(s,1)})})}},e.inheritFromCtrl(e["super"].promoteSetCtrl),e.registerDependency("gxb.controllers.super.promoteSetCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.promoteSetCtrl","super/tenant/promote")}(gxb.controllers,gxb.utils),function(e,t){e["super"].tenantCtrl=function(e){var t=20;if(e.$scope.tenantList=null,e.$scope.tab=1,0!=gxb.utils.localStorageUtils.get("isHome")?(gxb.utils.localStorageUtils.set("currentPage",1),gxb.utils.localStorageUtils.set("certify",""),gxb.utils.localStorageUtils.set("keyword",""),e.$scope.tabs=1):gxb.utils.localStorageUtils.set("isHome",!0),gxb.utils.localStorageUtils.get("currentPage"))var s=gxb.utils.localStorageUtils.get("currentPage")||1;if(gxb.utils.localStorageUtils.get("certify")){var o=gxb.utils.localStorageUtils.get("certify")||"";""==gxb.utils.localStorageUtils.get("certify")&&(e.$scope.tabs=1),"online"==gxb.utils.localStorageUtils.get("certify")&&(e.$scope.tabs=2),"offline"==gxb.utils.localStorageUtils.get("certify")&&(e.$scope.tabs=3)}else{var o="";e.$scope.tabs=1}if(gxb.utils.localStorageUtils.get("keyword")){var n=gxb.utils.localStorageUtils.get("keyword")||"";e.$scope.searchText=n}else var n="";e.$scope.newtenant=function(){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/tenant/new")},e.$scope.editTenant=function(e){window.location=gxb.utils.urlUtils.resolveUrl("/console/#/tenant/"+e),gxb.utils.localStorageUtils.set("isHome",!1)},e.$scope.online=function(i,c){var r="";r="online"==c?"offline":"online",e.$studentListSrv.tenantStatus(i,r).then(function(i){1==i&&(e.$scope.addPaging(),a(s,t,n,o))},function(){console.log("租户状态失败")})},e.$scope.filterStatus=function(i){gxb.utils.localStorageUtils.set("currentPage",1),gxb.utils.localStorageUtils.set("certify",i),o=i,e.$scope.addPaging(),a(s,t,n,o)},e.$scope.type="";var a=function(t,s,o,n){e.$studentListSrv.tenantListData(t,s,o,n).then(function(t){if(e.$scope.tenantList=t.dataList||[],e.$scope.total=t.paging.total,e.$scope.ngPaginationConfig.pageCount=t.paging.totalPage,e.$scope.ngPaginationConfig.visiblePageCount=t.paging.totalPage>10?10:t.paging.totalPage,0==e.$scope.ngPaginationConfig.pagenums.length)for(var s=0;s<e.$scope.ngPaginationConfig.visiblePageCount;s++)e.$scope.ngPaginationConfig.pagenums.push(s+1);e.$scope.$apply()},function(e){console.log("query student list error!")})};e.$scope.search=function(){n=e.$scope.searchText||"",e.$scope.ngPaginationConfig.pagenums=[],e.$scope.addPaging(),a(s,t,n,o),gxb.utils.localStorageUtils.set("keyword",n)},e.$scope.myKeyup=function(t){var s=window.event?t.keyCode:t.which;13==s&&e.$scope.search()},e.$scope.pageCount=function(i){t=i,e.$scope.ngPaginationConfig.pagenums=[],e.$scope.addPaging(),a(s,t,n,o)},e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:gxb.utils.localStorageUtils.get("currentPage")||1,pagenums:[]};var i="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>",c=e.$scope.$new();$("#pagination").append(e.$compile(i)(c)[0]),e.$scope.onPageChange=function(){a(this.currentPage,t,n,o),gxb.utils.localStorageUtils.set("currentPage",this.currentPage)},e.$scope.addPaging=function(){e.$scope.ngPaginationConfig={pageCount:10,visiblePageCount:10,prevText:"Prev",nextText:"Next",showIfOnePage:!1,currentPage:gxb.utils.localStorageUtils.get("currentPage")||1,pagenums:[]};var t="<gxbtmpagination conf='ngPaginationConfig' page-count='ngPaginationConfig.pageCount' current-page='currentPage' on-page-change='onPageChange()'></gxbtmpagination>";$("#pagination").empty(),$("#pagination").append(e.$compile(t)(e.$scope)[0]),e.$scope.$apply()},e.$scope.addPaging(),a(s,t,n,o)},e.inheritFromCtrl(e["super"].tenantCtrl),e.registerDependency("gxb.controllers.super.tenantCtrl",["gxb.services.tenants.studentListSrv"]),e.registerView("gxb.controllers.super.tenantCtrl","super/tenant/tenant")}(gxb.controllers,gxb.utils),function(e){var t=e.controllers,s="gxb.controllers",o="",n=[],a=function(s,o){e.utils.objectUtils.isObjectOnly(s)||(s=n.pop()),n.length&&e.utils.objectUtils.getKeys(s,function(s,i){var c=o+"."+i;e.utils.objectUtils.isObjectOnly(s)?(n.push(s),a(s,c)):e.utils.langUtils.isFunction(s)&&t.registerController(c,t.getDependency(c))})};e.utils.objectUtils.getKeys(t,function(t,i){e.utils.objectUtils.isObjectOnly(t)&&(o=s+"."+i,n.push(t),a(t,o))})}(gxb);