template.helper("template",function(t,e){return window.template(t,e)}),template.helper("log",function(t){console.log(t)}),template.helper("splitJoin",function(t,e,a){return window.gxb.utils.splitJoin(t,e,a)}),template.helper("extend",function(t,e){return window.gxb.utils.extend(t,e)}),template.helper("isEmptyArr",function(t){return window.gxb.utils.isEmptyArr(t)}),template.helper("nothing",function(t){return window.gxb.utils.nothing(t)}),template.helper("formatDateTime",function(t){var e=t.split(" "),a=e[0].split("-"),s=a[0]+"年"+a[1]+"月"+a[2]+"日",i=e[1];return s+" "+i}),template.helper("formatOnlyDate",function(t){var e=t,a=e.split("-"),s=a[0]+"年"+a[1]+"月"+a[2]+"日";return s.trim()}),template.helper("diffDays",function(t){var t=new Date(t.replace(/-/g,"/")),e=new Date,a=t.getTime()-e.getTime();return parseInt(a/864e5)}),template.helper("compareDate",function(t,e){var t=new Date(t.replace(/-/g,"/")),e=new Date(e.replace(/-/g,"/"));return t.getTime()-e.getTime()}),template.helper("isEmptyStr",function(t){return window.gxb.utils.isEmptyStr(t)}),template.helper("fromCharCode",function(t){return String.fromCharCode(t)}),template.helper("expireTime",function(t){return null!=t&&(new Date).getTime()>=new Date(t.replace(new RegExp("-","g"),"/")).getTime()}),template.helper("expireTimeNew",function(t,e){return null!=t&&e>=new Date(t.replace(new RegExp("-","g"),"/")).getTime()}),template.helper("mathScore",function(t){return Math.floor(t)}),template.helper("changeTime",function(t){if(null==t)return"";var e=new Date;e.setTime(t);var a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate(),n=e.getHours(),l=e.getMinutes(),o=e.getSeconds();return o<10&&(o="0"+o),l<10&&(l="0"+l),n<10&&(n="0"+n),a+"-"+s+"-"+i+"   "+n+":"+l+":"+o}),template.helper("stringSuffix",function(t){var e=window.gxb.utils.split(t,".");return e[e.length-1]}),template.helper("stringName",function(t){var e=window.gxb.utils.split(t,"/");return e[e.length-1]}),template.helper("nowTimeStr",function(){return(new Date).getTime()}),template.helper("parseLocalDateTime",function(t){var e=new Date(t),a="-",s=":",i=e.getMonth()+1,n=e.getDate(),l=e.getHours(),o=e.getMinutes();e.getSeconds();i>=1&&i<=9&&(i="0"+i),n>=0&&n<=9&&(n="0"+n),l>=0&&l<=9&&(l="0"+l),o>=0&&o<=9&&(o="0"+o);var r=e.getFullYear()+a+i+a+n+" "+l+s+o;return r}),template.helper("parseInt",function(t,e){return parseInt(t,e)}),template.helper("attr",function(t,e){return window.gxb.utils.nothing(e)?"":t+"="+e}),template.helper("htmlClean",function(t){return t=t.replace(/<style>.+<\/style>/g,""),$("<div></div>").html(t).html()}),template.helper("getGxbUserId",function(){return""}),template.helper("def",{btnText:"click",btnSure:"确定",btnSearch:"查询",btnCancel:"取消",searchInfo:"请输入内容进行查询"}),template("btn.cancel",'<% include("btn.def", {}) %>'),template("btn.def",'<div class="btn btn-default <%= splitJoin(className) %>" <%= attr("id", id) %> <%= attr("name", name) %> <%= attr("value", value) %> > <%= text || def.btnText %> </div>'),template("btn.default",'<a href="#" class="gxb-btn green-btn w60h30">发帖</a> <a href="#" class="gxb-btn green-btn w90h30">继续学习</a> <a href="#" class="gxb-btn blue-btn w120h36">开始测验</a> <div class="dropdown-wrapper open"> <span>最新发布</span> <i class="triangle-btn"></i> <ul class="dropdown-menu"> <li>最多回复</li> <li>老师发布</li> </ul> </div>'),template("btn.link","<% include(\"btn.def\", { id: id, className:'btn-link '+ className, name: name, value: value, text: text || def.btnCancel }) %>"),template("btn.search","<% include(\"btn.def\", { id: id, className: 'btn-search '+className, name: name, value: value, text: text || def.btnSearch }) %>"),template("btn.sure","<% include(\"btn.def\", { id: id, className: 'btn-sure '+className, name: name, value: value, text: text || def.btnSure }) %>"),template("dialog.def",'<% var content = content || ""; %> <div class="gxb-dialog-tips <%= splitJoin(className) %>"> <%== content %> </div>'),template("dialog.panel.def",'<% var buttons = buttons || []; var title = title || []; var content = content || []; var bLength = buttons.length; %> <div class="gxb-dialog-panel <%= splitJoin(className) %>"> <div class="gxb-dialog-heading"> <h5 class="gxb-dialog-title"> <%= title %> </h5> <i class="gxb-dialog-close"> </i> </div> <div class="gxb-dialog-body"> <%== content %> </div> <% if(!isEmptyArr(buttons)){ %> <div class="gxb-dialog-footer"> <% for(var i = 0;i < bLength;i++){ var btn = buttons[i]; %> <div class="btn btn-default <%= splitJoin(btn.className) %>" <%= attr("name", btn.name) %> <%= attr("value", btn.value) %> > <%= btn.text %> </div> <% } %> </div> <% } %> </div>'),template("empty",'<div class="no-data"></div> '),template("export.exl.options",'<% var excelHeads = excelHeads || [] %> <div class="export-excel"> <div class="bg"></div> <div class="pop"> <header class="title" style=" "> <nav class="nav"> <span class="create">导出到Excel</span> <i class="close gxb-course-close-middle dialog-revision-close"></i> </nav> </header> <div class="content"> <div class="tip"><span>请选择想要导出的数据项:</span></div> <% for(var i = 0;i < excelHeads.length;i++){ var head = excelHeads[i] || {}; %> <table> <tr class="per"> <td class="left" style="line-height: 20px"><%= head.name || \'\' %></td> <td class="right"> <% for(var ii = 0;ii < head.dataList.length;ii++){ var data = head.dataList[ii] || \'\'; %> <li class=\'options <%= data.checked ? "active" : \'\' %>\'><em class=\'<%= data.checked ? "checked" : \'\' %> <%= data.noSend ? "noSendAndChecked" : \'gxb-checkbox-no-checked\' %>\'></em><span style=\'<%= data.noSend ? "color:#1FB6FF;" : \'\' %>\'><%= data.headName %></span> </li> <% } %> </td> </tr> </table> <% } %> </div> <div style="height: 60px;" class="footer"> <a class="cancel" href="javascript:void(0)">取消</a> <i class="btn-export">导出</i> </div> </div> </div>'),template("input","<input class=\"form-control <%= splitJoin(className) %>\" <%= attr('placeholder', placeholder) %> <%= attr('type', type || \"text\") %> >"),template("learning.tips",'<div class="learning-tips"> 最近学习：<a href="#" class="tips-title">第一章 第3讲：为什么需要响应式交互设计</a> <a href="#" class="gxb-btn w90h30 blue-btn">继续学习</a> </div>'),template("menu",'<% list = list || []; conf = conf || {}; var l = list.length; %> <ul class="nav nav-tabs <%= splitJoin(conf.ulClass) %>"> <% for(var i = 0;i < l;i++){ var item = list[i]; %> <li class=" <%= splitJoin(item.className || conf.liClass) %>" <%= attr("index", i) %> <%= attr("id", item.id) %> ><%= item.text %></li> <% } %> </ul>'),template("nav",'<% list = list || []; conf = conf || {}; var l = list.length; %> <ul class="list-group <%= splitJoin(conf.ulClass) %>"> <% for(var i = 0;i < l;i++){ var item = list[i]; %> <li class="list-group-item <%= splitJoin(item.className || conf.liClass) %>" <%= attr("index", i) %> <%= attr("id", item.id) %> ><%= item.text %></li> <% } %> </ul>'),template("page.header",'<i class="gxb-icon-back"></i> | <span>测验</span> > <div><%=title%></div>'),template("pagination",'<% var curPage = curPage || 1; var pages = pages || [1]; var pLenght = pages.length; var totalPage = totalPage || 1; var pageSize = pageSize || ""; var sizes = sizes || [20, 50, 100, 500]; var sLenght = sizes.length; var isTotal = isTotal || 0; %> <div class="pager"> <ul class="pagination"> <% if (curPage != 1) { %> <li class="previous-page"> <a href="javascript:void(0)" data-page="<%= parseInt(curPage) - 1 %>"> 上一页 </a> </li> <% } else{%> <li class="previous-page disabled"> <a href="javascript:void(0)"> 上一页 </a> </li> <%}%> <% for (var pg in pages){ %> <% if (pages[pg] == curPage) { %> <li class="active"> <a href="javascript:void(0)" data-page="<%= pages[pg] %>"><%= pages[pg] %> </a> </li> <% } else { %> <li> <a href="javascript:void(0)" data-page="<%= pages[pg] %>"><%= pages[pg] %> </a> </li> <% } %> <% } %> <% if (curPage != totalPage) { %> <li class="next-page"> <a href="javascript:void(0)" data-page="<%= parseInt(curPage) + 1 %>"> 下一页 </a> </li> <% }else{ %> <li class="next-page disabled"> <a href="javascript:void(0)" > 下一页 </a> </li> <%}%>      </ul> <% if(!isTotal==0){ %> <span class="gxb-lxy-total"> 共 <em><%= isTotal %></em> 条 </span> <% } %> </div>'),template("pop.panel.def",'<% var buttons = buttons || []; var title = title || []; var content = content || []; var bLength = buttons.length; %> <div class="gxb-pop-panel <%= splitJoin(className) %>"> <div class="gxb-dialog-heading"> <h5 class="gxb-dialog-title"> <%= title %> </h5> <i class="gxb-dialog-close"> × </i> </div> <div class="gxb-dialog-body"> <%== content %> </div> <% if(!isEmptyArr(buttons)){ %> <div class="gxb-dialog-footer"> <% for(var i = 0;i < bLength;i++){ var btn = buttons[i]; %> <div class="btn btn-default <%= splitJoin(btn.className) %>" <%= attr("name", btn.name) %> <%= attr("value", btn.value) %> > <%= btn.text %> </div> <% } %> </div> <% } %> </div>'),template("report",'<div class="gxb-report" id="reportId"> <textarea class="gxb-report-textarea" > </textarea> </div>'),template("search",'<div class="navbar-form navbar-left" role="search"> <div class="form-group"> <%== template(\'input\', { className: "", placeholder: "按姓名查找", type: "text" }) %> </div> <%== template(\'btn.search\', {}) %> </div>'),template("tab",'<div class="panel panel-default"> <div class="panel-body"> </div> </div> '),template("table.body",""),template("table.border","<% include('table.def', { className: 'table-bordered ' + className }) %> "),template("table.def",'<% list = list || []; conf = conf || {}; maping = maping || []; var l = list.length; var ml = maping.length; %> <table class="table <%= splitJoin(className) %>"> <thead> </thead> <tbody> </tbody> </table> '),template("table.header",""),template("uploadfile.fileitem",'<% var data = data || {}; %> <li> <p class="preview"> <a class="pre" href="javascript:void(0)" data-href="<%= data.url %>" >预览</a> <a class="delete" href="javascript:void(0)" data-url="<%= data.url %>">删除</a> <a class="download" href="javascript:void(0)" data-href="<%= data.url %>" target="_blank">下载</a> </p> <p class="main"> <b><%= data.extension || "文件" %></b><span><%=data.title%></span> </p> </li>'),template("uploadfile.fileitem_new",'<% var data = data || {}; %> <li> <div class="right"> <em class="pre" href="javascript:void(0)" data-href="<%= data.url %>" >预览</em> <span class="delete" href="javascript:void(0)" data-url="<%= data.url %>">删除</span> <a class="download gxb-btn-pri gxb-btn-nav" href="<%= data.url %>" data-href="<%= data.url %>" target="_blank">下载</a> </div> <div class="left"> <span><%= data.extension || "文件" %></span><p><%=data.title%></p> </div> </li>'),template("uploadfile.fileitem_temp",'<% var data = data || {}; %> <li class="tempLi"> <div class="right" style="margin-right: 30px;font-size: 12px; color:#1FB6FF "> 上传中.... </div> <div class="left"> <span><%= data.extension || "文件" %></span><p><%=data.title%></p> <div class="percentBar"> <div class="percentBarWidth"></div> </div> </div> </li>'),template("uploadfile",'<% var config = config || {}; config.type=config.type || ""; var assets = assets || []; %> <div class="<%= config.containerCss || \'gxb-course-main-accessory\' %>"> <div class="up-left"><em><%= config.swmbol %></em> <span><%= config.title %></span> </div> <div class="up-right"> <div class=\'<%= config.classstyle || "uploadfiletop" %>\'> <div class="gxb-btn-mask gxb-mask-assi "><%= config.btnText || "上传" %> <input class="up-right-input" type="file" value="" id="uploadcourse"/> </div> </div> <div class="gxb-btn-mask-exp"><%= config.tips || "请上传文件" %></div> <div id="gxbcourseware" class="gxbcourseware"> <div class="gxb-course-post-state" style="display:none"></div> <div class="gxb-course-post-state-color" style="display:none"></div> <div class="gxb-course-post-state-fond" style="display:none"></div> </div> </div> </div> <div class="up-right-bottom"> <ul id="hoverstyle"> <% for(var i = 0 ; i< assets.length;i++){ var url =""; switch(config.type) { case "courseWare":{ url=assets[i].filePath; break; } default:{ url=assets[i].link; break; } } var title = assets[i].title; url = url.indexOf("?") >= 0 ? url.substring(0, url.indexOf("?")) : url; var fileExtension = url.substr(url.lastIndexOf(\'.\') + 1); %> <li> <p class="preview"> <a class="pre" href="javascript:void(0)" data-href="<%= url %>">预览</a> <a class="delete" href="javascript:void(0)" data-url="<%= url %>">删除</a> <a class="download" href="javascript:void(0)" data-href="<%= url %>" target="_blank">下载</a> </p> <p class="main"> <b><%= fileExtension || "文件" %></b><span><%= title %></span> </p> </li> <%} %> </ul> </div>'),template("uploadfileforcourseware",'<% var config = config || {}; config.type=config.type || ""; var assets = assets || []; %> <div class="<%= config.containerCss || \'gxb-course-main-accessory\' %>"> <div class="up-left"><em><%= config.swmbol %></em> <span><%= config.title %></span> </div> <div class="up-right"> <div class=\'<%= config.classstyle || "uploadfiletop" %> courseware-uploadfiletop\'> <div class="gxb-btn-mask gxb-mask-base">课程资源导入</div> <div class="gxb-btn-mask gxb-mask-hand gxb-mask-assi"><%= config.btnText || "上传" %><input class="up-right-input gxb-mask-hand-input" type="file" value="" id="uploadcourse"/></div> </div> <div class="gxb-btn-mask-exp"><%= config.tips || "请上传文件" %></div> <div id="gxbcourseware" class="gxbcourseware"> <div class="gxb-course-post-state" style="display:none"></div> <div class="gxb-course-post-state-color" style="display:none"></div> <div class="gxb-course-post-state-fond" style="display:none"></div> </div> </div> </div> <div class="up-right-bottom"> <ul id="hoverstyle"> <% for(var i = 0 ; i< assets.length;i++){ var url =""; switch(config.type) { case "courseWare":{ url=assets[i].filePath; break; } default:{ url=assets[i].link; break; } } var title = assets[i].title; url = url.indexOf("?") >= 0 ? url.substring(0, url.indexOf("?")) : url; var fileExtension = url.substr(url.lastIndexOf(\'.\') + 1); %> <li> <p class="preview"> <a class="pre" href="javascript:void(0)" data-href="<%= url %>">预览</a> <a class="delete" href="javascript:void(0)" data-url="<%= url %>">删除</a> <a class="download" href="javascript:void(0)" data-href="<%= url %>" target="_blank">下载</a> </p> <p class="main"> <b><%= fileExtension || "文件" %></b><span><%= title %></span> </p> </li> <%} %> </ul> </div>'),function(t,e){var a=t.gxb.utils,s={viewTemplate:"dialog.panel.def",content:null,title:null,mask:!0,buttons:[],pos:{my:"center",at:"center",of:t}};t.gxb.dialogFactory={};var i=function(i){var n=a.extend(s,i),l=a.extend(s.pos,i.pos);n.pos=l;var o=template(n.viewTemplate),r=e(o({className:n.className,title:n.title,content:n.content,buttons:n.buttons}));r.appendTo(e("#"+gxb.ui_home)),n.mask&&(r.wrap("<div class='gxb-dialog-wap'></div>"),r.before("<div class='gxb-dialog-mask'></div>"));var c=r.attr("id");if(!a.nothing(t.gxb.dialogFactory[c]))return t.gxb.dialogFactory[c];"undefined"==typeof c&&(c=gxb.seq(),r.attr("id",c));var d=n.buttons||[],p=d.length;1==p&&r.find(".gxb-sure").addClass("temp-class-name");for(var u=0;u<p;u++){var g=d[u],b=g.className,x=g.click;e("."+b,r).data("data-click",x),r.on("click."+b,"."+b,function(){var t=e(this).data("data-click");t?t():f.close()})}r.on("click.target",function(){var t=n.click;t&&t(f)}),r.on("click.target",".gxb-dialog-close",function(){var t=null;e.each(n.buttons,function(e,a){"gxb-cancel"===a.className&&(t=a.click)});var t=t||n.close,s=!0;a.isFunc(t)&&(s=!!t(f)),s&&f.close()});var f={target:r,close:function(){n.mask?r.parent().remove():r.remove(),null==t.gxb.dialogFactory[c]},hide:function(){n.mask?r.parent().remove():r.remove()},show:function(){n.mask?r.parent().show():r.show(),f.position()},position:function(){if(n.mask){var a=e(window).height(),s=e(window).width();r.closest(".gxb-dialog-wap").css({width:s+"px",height:a+"px"}),r.prev().css({width:s+"px",height:a+"px"}),e(".gxb-dialog-wap").position({my:"center",at:"center",of:t}),n.pos.of=r.closest(".gxb-dialog-wap"),r.position(n.pos)}else r.position(n.pos)},getConfig:function(){return n}};return f.position(),t.gxb.dialogFactory[c]=f,f};t.gxb.tips={},t.gxb.tips.success=function(t){a.isStr(t)&&(t={content:t}),t=a.extend({className:"gxb-dialog-tips-success",viewTemplate:"dialog.def",content:"提交成功!",timeout:"1000",click:function(t){t.close()}},t);var e=i(t);return t.timeout&&setTimeout(function(){e.close()},t.timeout||3e3),e},t.gxb.tips.publicing=function(t){a.isStr(t)&&(t={content:t}),t=a.extend({className:"gxb-dialog-tips-success gxb-dialog-tips-public",viewTemplate:"dialog.def",content:"发布中...",timeout:"1000"},t);var e=i(t);return e},t.gxb.tips.closepublic=function(){e(".gxb-dialog-tips-public").parents(".gxb-dialog-wap").remove()},t.gxb.tips.warning=function(t){a.isStr(t)&&(t={content:t}),t=a.extend({className:"gxb-dialog-tips-warning",viewTemplate:"dialog.def",content:"提示!",timeout:"1000",click:function(t){t.close()}},t);var e=i(t);return t.timeout&&setTimeout(function(){e.close()},t.timeout||3e3),e},t.gxb.tips.error=function(t,e){a.isStr(t)&&(t={content:t}),e&&(t.timeout=e),t=a.extend({className:"gxb-dialog-tips-error",viewTemplate:"dialog.def",content:"提交失败,请重试!",timeout:"1000",click:function(t){t.close()}},t);var s=i(t);return t.timeout&&setTimeout(function(){s.close()},t.timeout||3e3),s},t.gxb.tips.time=function(t){return a.isStr(t)&&(t={content:t}),t=a.extend({className:"gxb-dialog-tips-time",viewTemplate:"dialog.def",content:"操作成功!",click:function(t){t.close()}},t),i(t)},t.gxb.confirm=function(t){var e=i({viewTemplate:"dialog.panel.def",content:t.msg||"操作成功！",title:t.title||"提示！",buttons:[{className:"gxb-sure",text:"确认",click:function(){t.sure&&t.sure(e.close)}},{className:"gxb-cancel",text:"取消",click:function(){e.close(),t.cancel&&t.cancel(e.close)}}]});return e},t.gxb.warn=function(t,e){return i({viewTemplate:"dialog.panel.def",content:t||"警告！",title:"警告！",buttons:[{className:"gxb-sure",text:"确认",click:a.isFunc(e)?function(){e&&e()}:null}]})},t.gxb.alert=function(t,e,s){return i({viewTemplate:"dialog.panel.def",content:t||"警告！",title:"警告！",buttons:[{className:"gxb-sure",text:s||"确认",click:a.isFunc(e)?function(){e&&e()}:null}]})},t.gxb.tips.warn=function(t,e){return i({title:"提醒",viewTemplate:"dialog.panel.def",content:t||"警告！"})},t.gxb.tips.examwarn=function(t,e){return i({title:"提醒",viewTemplate:"dialog.panel.def",content:t||"警告！",close:a.isFunc(e)?function(){e&&e()}:null})},t.gxb.tips.warns=function(t,e){return i({title:"提醒",viewTemplate:"dialog.panel.def",content:t||"警告！",buttons:[{className:"gxb-sure",text:e||"确定"}]})},t.gxb.error=function(t){return a.isStr(t)&&(t={content:t}),t=a.extend({viewTemplate:"dialog.panel.def",content:"错误"},t),i(t)},t.gxb.dialog=function(t){return new i(t)},t.gxb.resize.push("dialog",function(){var e,s=t.gxb.dialogFactory||{};for(var i in s)e=s[i],a.nothing(e)||e.position()}),t.gxb.scroll.push("dialog",function(){var e,s=t.gxb.dialogFactory||{};for(var i in s)e=s[i],a.nothing(e)||e.position()}),e(function(){var t=document.getElementById(gxb.ui_home);if(a.nothing(t)){var e=document.createElement("div");e.id=gxb.ui_home,e.width="0",e.height="0",document.body.appendChild(e)}})}(window,jQuery),function(t,e){var a=t.gxb.utils;t.gxb.page=[];var s={curPage:1,pageSize:10,totalPage:1,rowCount:0,isTotal:0,template:template("pagination"),templateEmpty:template("empty"),pageClick:null},i=0,n=function(t,e){i=1*e.totalPage||1,(1*gxb.utils.localStorageUtils.get(t)>(1*e.totalPage||1)||(1*e.totalPage||1)!=i)&&gxb.utils.localStorageUtils.set(t,1)},l=function(t){var e=(document.referrer||"").toLowerCase(),a=o(),s=r();s==e||""==e||window.location.hash?gxb.utils.localStorageUtils.set(a,t.curPage||1):gxb.utils.localStorageUtils.set(a,gxb.utils.localStorageUtils.get(a)||t.curPage||1),n(a,t),t.curPage=gxb.utils.localStorageUtils.get(a)},o=function(){return r()+"_curPage"},r=function(){return((window.location.origin||window.location.protocol+"//"+window.location.host)+window.location.pathname).toLowerCase()},c=function(t,i){var r=a.extend(s,i),c=e("#"+t),d=function(){var t=parseInt(r.rowCount),e=parseInt(r.pageSize),a=parseInt(r.isTotal);if(t>0){var s=0,i=[],n=parseInt(r.curPage),l=parseInt(r.totalPage);if(n>3&&n<l-2)for(s=-2;s<=2;s++){var o=n+s;o>=0&&o<=l&&i.push(o)}else if(n>=l-4)for(s=-4;s<=0;s++){var o=l+s;o>=1&&o<=l&&i.push(o)}else for(s=1;s<=5;s++)s>=1&&s<=l&&i.push(s);c.html(r.template({curPage:n,pages:i,rowCount:t,pageSize:e,totalPage:l,isTotal:a}))}else c.html(r.templateEmpty({content:""}))},p={setConfig:function(t){r=a.extend(r,t);var e=o();parseInt(r.curPage)&&parseInt(gxb.utils.localStorageUtils.get(e))&&gxb.utils.localStorageUtils.get(e)!=r.curPage?(n(e,r),r.curPage=gxb.utils.localStorageUtils.get(e),this.reloadPage()):(l(r),d())},destroy:function(){},reloadPage:function(){var t=r.pageClick,e=r.curPage,a=r.pageSize;t&&t(e,a)},getConfig:function(){return r||{}}};return c.on("click.pageClick","[data-page]",function(){var t=e(this),a=t.attr("data-page"),s=o();gxb.utils.localStorageUtils.set(s,a||1);var i=r.pageClick,n=r.pageSize;i&&i(a,n)}),c.on("click.pageClick","[data-size]",function(){var t=e(this),a=r.curPage,s=o();gxb.utils.localStorageUtils.set(s,a||1);var i=r.pageClick,n=t.attr("data-size");i&&i(a,n)}),c.data("gxbPage","complete"),l(r),d(),p};e.fn.gxbPage=function(a){var s=e(this),i=s.attr("id");return"undefined"==typeof i&&(i="gxb_page_"+gxb.seq(),s.attr("id",i)),"complete"!==s.data("gxbPage")&&("undefined"!=typeof t.gxb.page[i]&&t.gxb.page[i].destroy(),t.gxb.page[i]=null),"undefined"==typeof t.gxb.page[i]||null==t.gxb.btn[i]?t.gxb.page[i]=new c(i,a):t.gxb.page[i].setConfig(a),t.gxb.page[i]}}(window,jQuery),function(t,e){t.gxb.utils;t.gxb.btn=[],t.gxb.def={};var a={disable:0,normal:1,submitting:2,complete:3};t.gxb.def.btn={disableText:"提交x",normalText:"提交",submittingText:"提交中",completeText:"提交y",init:function(){},click:function(){},url:null,data:null,type:null,dataType:null,success:function(){},error:function(){}};var s=function(s,i){var n="#"+s,l=e(n),o={setStatus:function(t){switch(t){case 0:l.html(c.disableText),l.data("btnStatus",0);break;case 1:l.html(c.normalText),l.data("btnStatus",1);break;case 2:l.html(c.submittingText),l.data("btnStatus",2);break;case 3:l.html(c.completeText),l.data("btnStatus",3)}},beforeClick:function(){return!c.beforeClick||c.beforeClick()},ajax:function(){return c.url&&gxb._.ajax({url:c.url,data:c.data,type:c.type,dataType:c.dataType,async:!0,success:function(t){return c.success(t)},error:function(t){return c.error(t)}}),{state:3}},click:function(){return c.click?c.click():0}},r={destroy:function(){},setConfig:function(t){return c=e.extend({},c,t),r}},c=e.extend({},t.gxb.def.btn,i);return l.on("click",function(){o.beforeClick()&&(o.setStatus(a.submitting),o.setStatus(o.click()))}),r};t.gxb.subbtn={},t.gxb.subbtn.submit=function(t){var a=t.get(0);if(a){t.data("preClick",t.clone());var s=t.text()||t.val()||"";t.data("preText",s),t.text(s+"……"),t.addClass("disable");var i=e(t.context.outerHTML),n=gxb.seq();t.data("preId",n),i.attr("id",n),t.after(i),t.hide()}},t.gxb.subbtn.reset=function(t){var a=t.get(0);a&&(t.removeClass("disable"),t.text(t.data("preText")),t.show(),e("#"+t.data("preId")).remove())},e.fn.gxbBtn=function(a){var i=e(this),n=i.attr("id");return"undefined"==typeof n&&(n="gxb_btn_"+gxb.seq(),i.attr("id",n)),"complete"!==i.data("gxbBtn")&&("undefined"!=typeof t.gxb.btn[n]&&t.gxb.btn[n].destroy(),t.gxb.btn[n]=null),"undefined"==typeof t.gxb.btn[n]||null==t.gxb.btn[n]?t.gxb.btn[n]=new s(n,a):t.gxb.btn[n].setConfig(a),t.gxb.btn[n]}}(window,jQuery),function(t,e){var a=t.gxb.utils;t.gxb.exportPage=[];var s={template:"export.exl.options",templateEmpty:template("empty"),exportClick:null,excelHeads:[]};t.gxb.exportExl=function(t){var i=a.extend(s,t),n=template(i.template),l=e(n({excelHeads:i.excelHeads})),o=function(){l.remove()};l.on("click.export",".btn-export",function(){var t=[];l.find(".gxb-checkbox-no-checked").each(function(){e(this).hasClass("checked")&&t.push(e(this).next().text())}),i.exportClick&&i.exportClick(t,o)}),l.on("click.gxb-checkbox-no-checked",".gxb-checkbox-no-checked",function(){var t=e(this);t.toggleClass("checked"),t.hasClass("checked")?t.parent().addClass("active"):t.parent().removeClass("active")}),l.on("click.close",".cancel , .close",function(){l.remove()}),e(document.body).append(l),a.autoSetPop(l.find(".pop"))}}(window,jQuery),function(){var t;t=function(){function t(t,e){var a;a=this,this.opts=$.extend({},this.defaults,e),this.$el=$(t),this.countdowns=[],this.prepareHTML(),this.countdownInit(this.$el),this.$el.on("countdown:reset",function(){return a.reset(a.$el)})}return t.prototype.defaults={dayText:"day ",days2Text:"days ",daysText:"days ",hourText:"hour ",hours2Text:"hours ",hoursText:"hours ",minutesText:":",secondsText:"",textAfterCount:"---",oneDayClass:!1,displayDays:!0,displayZeroDays:!0,addClass:!1,callback:!1,warnSeconds:60,warnClass:!1,rusNumbers:!1,boxContenerClass:"kkcountdown-box",boxDaysClass:"kkc-days",boxHoursClass:"kkc-hours",boxHoursClass1:"kkc-hours1",boxHoursClass2:"kkc-hours2",boxMinClass:"kkc-min",boxMinClass1:"kkc-min1",boxMinClass2:"kkc-min2",boxSecClass:"kkc-sec",boxSecClass1:"kkc-sec1",boxSecClass2:"kkc-sec2",boxbackground:"boxbackground",boxDaysTextClass:"kkc-days-text",boxHoursTextClass:"kkc-hours-text",boxMinTextClass:"kkc-min-text",boxSecTextClass:"kkc-sec-text"},t.prototype.prepareHTML=function(){var t,e,a,s,i,n,l,o,r,c,d,p,u;return l=this,t=$(document.createElement("span")).addClass(l.opts.boxContenerClass),e=$(document.createElement("span")).addClass(l.opts.boxDaysClass),o=$(document.createElement("span")).addClass(l.opts.boxHoursClass1).addClass(l.opts.boxbackground),r=$(document.createElement("span")).addClass(l.opts.boxHoursClass2).addClass(l.opts.boxbackground),c=$(document.createElement("span")).addClass(l.opts.boxMinClass1).addClass(l.opts.boxbackground),d=$(document.createElement("span")).addClass(l.opts.boxMinClass2).addClass(l.opts.boxbackground),p=$(document.createElement("span")).addClass(l.opts.boxSecClass1).addClass(l.opts.boxbackground),u=$(document.createElement("span")).addClass(l.opts.boxSecClass2).addClass(l.opts.boxbackground),a=$(document.createElement("span")).addClass(l.opts.boxDaysTextClass),s=$(document.createElement("span")).addClass(l.opts.boxHoursTextClass),i=$(document.createElement("span")).addClass(l.opts.boxMinTextClass),n=$(document.createElement("span")).addClass(l.opts.boxSecTextClass),l.opts.addClass&&t.addClass(l.opts.addClass),s.html(l.opts.hoursText),i.html(l.opts.minutesText),n.html(l.opts.secondsText),t.append(e).append(a).append(o).append(r).append(s).append(c).append(d).append(i).append(p).append(u).append(n),this.$el.append(t)},t.prototype.reset=function(t){if(void 0!==t.id)return t.id=null},t.prototype.countdownInit=function(t){var e,a,s,i;return e=0,i=this,void 0!==t.id&&null!==t.id||(t.id="kk_"+Math.random((new Date).getTime())),e=i.countdowns[t.id]||0===i.countdowns[t.id]?i.countdowns[t.id]:t.data("seconds"),void 0===e&&(s=new Date,s=Math.floor(s.getTime()/1e3),a=t.data("time"),void 0===a&&(a=t.attr("time")),e=a-s),i.countdowns[t.id]=e-1,i.opts.warnClass&&e<i.opts.warnSeconds&&t.addClass(i.opts.warnClass),e<=0?(t.html(i.opts.textAfterCount),i.opts.callback?i.opts.callback.call(t):void 0):e<=86400?(t.data("leaveTime",e),this.countdown(!0,t,e),setTimeout(function(){return i.countdownInit(t)},1e3)):(t.data("leaveTime",e),this.countdown(!1,t,e),setTimeout(function(){return i.countdownInit(t)},1e3))},t.prototype.countdown=function(t,e,a){var s,i,n,l,o,r,c,d;return o=this,l=this.fixTime(a%60),a=Math.floor(a/60),n=this.fixTime(a%60),a=Math.floor(a/60),i=this.fixTime(a%24),a=Math.floor(a/24),s=a,r=i.toString().split(""),c=n.toString().split(""),d=l.toString().split(""),o.opts.oneDayClass&&t&&e.addClass(o.opts.oneDayClass),o.opts.displayDays&&(0===s&&o.opts.displayZeroDays?(e.find("."+o.opts.boxDaysClass).html(s),e.find("."+o.opts.boxDaysTextClass).html(this.formatText(s,"day"))):s>0&&(e.find("."+o.opts.boxDaysClass).html(s),e.find("."+o.opts.boxDaysTextClass).html(this.formatText(s,"day")))),e.find("."+o.opts.boxHoursClass1).html(r[0]),e.find("."+o.opts.boxHoursClass2).html(r[1]),e.find("."+o.opts.boxHoursTextClass).html(this.formatText(i,"hour")),e.find("."+o.opts.boxMinClass1).html(c[0]),e.find("."+o.opts.boxMinClass2).html(c[1]),e.find("."+o.opts.boxSecClass1).html(d[0]),e.find("."+o.opts.boxSecClass2).html(d[1]),e.find("."+o.opts.boxSecClass2).html(d[1])},t.prototype.formatText=function(t,e){var a,s,i;return i=this,a=i.opts[e+"sText"],i.opts.rusNumbers?t>=5&&t<20?a=i.opts[e+"sText"]:(s=1*(""+t).replace(/^\d+(\d)$/,"$1"),a=1===s?i.opts[e+"Text"]:s>=2&&s<=4?i.opts[e+"s2Text"]:i.opts[e+"sText"]):a=1===t?i.opts[e+"Text"]:i.opts[e+"sText"]},t.prototype.fixTime=function(t){return t=t<10?"0"+t:t},t}(),$.fn.extend({trcountdown:function(e){return this.each(function(){var a,s;if(a=$(this),s=a.data("kkcountdown"),s||a.data("kkcountdown",s=new t(this,e)),"string"==typeof e)return s[e].apply(s,args)})}})}.call(this);